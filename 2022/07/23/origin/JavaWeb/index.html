<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/kouzhaopng">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/kouzhao.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"manual","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="常用正则表达式校验数字的表达式123456789101112131415161718191 数字：^[0-9]*$2 n位的数字：^\d&amp;#123;n&amp;#125;$3 至少n位的数字：^\d&amp;#123;n,&amp;#125;$4 m-n位的数字：^\d&amp;#123;m,n&amp;#125;$5 零和非零开头的数字：^(0|[1-9][0-9]*)$6 非零开头的最多带两位小数的数字：^([1-9][0-9]*)">
<meta property="og:type" content="article">
<meta property="og:title" content="JavaWeb">
<meta property="og:url" content="http://example.com/2022/07/23/origin/JavaWeb/index.html">
<meta property="og:site_name" content="LiAng的博客">
<meta property="og:description" content="常用正则表达式校验数字的表达式123456789101112131415161718191 数字：^[0-9]*$2 n位的数字：^\d&amp;#123;n&amp;#125;$3 至少n位的数字：^\d&amp;#123;n,&amp;#125;$4 m-n位的数字：^\d&amp;#123;m,n&amp;#125;$5 零和非零开头的数字：^(0|[1-9][0-9]*)$6 非零开头的最多带两位小数的数字：^([1-9][0-9]*)">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220217103122880.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220217103225948.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220217103622254.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220217104707653.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220217111239361.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220217111811795.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220217111829250.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220217112237523.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220219101925731.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220219114712452.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220219121322087.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220219173331414.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220219213907606.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220224092941224.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220301091705216.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220301091852148.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220301195412155.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220301203616954.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220301203628158.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220301203730411.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220223211412046.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220223211519127.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220223212341065.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220625090140553.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220310135905260.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220310135916708.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220310140256266.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220310141232989.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220310141252966.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220310202550602.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220312082018008.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220312084236388.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220312084350591.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220312084934681.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220313153638744.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220313212927458.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220313213142802.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220313213158673.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220313213230807.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220313214003016.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220314092625286.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220314092649787.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220314092710646.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220314093518792.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220314100858009.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220314100923734.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220314104734614.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220316193247406.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220316193401481.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220316193546561.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220316223355873.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220316224358294.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220317092159390.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220317172211618.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220317172314023.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220325090230829.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220326221601071.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220326221743296.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220327104208251.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220328163701554.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220328173610621.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220328173812023.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220328173837621.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220330161244605.png">
<meta property="og:image" content="e:/VIP/JavaWeb/笔记/JavaWeb.assets/image-20220330162807058.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220330162919197.png">
<meta property="og:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220330195348040.png">
<meta property="article:published_time" content="2022-07-23T04:07:07.000Z">
<meta property="article:modified_time" content="2022-07-23T04:17:13.502Z">
<meta property="article:author" content="LiAng">
<meta property="article:tag" content="Java">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="d:/Github/will-liang.github.io/source_posts/JavaWeb.assets/image-20220217103122880.png">

<link rel="canonical" href="http://example.com/2022/07/23/origin/JavaWeb/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>JavaWeb | LiAng的博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/rss2.xml" title="LiAng的博客" type="application/rss+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>
      <a target="_blank" rel="noopener" href="https://github.com/fengye97" class="github-corner" aria-label="View source on GitHub">

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">LiAng的博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/07/23/origin/JavaWeb/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="LiAng">
      <meta itemprop="description" content="永远相信美好的事情即将发生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LiAng的博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          JavaWeb
        </h1>

        <div class="post-meta">
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-07-23 12:07:07 / 修改时间：12:17:13" itemprop="dateCreated datePublished" datetime="2022-07-23T12:07:07+08:00">2022-07-23</time>
            </span>

          
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="常用正则表达式"><a href="#常用正则表达式" class="headerlink" title="常用正则表达式"></a>常用正则表达式</h1><h2 id="校验数字的表达式"><a href="#校验数字的表达式" class="headerlink" title="校验数字的表达式"></a>校验数字的表达式</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> 数字：^[<span class="number">0</span>-<span class="number">9</span>]*$</span><br><span class="line"><span class="number">2</span> n位的数字：^\d&#123;n&#125;$</span><br><span class="line"><span class="number">3</span> 至少n位的数字：^\d&#123;n,&#125;$</span><br><span class="line"><span class="number">4</span> m-n位的数字：^\d&#123;m,n&#125;$</span><br><span class="line"><span class="number">5</span> 零和非零开头的数字：^(<span class="number">0</span>|[<span class="number">1</span>-<span class="number">9</span>][<span class="number">0</span>-<span class="number">9</span>]*)$</span><br><span class="line"><span class="number">6</span> 非零开头的最多带两位小数的数字：^([<span class="number">1</span>-<span class="number">9</span>][<span class="number">0</span>-<span class="number">9</span>]*)+(.[<span class="number">0</span>-<span class="number">9</span>]&#123;<span class="number">1</span>,<span class="number">2</span>&#125;)?$</span><br><span class="line"><span class="number">7</span> 带<span class="number">1</span>-<span class="number">2</span>位小数的正数或负数：^(\-)?\d+(\.\d&#123;<span class="number">1</span>,<span class="number">2</span>&#125;)?$</span><br><span class="line"><span class="number">8</span> 正数、负数、和小数：^(\-|\+)?\d+(\.\d+)?$</span><br><span class="line"><span class="number">9</span> 有两位小数的正实数：^[<span class="number">0</span>-<span class="number">9</span>]+(.[<span class="number">0</span>-<span class="number">9</span>]&#123;<span class="number">2</span>&#125;)?$</span><br><span class="line"><span class="number">10</span> 有<span class="number">1</span>~<span class="number">3</span>位小数的正实数：^[<span class="number">0</span>-<span class="number">9</span>]+(.[<span class="number">0</span>-<span class="number">9</span>]&#123;<span class="number">1</span>,<span class="number">3</span>&#125;)?$</span><br><span class="line"><span class="number">11</span> 非零的正整数：^[<span class="number">1</span>-<span class="number">9</span>]\d*$ 或 ^([<span class="number">1</span>-<span class="number">9</span>][<span class="number">0</span>-<span class="number">9</span>]*)&#123;<span class="number">1</span>,<span class="number">3</span>&#125;$ 或 ^\+?[<span class="number">1</span>-<span class="number">9</span>][<span class="number">0</span>-<span class="number">9</span>]*$</span><br><span class="line"><span class="number">12</span> 非零的负整数：^\-[<span class="number">1</span>-<span class="number">9</span>][]<span class="number">0</span>-<span class="number">9</span><span class="string">&quot;*$ 或 ^-[1-9]\d*$</span></span><br><span class="line"><span class="string">13 非负整数：^\d+$ 或 ^[1-9]\d*|0$</span></span><br><span class="line"><span class="string">14 非正整数：^-[1-9]\d*|0$ 或 ^((-\d+)|(0+))$</span></span><br><span class="line"><span class="string">15 非负浮点数：^\d+(\.\d+)?$ 或 ^[1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0$</span></span><br><span class="line"><span class="string">16 非正浮点数：^((-\d+(\.\d+)?)|(0+(\.0+)?))$ 或 ^(-([1-9]\d*\.\d*|0\.\d*[1-9]\d*))|0?\.0+|0$</span></span><br><span class="line"><span class="string">17 正浮点数：^[1-9]\d*\.\d*|0\.\d*[1-9]\d*$ 或 ^(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*))$</span></span><br><span class="line"><span class="string">18 负浮点数：^-([1-9]\d*\.\d*|0\.\d*[1-9]\d*)$ 或 ^(-(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*)))$</span></span><br><span class="line"><span class="string">19 浮点数：^(-?\d+)(\.\d+)?$ 或 ^-?([1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0)$</span></span><br></pre></td></tr></table></figure>

<h2 id="校验字符的表达式"><a href="#校验字符的表达式" class="headerlink" title="校验字符的表达式"></a>校验字符的表达式</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> 汉字：^[\u4e00-\u9fa5]&#123;<span class="number">0</span>,&#125;$</span><br><span class="line"><span class="number">2</span> 英文和数字：^[A-Za-z0-<span class="number">9</span>]+$ 或 ^[A-Za-z0-<span class="number">9</span>]&#123;<span class="number">4</span>,<span class="number">40</span>&#125;$</span><br><span class="line"><span class="number">3</span> 长度为<span class="number">3</span>-<span class="number">20</span>的所有字符：^.&#123;<span class="number">3</span>,<span class="number">20</span>&#125;$</span><br><span class="line"><span class="number">4</span> 由<span class="number">26</span>个英文字母组成的字符串：^[A-Za-z]+$</span><br><span class="line"><span class="number">5</span> 由<span class="number">26</span>个大写英文字母组成的字符串：^[A-Z]+$</span><br><span class="line"><span class="number">6</span> 由<span class="number">26</span>个小写英文字母组成的字符串：^[a-z]+$</span><br><span class="line"><span class="number">7</span> 由数字和<span class="number">26</span>个英文字母组成的字符串：^[A-Za-z0-<span class="number">9</span>]+$</span><br><span class="line"><span class="number">8</span> 由数字、<span class="number">26</span>个英文字母或者下划线组成的字符串：^\w+$ 或 ^\w&#123;<span class="number">3</span>,<span class="number">20</span>&#125;$</span><br><span class="line"><span class="number">9</span> 中文、英文、数字包括下划线：^[\u4E00-\u9FA5A-Za-z0-9_]+$</span><br><span class="line"><span class="number">10</span> 中文、英文、数字但不包括下划线等符号：^[\u4E00-\u9FA5A-Za-z0-<span class="number">9</span>]+$ 或 ^[\u4E00-\u9FA5A-Za-z0-<span class="number">9</span>]&#123;<span class="number">2</span>,<span class="number">20</span>&#125;$</span><br><span class="line"><span class="number">11</span> 可以输入含有^%&amp;<span class="string">&#x27;,;=?$\&quot;等字符：[^%&amp;&#x27;</span>,;=?$\x22]+</span><br><span class="line"><span class="number">12</span> 禁止输入含有~的字符：[^~\x22]+</span><br></pre></td></tr></table></figure>

<h2 id="特殊需求表达式"><a href="#特殊需求表达式" class="headerlink" title="特殊需求表达式"></a>特殊需求表达式</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">1 Email地址：^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$</span><br><span class="line">2 域名：[a-zA-Z0-9][-a-zA-Z0-9]&#123;0,62&#125;(/.[a-zA-Z0-9][-a-zA-Z0-9]&#123;0,62&#125;)+/.?</span><br><span class="line">3 InternetURL：[a-zA-z]+://[^\s]* 或 ^https://([\w-]+\.)+[\w-]+(/[\w-./?%&amp;=]*)?$</span><br><span class="line">4 手机号码：^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\d&#123;8&#125;$</span><br><span class="line">5 电话号码(&quot;XXX-XXXXXXX&quot;、&quot;XXXX-XXXXXXXX&quot;、&quot;XXX-XXXXXXX&quot;、&quot;XXX-XXXXXXXX&quot;、&quot;XXXXXXX&quot;和&quot;XXXXXXXX)：^(\(\d&#123;3,4&#125;-)|\d&#123;3.4&#125;-)?\d&#123;7,8&#125;$ </span><br><span class="line">6 国内电话号码(0511-4405222、021-87888822)：\d&#123;3&#125;-\d&#123;8&#125;|\d&#123;4&#125;-\d&#123;7&#125;</span><br><span class="line">7 身份证号：</span><br><span class="line">		15或18位身份证：^\d&#123;15&#125;|\d&#123;18&#125;$</span><br><span class="line">		15位身份证：^[1-9]\d&#123;7&#125;((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d&#123;3&#125;$</span><br><span class="line">		18位身份证：^[1-9]\d&#123;5&#125;[1-9]\d&#123;3&#125;((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d&#123;4&#125;$</span><br><span class="line">8 短身份证号码(数字、字母x结尾)：^([0-9])&#123;7,18&#125;(x|X)?$ 或 ^\d&#123;8,18&#125;|[0-9x]&#123;8,18&#125;|[0-9X]&#123;8,18&#125;?$</span><br><span class="line">9 帐号是否合法(字母开头，允许5-16字节，允许字母数字下划线)：^[a-zA-Z][a-zA-Z0-9_]&#123;4,15&#125;$</span><br><span class="line">10 密码(以字母开头，长度在6~18之间，只能包含字母、数字和下划线)：^[a-zA-Z]\w&#123;5,17&#125;$</span><br><span class="line">11 强密码(必须包含大小写字母和数字的组合，不能使用特殊字符，长度在8-10之间)：^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).&#123;8,10&#125;$ </span><br><span class="line">12 日期格式：^\d&#123;4&#125;-\d&#123;1,2&#125;-\d&#123;1,2&#125;</span><br><span class="line">13 一年的12个月(01～09和1～12)：^(0?[1-9]|1[0-2])$</span><br><span class="line">14 一个月的31天(01～09和1～31)：^((0?[1-9])|((1|2)[0-9])|30|31)$ </span><br><span class="line">15 钱的输入格式：</span><br><span class="line">16 1.有四种钱的表示形式我们可以接受:&quot;10000.00&quot; 和 &quot;10,000.00&quot;, 和没有 &quot;分&quot; 的 &quot;10000&quot; 和 &quot;10,000&quot;：^[1-9][0-9]*$ </span><br><span class="line">17 2.这表示任意一个不以0开头的数字,但是,这也意味着一个字符&quot;0&quot;不通过,所以我们采用下面的形式：^(0|[1-9][0-9]*)$ </span><br><span class="line">18 3.一个0或者一个不以0开头的数字.我们还可以允许开头有一个负号：^(0|-?[1-9][0-9]*)$ </span><br><span class="line">19 4.这表示一个0或者一个可能为负的开头不为0的数字.让用户以0开头好了.把负号的也去掉,因为钱总不能是负的吧.下面我们要加的是说明可能的小数部分：^[0-9]+(.[0-9]+)?$ </span><br><span class="line">20 5.必须说明的是,小数点后面至少应该有1位数,所以&quot;10.&quot;是不通过的,但是 &quot;10&quot; 和 &quot;10.2&quot; 是通过的：^[0-9]+(.[0-9]&#123;2&#125;)?$ </span><br><span class="line">21 6.这样我们规定小数点后面必须有两位,如果你认为太苛刻了,可以这样：^[0-9]+(.[0-9]&#123;1,2&#125;)?$ </span><br><span class="line">22 7.这样就允许用户只写一位小数.下面我们该考虑数字中的逗号了,我们可以这样：^[0-9]&#123;1,3&#125;(,[0-9]&#123;3&#125;)*(.[0-9]&#123;1,2&#125;)?$ </span><br><span class="line">23 8.1到3个数字,后面跟着任意个 逗号+3个数字,逗号成为可选,而不是必须：^([0-9]+|[0-9]&#123;1,3&#125;(,[0-9]&#123;3&#125;)*)(.[0-9]&#123;1,2&#125;)?$ </span><br><span class="line">24 备注：这就是最终结果了,别忘了&quot;+&quot;可以用&quot;*&quot;替代如果你觉得空字符串也可以接受的话(奇怪,为什么?)最后,别忘了在用函数时去掉去掉那个反斜杠,一般的错误都在这里</span><br><span class="line">25 xml文件：^([a-zA-Z]+-?)+[a-zA-Z0-9]+\\.[x|X][m|M][l|L]$</span><br><span class="line">26 中文字符的正则表达式：[\u4e00-\u9fa5]</span><br><span class="line">27 双字节字符：[^\x00-\xff] (包括汉字在内，可以用来计算字符串的长度(一个双字节字符长度计2，ASCII字符计1))</span><br><span class="line">28 空白行的正则表达式：\n\s*\r (可以用来删除空白行)</span><br><span class="line">29 HTML标记的正则表达式：&lt;(\S*?)[^&gt;]*&gt;.*?|&lt;.*? /&gt; (网上流传的版本太糟糕，上面这个也仅仅能部分，对于复杂的嵌套标记依旧无能为力)</span><br><span class="line">30 首尾空白字符的正则表达式：^\s*|\s*$或(^\s*)|(\s*$) (可以用来删除行首行尾的空白字符(包括空格、制表符、换页符等等)，非常有用的表达式)</span><br><span class="line">31 腾讯QQ号：[1-9][0-9]&#123;4,&#125; (腾讯QQ号从10000开始)</span><br><span class="line">32 中国邮政编码：[1-9]\d&#123;5&#125;(?!\d) (中国邮政编码为6位数字)</span><br><span class="line">33 IP地址：\d+\.\d+\.\d+\.\d+ (提取IP地址时有用)</span><br></pre></td></tr></table></figure>



<h1 id="Tomcat"><a href="#Tomcat" class="headerlink" title="Tomcat"></a>Tomcat</h1><h2 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h2><p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220217103122880.png" alt="image-20220217103122880"></p>
<p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220217103225948.png" alt="image-20220217103225948"> </p>
<ol>
<li><p>server.xml 用于配置 tomcat 的基本设置(启动端口，关闭端口, 主机名)</p>
</li>
<li><p>web.xml 用于指定 tomcat 运行时配置(比如 servlet 等..)</p>
</li>
<li><p>webapps 目录是存放 web 应用，就是网站</p>
</li>
</ol>
<h2 id="catalina-启动-Tomcat"><a href="#catalina-启动-Tomcat" class="headerlink" title="catalina 启动 Tomcat"></a>catalina 启动 Tomcat</h2><h3 id="1-进入到-Tomcat-的-bin-目录下"><a href="#1-进入到-Tomcat-的-bin-目录下" class="headerlink" title="1. 进入到 Tomcat 的 bin 目录下"></a>1. 进入到 Tomcat 的 bin 目录下</h3><h3 id="2-执行命令：-catalina-run"><a href="#2-执行命令：-catalina-run" class="headerlink" title="2. 执行命令： catalina run"></a>2. 执行命令： catalina run</h3><p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220217103622254.png" alt="image-20220217103622254"></p>
<h2 id="停止-Tomcat"><a href="#停止-Tomcat" class="headerlink" title="停止 Tomcat"></a>停止 Tomcat</h2><ol>
<li>点击 tomcat 服务器窗口，直接点击的关闭按钮</li>
<li>进入 Tomcat 的 bin 目录下的 shutdown.bat 双击，就可以停止 Tomcat 服务器(推荐)</li>
</ol>
<h2 id="修改-Tomcat-服务端口"><a href="#修改-Tomcat-服务端口" class="headerlink" title="修改 Tomcat 服务端口"></a>修改 Tomcat 服务端口</h2><ol>
<li>Tomcat 目录下的 conf 目录，修改 server.xml 配置文件</li>
</ol>
<p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220217104707653.png" alt="image-20220217104707653"></p>
<ol start="2">
<li><a target="_blank" rel="noopener" href="http://localhost/">http://localhost</a> , 默 认 是 访 问 80 端 口 , 即 <a target="_blank" rel="noopener" href="http://localhost/">http://localhost</a> 等 价<br><a target="_blank" rel="noopener" href="http://localhost/">http://localhost:80</a></li>
</ol>
<h2 id="Tomcat-服务中部署-WEB-应用"><a href="#Tomcat-服务中部署-WEB-应用" class="headerlink" title="Tomcat 服务中部署 WEB 应用"></a>Tomcat 服务中部署 WEB 应用</h2><p>JavaWeb程序&#x2F;应用&#x2F;工程目录结构</p>
<p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220217111239361.png" alt="image-20220217111239361"></p>
<h3 id="部署方式1：将-web-工程的目录拷贝到-Tomcat-的-webapps-目录下"><a href="#部署方式1：将-web-工程的目录拷贝到-Tomcat-的-webapps-目录下" class="headerlink" title="部署方式1：将 web 工程的目录拷贝到 Tomcat 的 webapps 目录下"></a>部署方式1：将 web 工程的目录拷贝到 Tomcat 的 webapps 目录下</h3><ol>
<li>news Web工程(目前都是静态资源 html, 图片)</li>
<li>将该news目录&#x2F;文件夹 拷贝到 Tomcat 的webapps目录下</li>
<li>浏览器输入： <a href="http://ip[域名]:port/news/子目录../文件名">http://ip[域名]:port/news/子目录../文件名</a></li>
</ol>
<h3 id="部署方式2：通过配置文件来部署-只做介绍"><a href="#部署方式2：通过配置文件来部署-只做介绍" class="headerlink" title="部署方式2：通过配置文件来部署(只做介绍)"></a>部署方式2：通过配置文件来部署(只做介绍)</h3><ol>
<li>在Tomcat 下的 conf 目录\Catalina\localhost\ 下,配置文件，比如hsp.xml(提醒：知道Tomcat通过配置，可以把一个web应用映射到指定的目录，可以解决磁盘空间分配的问题.)</li>
</ol>
<p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220217111811795.png" alt="image-20220217111811795"></p>
<ol start="2">
<li>访问web工程: <a href="http://ip[域名]:port/hsp/index.html">http://ip[域名]:port/hsp/index.html</a> 就表示访问 D:\album 目录下的<br>index.html</li>
</ol>
<p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220217111829250.png" alt="image-20220217111829250"></p>
<p>ROOT 的工程的访问</p>
<ol>
<li>在浏览器地址栏中输入访问地址如下： <a href="http://ip[域名]:port，">http://ip[域名]:port，</a> 没有Web工程&#x2F;应用名时，默认访问的是 ROOT 工程</li>
<li>在浏览器地址栏中输入的访问地址如下： <a href="http://ip[域名]:port/工程名/">http://ip[域名]:port/工程名/</a> ，没有资源名，默认访问 index.jsp 页面</li>
</ol>
<h2 id="浏览器访问-web-服务器文件-UML-时序图"><a href="#浏览器访问-web-服务器文件-UML-时序图" class="headerlink" title="浏览器访问 web 服务器文件 UML 时序图!!!"></a>浏览器访问 web 服务器文件 UML 时序图!!!</h2><p>&#x3D;&#x3D;非常重要！！！&#x3D;&#x3D;</p>
<p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220217112237523.png" alt="image-20220217112237523"></p>
<hr>


<h1 id="三大组件-Servlet"><a href="#三大组件-Servlet" class="headerlink" title="三大组件-Servlet"></a>三大组件-Servlet</h1><h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><p>Servlet和Tomcat的关系：&#x3D;&#x3D;Tomcat支持Servlet&#x3D;&#x3D;</p>
<p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220219101925731.png" alt="image-20220219101925731"></p>
<p>Servlet 在开发动态 WEB 工程中，得到广泛的应用，掌握好 Servlet 非常重要了, Servlet(基石)是 SpringMVC 的基础</p>
<p>Servlet(java 服务器小程序)，它的特点:</p>
<ol>
<li>他是由服务器端调用和执行的(一句话：是Tomcat解析和执行)</li>
<li>他是用java语言编写的, 本质就是Java类</li>
<li>他是按照Servlet规范开发的(除了tomcat-&gt;Servlet weblogic-&gt;Servlet)</li>
<li>功能强大，可以完成几乎所有的网站功能</li>
</ol>
<h2 id="手动开发Servlet"><a href="#手动开发Servlet" class="headerlink" title="手动开发Servlet"></a>手动开发Servlet</h2><ol>
<li>编写类HelloServlet去实现 Servlet 接口</li>
<li>实现 service 方法，处理请求，并响应数据</li>
<li>在 web.xml 中去配置 servlet 程序的访问地址</li>
</ol>
<p>注意：要手动添加servlet-api.jar(在tomcat&#x2F;lib下) 到工程。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> LiAng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@time</span> 2022/2/19 10:42</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloServlet</span> <span class="keyword">implements</span> <span class="title class_">Servlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 1.初始化 servlet</span></span><br><span class="line"><span class="comment">     * 2.当创建HelloServlet 实例时，会调用init方法</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> servletConfig</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> ServletException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(ServletConfig servletConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;init() 被调用&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 返回ServletConfig 也就是返回Servlet的配置</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> ServletConfig <span class="title function_">getServletConfig</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 1.service方法处理浏览器的请求（包括get/post）</span></span><br><span class="line"><span class="comment">     * 2.当浏览器每次请求Servlet时，就会调用一次service方法</span></span><br><span class="line"><span class="comment">     * 3.当tomcat调用该方法时，会把http请求的数据封装成实现了ServletRequest接口的request对象</span></span><br><span class="line"><span class="comment">     * 4.通过servletRequest 对象，可以得到用户提交的数据</span></span><br><span class="line"><span class="comment">     * 5. servletResponse 对象可以用于返回数据给Tomcat-&gt;浏览器</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> servletRequest</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> servletResponse</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> ServletException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Hello Servlet&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 返回servlet信息，使用较少</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getServletInfo</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 1.该方法是在servlet销毁时，被调用</span></span><br><span class="line"><span class="comment">     * 2.只会调用一次</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;destroy 调用&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    注释小技巧--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--注意</span></span><br><span class="line"><span class="comment">        1.servlet-name：给Servlet取名，该名字唯一</span></span><br><span class="line"><span class="comment">        2.servlet-class：Servlet的类的全路径：Tomcat在反射生成该Servlet需要使用</span></span><br><span class="line"><span class="comment">        3.url-pattern：这个就是该servlet访问的url的配置（路径）</span></span><br><span class="line"><span class="comment">        4.这时应该这样访问：http://localhost:8080/servlet/helloServlet</span></span><br><span class="line"><span class="comment">        5.url-pattern 取名是程序员决定的，/不要丢</span></span><br><span class="line"><span class="comment">		6.load-on-startup 表示在tomcat 启动时，会自动的加载servlet实例</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>HelloServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.lzw.servlet.HelloServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>HelloServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/helloServlet<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="浏览器调用Servlet流程"><a href="#浏览器调用Servlet流程" class="headerlink" title="浏览器调用Servlet流程"></a>浏览器调用Servlet流程</h2><p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220219114712452.png" alt="image-20220219114712452"></p>
<h2 id="Servlet生命周期"><a href="#Servlet生命周期" class="headerlink" title="Servlet生命周期"></a>Servlet生命周期</h2><p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220219121322087.png" alt="image-20220219121322087"></p>
<ol>
<li>init()初始化阶段</li>
<li>service()处理浏览器请求阶段</li>
<li>destroy()终止阶段</li>
</ol>
<h3 id="初始化阶段"><a href="#初始化阶段" class="headerlink" title="初始化阶段"></a>初始化阶段</h3><p>Servlet 容器(比如: Tomcat)加载 Servlet，加载完成后，Servlet 容器会创建一个 Servlet 实例并调用 init()方法，init()方法只会调用一次, Servlet 容器在下面的情况装载 Servlet：</p>
<ol>
<li>Servlet 容器(Tomcat)启动时自动装载某些 servlet，实现这个需要在 web.xml 文件中添加<br><load-on-startup>1</load-on-startup> 1 表示装载的顺序</li>
<li>在 Servlet 容器启动后，浏览器首次向 Servlet 发送请求(这个前面说过)</li>
<li>Servlet 重新装载时(比如 tomcat 进行 redeploy【redeploy 会销毁所有的 Servlet 实例】)，<br>浏览器再向 Servlet 发送请求的第 1 次</li>
</ol>
<h3 id="处理浏览器请求阶段-service-方法"><a href="#处理浏览器请求阶段-service-方法" class="headerlink" title="处理浏览器请求阶段(service 方法)"></a>处理浏览器请求阶段(service 方法)</h3><ol>
<li>每收到一个 http 请求，服务器就会产生一个新的线程去处理[线程]</li>
<li>创建一个用于封装 HTTP 请求消息的 ServletRequest 对象和一个代表 HTTP 响应消息的<br>ServletResponse 对象</li>
<li>然后调用 Servlet 的 service()方法并将请求和响应对象作为参数传递进去</li>
</ol>
<h3 id="终止阶段-destory-方法-体现-Servlet-完整的生命周期"><a href="#终止阶段-destory-方法-体现-Servlet-完整的生命周期" class="headerlink" title="终止阶段 destory 方法(体现 Servlet 完整的生命周期)"></a>终止阶段 destory 方法(体现 Servlet 完整的生命周期)</h3><p>当 web 应用被终止，或者 Servlet 容器终止运行，或者 Servlet 类重新装载时，会调用destroy()<br>方法</p>
<h2 id="HttpServlet"><a href="#HttpServlet" class="headerlink" title="HttpServlet"></a>HttpServlet</h2><p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220219173331414.png" alt="image-20220219173331414"></p>
<h2 id="Servlet注意事项和细节"><a href="#Servlet注意事项和细节" class="headerlink" title="Servlet注意事项和细节"></a>Servlet注意事项和细节</h2><ol>
<li>Servlet 是一个供其他 Java 程序（Servlet 引擎）调用的 Java 类，不能独立运行。</li>
<li>针对浏览器的多次 Servlet 请求，通常情况下，服务器只会创建一个 Servlet 实例对象，<br>也就是说 Servlet 实例对象一旦创建，它就会驻留在内存中，为后续的其它请求服务，直至<br>web 容器退出&#x2F;或者 redeploy 该 web 应用，servlet 实例对象才会销毁。</li>
</ol>
<p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220219213907606.png" alt="image-20220219213907606"></p>
<ol start="3">
<li><p>在 Servlet 的整个生命周期内，init 方法只被调用一次。而对每次请求都导致 Servlet 引<br>擎调用一次 servlet 的 service 方法。</p>
</li>
<li><p>对于每次访问请求，Servlet 引擎都会创建一个新的 HttpServletRequest 请求对象和一个<br>新的 HttpServletResponse 响应对象，然后将这两个对象作为参数传递给它调用的 Servlet<br>的 service()方法，service 方法再根据请求方式分别调用 doXXX 方法。</p>
</li>
<li><p>如果在<servlet>元素中配置了一个<load-on-startup>元素，那么 WEB 应用程序在启动时，<br>就会装载并创建 Servlet 的实例对象、以及调用 Servlet 实例对象的 init()方法。</p>
</li>
</ol>
<h2 id="Servlet注解方式"><a href="#Servlet注解方式" class="headerlink" title="Servlet注解方式"></a>Servlet注解方式</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.servlet.annotation;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> LiAng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@time</span> 2022/2/21 8:25</span></span><br><span class="line"><span class="comment"> * 注解方式来配置</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 1. <span class="doctag">@WebServlet</span> 是一个注解</span></span><br><span class="line"><span class="comment"> * 2. <span class="doctag">@WebServlet</span> 源码</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Target</span>(&#123;ElementType.TYPE&#125;)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Retention</span>(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Documented</span> =&gt; 在javadoc工具生成文档有记录</span></span><br><span class="line"><span class="comment"> * public <span class="doctag">@interface</span> WebServlet &#123;</span></span><br><span class="line"><span class="comment"> *     String name() default &quot;&quot;;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *     String[] value() default &#123;&#125;;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *     String[] urlPatterns() default &#123;&#125;;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *     int loadOnStartup() default -1;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *     WebInitParam[] initParams() default &#123;&#125;;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *     boolean asyncSupported() default false;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *     String smallIcon() default &quot;&quot;;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *     String largeIcon() default &quot;&quot;;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *     String description() default &quot;&quot;;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *     String displayName() default &quot;&quot;;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> * 3. urlPatterns 对应web.xml 的 &lt;url-pattern&gt;&lt;/url-pattern&gt;</span></span><br><span class="line"><span class="comment"> * 4. &#123;&quot;/ok1&quot;, &quot;/ok2&quot;&#125; 可以给OkServlet配置多个 url-pattern</span></span><br><span class="line"><span class="comment"> * 5. 相当于 <span class="doctag">@WebServlet</span>(urlPatterns = &#123;&quot;/ok1&quot;, &quot;/ok2&quot;&#125;) 代替了web.xml的配置</span></span><br><span class="line"><span class="comment"> *    底层使用了 反射+注解+IO+集合 来完成一个支撑</span></span><br><span class="line"><span class="comment"> * 6. 浏览器可以这样访问OkServlet时，http://localhost:8080/servlet/ok1</span></span><br><span class="line"><span class="comment"> *    或 http://localhost:8080/servlet/ok2</span></span><br><span class="line"><span class="comment"> * 7.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet(urlPatterns = &#123;&quot;/ok1&quot;, &quot;/ok2&quot;&#125;, loadOnStartup = 1)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OkServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;注解 init()&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;注解 doPost()&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;注解 doGet()&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="Servlet-urlPattern-配置"><a href="#Servlet-urlPattern-配置" class="headerlink" title="Servlet urlPattern 配置"></a>Servlet urlPattern 配置</h2><h3 id="1-精确匹配"><a href="#1-精确匹配" class="headerlink" title="1.精确匹配"></a>1.精确匹配</h3><p>配置路径 : @WebServlet(“&#x2F;ok&#x2F;zs”)</p>
<p>访问 servlet: localhost:8080&#x2F;servlet&#x2F;ok&#x2F;zs</p>
<h3 id="2-目录匹配"><a href="#2-目录匹配" class="headerlink" title="2.目录匹配"></a>2.目录匹配</h3><p>配置路径 : @WebServlet(“&#x2F;ok&#x2F;*”)</p>
<p>访问文件: localhost:8080&#x2F;servlet&#x2F;ok&#x2F;aaa localhost:8080&#x2F;servlet&#x2F;ok&#x2F;bbb</p>
<h3 id="3-扩展名匹配"><a href="#3-扩展名匹配" class="headerlink" title="3.扩展名匹配"></a>3.扩展名匹配</h3><p>配置路径 : @WebServlet(“**.action”)*</p>
<p>访问文件: localhost:8080&#x2F;hsp&#x2F;zs.action localhost:8080&#x2F;hsp&#x2F;ls.action</p>
<p>提示: @WebServlet(“&#x2F;*.action”) , 不能带 &#x2F; , 否则 tomcat 报错</p>
<h3 id="4-任意匹配"><a href="#4-任意匹配" class="headerlink" title="4.任意匹配"></a>4.任意匹配</h3><p>配置路径 : @WebServlet(“&#x2F;“) @WebServlet(“&#x2F;*”)</p>
<p>访问文件: localhost:8080&#x2F;hsp&#x2F;aaa localhost:8080&#x2F;hsp&#x2F;bbb localhost:8080&#x2F;hsp&#x2F;ccc</p>
<p>提示：&#x2F; 和 &#x2F;*的配置，会匹配所有的请求，这个比较麻烦，要避免</p>
<h3 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h3><p>1、当 Servlet 配置了 “&#x2F;“, 会覆盖 tomcat 的 DefaultServlet, 当其他的 utl-pattern 都匹配不上时，都会走这个Servlet，这样可以拦截到其他静态资源。</p>
<p>2、当 Servelt 配置了 “&#x2F;*”, 表示可以匹配任意访问路径</p>
<p>3、提示: 建议不要使用 &#x2F; 和 &#x2F;*， 建议尽量使用精确匹配</p>
<p>4、优先级遵守: 精确路径 &gt; 目录路径 &gt; 扩展名路径 &gt; &#x2F;* &gt; &#x2F;</p>
<h2 id="ServletConfig"><a href="#ServletConfig" class="headerlink" title="ServletConfig"></a>ServletConfig</h2><h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><p>1.ServletConfig 类是为 Servlet 程序的配置信息的类</p>
<p>2.Servlet 程序和 ServletConfig 对象都是由 Tomcat 负责创建</p>
<p>3.Servlet 程序默认是第 1 次访问的时候创建，ServletConfig 在 Servlet 程序创建时，就创建一个对应的 ServletConfig对象</p>
<h3 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h3><p>1.获取 Servlet 程序的 servlet-name 的值</p>
<p>2.获取初始化参数 init-param</p>
<p>3.获取 ServletContext 对象</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>DBServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.lzw.servlet.DBServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--配置信息，而不是硬编码到程序--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>username<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>root<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>pwd<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>123456<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>DBServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/db<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletConfig;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DBServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 1. 当DBServlet对象初始化时，tomcat会同时创建一个 ServletConfig对象</span></span><br><span class="line"><span class="comment">     * 2. 这是如果DBServlet init() 方法中你调用 super.init(config);</span></span><br><span class="line"><span class="comment">     * 3. 调用父类</span></span><br><span class="line"><span class="comment">     * public void init(ServletConfig config) throws ServletException &#123;</span></span><br><span class="line"><span class="comment">     *         this.config = config;</span></span><br><span class="line"><span class="comment">     *         this.init();</span></span><br><span class="line"><span class="comment">     *     &#125;</span></span><br><span class="line"><span class="comment">     *     这时就会把 Tomcat创建的ServletConfig对象赋给GenericServlet的属性 config</span></span><br><span class="line"><span class="comment">     * 4. 因此如果你重写init()方法，如果你想在其他方法通过 getServletConfig() 获取ServletConfig</span></span><br><span class="line"><span class="comment">     * 有一定记住，要调用 super.init(config);</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> config</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> ServletException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(ServletConfig config)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;init&quot;</span> + config);</span><br><span class="line">        <span class="built_in">super</span>.init(config);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//在 DBServlet 执行 doGet()/doPost() 时，可以获取到 web.xml 配置的用户名和密码</span></span><br><span class="line">        <span class="comment">//DBServlet的父类GenericServlet有getServletConfig()</span></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 1. getServletConfig() 方法是 GenericServlet</span></span><br><span class="line"><span class="comment">         * 2. 返回的 servletConfig 对象是 private transient ServletConfig config</span></span><br><span class="line"><span class="comment">         * 3. 当一个属性被 transient 修饰，表示该属性不会被串行化(有些重要信息，不希望保存到文件)</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">ServletConfig</span> <span class="variable">servletConfig</span> <span class="operator">=</span> getServletConfig();</span><br><span class="line">        System.out.println(servletConfig);</span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> servletConfig.getInitParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">pwd</span> <span class="operator">=</span> servletConfig.getInitParameter(<span class="string">&quot;pwd&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;初始化参数username = &quot;</span>  + username);</span><br><span class="line">        System.out.println(<span class="string">&quot;初始化参数pwd = &quot;</span>  + pwd);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="ServletContext"><a href="#ServletContext" class="headerlink" title="ServletContext"></a>ServletContext</h2><h3 id="介绍-1"><a href="#介绍-1" class="headerlink" title="介绍"></a>介绍</h3><p>1.ServletContext 是一个接口，它表示 Servlet 上下文对象</p>
<p>2.一个 web 工程，只有一个 ServletContext 对象实例</p>
<p>3.ServletContext 对象 是在 web 工程启动的时候创建，在 web 工程停止的时候销毁</p>
<p>4.ServletContext 对象可以通过 ServletConfig.getServletContext 方法获得对 ServletContext对象的引用，也可以通过 this.getServletContext()来获得其对象的引用。</p>
<p>5.由于一个 WEB 应用中的所有 Servlet 共享同一个 ServletContext 对象，因此 Servlet 对象之间可以通过 ServletContext对象来实现多个 Servlet 间通讯。ServletContext 对象通常也被称之为域对象。</p>
<p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220224092941224.png" alt="image-20220224092941224"></p>
<h3 id="作用-1"><a href="#作用-1" class="headerlink" title="作用"></a>作用</h3><p>1.获取 web.xml 中配置的上下文参数 context-param [信息和整个 web 应用相关，而不是属于某个 Servlet]</p>
<p>2.获取当前的工程路径，格式: &#x2F;工程路径 &#x3D;》 比如 &#x2F;servlet</p>
<p>3.获 取 工 程 部 署 后 在 服 务 器 硬 盘 上 的 绝 对 路 径 ( 比如：D:\lzw_javaweb\servlet\out\artifacts\servlet_war_exploded）</p>
<p>4.像 Map 一样存取数据, 多个 Servlet 共享数据</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ServletContext_<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.lzw.servlet.servletcontext.ServletContext_<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ServletContext_<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/servletContext_<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配置整个网站的信息--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>website<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>http://www.lzw.net<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>company<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>巴拉巴拉<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.servlet.servletcontext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContext;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletContext_</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//获取web.xml的context-parameter</span></span><br><span class="line">        <span class="comment">//1.获取到ServletContext对象</span></span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> getServletContext();</span><br><span class="line">        <span class="comment">//2.获取website</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">website</span> <span class="operator">=</span> servletContext.getInitParameter(<span class="string">&quot;website&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">company</span> <span class="operator">=</span> servletContext.getInitParameter(<span class="string">&quot;company&quot;</span>);</span><br><span class="line">        <span class="comment">//3.获取项目的工程路径</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">contextPath</span> <span class="operator">=</span> servletContext.getContextPath();</span><br><span class="line">        <span class="comment">//4.获取项目发布后 真正的工作路径</span></span><br><span class="line">        <span class="comment">// &quot;/&quot; 表示我们的项目(发布后)的根路径 E:\VIP\JavaWeb\Demo\servlet\out\artifacts\servlet_war_exploded</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">realPath</span> <span class="operator">=</span> servletContext.getRealPath(<span class="string">&quot;/&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;项目发布后的绝对路径 = &quot;</span> + realPath);</span><br><span class="line">        System.out.println(<span class="string">&quot;项目路径 = &quot;</span> + contextPath);</span><br><span class="line">        System.out.println(<span class="string">&quot;website = &quot;</span> + website);</span><br><span class="line">        System.out.println(<span class="string">&quot;company = &quot;</span> + company);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<hr>


<h1 id="HttpServletRequest-Servlet"><a href="#HttpServletRequest-Servlet" class="headerlink" title="HttpServletRequest(Servlet)"></a>HttpServletRequest(Servlet)</h1><h2 id="介绍-2"><a href="#介绍-2" class="headerlink" title="介绍"></a>介绍</h2><ol>
<li>HttpServletRequest 对象代表客户端的请求</li>
<li>当客户端&#x2F;浏览器通过 HTTP 协议访问服务器时，HTTP 请求头中的所有信息都封装在这个对象中</li>
<li>通过这个对象的方法，可以获得客户端信息。</li>
</ol>
<h2 id="常用方法"><a href="#常用方法" class="headerlink" title="常用方法"></a>常用方法</h2><p>1.getRequestURI() 获取请求的资源路径 <a target="_blank" rel="noopener" href="http://localhost:8080/servlet/loginServlet">http://localhost:8080/servlet/loginServlet</a></p>
<p>2.getRequestURL() 获取请求的统一资源定位符（绝对路径）<a target="_blank" rel="noopener" href="http://localhost:8080/servlet/loginServlet">http://localhost:8080/servlet/loginServlet</a></p>
<p>3.getRemoteHost() 获取客户端的 主机, getRemoteAddr()</p>
<p>4.getHeader() 获取请求头</p>
<p>5.getParameter() 获取请求的参数</p>
<p>6.getParameterValues() 获取请求的参数（多个值的时候使用） , 比如 checkbox, 返回的是数组</p>
<p>7.getMethod() 获取请求的方式 GET 或 POST</p>
<p>8.setAttribute(key, value); 设置域数据</p>
<p>9.getAttribute(key); 获取域数据</p>
<p>10.getRequestDispatcher() 获取请求转发对象, 请求转发的核心对象</p>
<h2 id="应用实例"><a href="#应用实例" class="headerlink" title="应用实例"></a>应用实例</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>注册<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>注册用户<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;http://localhost:8080/servlet/requestMethods&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    u:　<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    p:　<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;pwd&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    选择你喜欢的老师:</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;lls&quot;</span>&gt;</span>罗老师</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;lx&quot;</span>&gt;</span>罗翔</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;cls&quot;</span>&gt;</span>苍老师<span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;注册用户&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.servlet.request;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HttpServletRequestMethods</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//使用request对象，获取表单提交的各种数据</span></span><br><span class="line">        System.out.println(<span class="string">&quot;HttpServletRequestMethods doPost() 被调用&quot;</span>);</span><br><span class="line">        <span class="comment">/***********************************</span></span><br><span class="line"><span class="comment">         *  获取和http请求头相关信息</span></span><br><span class="line"><span class="comment">         ***********************************/</span></span><br><span class="line">        System.out.println(<span class="string">&quot;请求的资源路径URI= &quot;</span> + request.getRequestURI());</span><br><span class="line">        <span class="comment">//http://主机/uri</span></span><br><span class="line">        System.out.println(<span class="string">&quot;请求的统一资源定位符（绝对路径）URL= &quot;</span> + request.getRequestURL());</span><br><span class="line">        System.out.println(<span class="string">&quot;请求的客户端ip 地址= &quot;</span> + request.getRemoteAddr());<span class="comment">//本地就是127.0.0.1</span></span><br><span class="line">        <span class="comment">//思考题：如发现某个ip 在10s中，访问的次数超过 100次，就封ip</span></span><br><span class="line">        <span class="comment">//实现思路： 1用一个集合concurrentHashmap[ip:访问次数] 2[线程/定时扫描] 3 做成处理</span></span><br><span class="line">        <span class="comment">// 获取http请求头的信息，可以指定其他，比如 User-Agent , Host等待</span></span><br><span class="line">        System.out.println(<span class="string">&quot;http请求头HOST= &quot;</span> + request.getHeader(<span class="string">&quot;Host&quot;</span>));</span><br><span class="line">        <span class="comment">// 说明，如果我们希望得到请求的头的相关信息，可以使用request.getHeader(&quot;请求头字段&quot;)</span></span><br><span class="line">        System.out.println(<span class="string">&quot;请求的发起地址是=&quot;</span> + request.getHeader(<span class="string">&quot;Referer&quot;</span>));</span><br><span class="line">        <span class="comment">// 请获取访问网站的浏览器是什么？</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">userAgent</span> <span class="operator">=</span> request.getHeader(<span class="string">&quot;User-Agent&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;User-Agent= &quot;</span> + userAgent);</span><br><span class="line">        <span class="comment">// 取出 Chrome, 取出最后</span></span><br><span class="line">        String[] s = userAgent.split(<span class="string">&quot; &quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;浏览器 = &quot;</span> + s[s.length-<span class="number">1</span>].split(<span class="string">&quot;\\/&quot;</span>)[<span class="number">0</span>]);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取Cookie</span></span><br><span class="line">        <span class="comment">//JSESSIONID</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">cookie</span> <span class="operator">=</span> request.getHeader(<span class="string">&quot;Cookie&quot;</span>);</span><br><span class="line">        String cs[] = cookie.split(<span class="string">&quot;=&quot;</span>);</span><br><span class="line">        <span class="type">char</span>[] chars = cs[<span class="number">1</span>].toCharArray();</span><br><span class="line"></span><br><span class="line">        System.out.print(<span class="string">&quot;取出JSESSIONID: &quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(chars[i] == (<span class="number">59</span>))&#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.print(chars[i]);</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 主要是Get / Post</span></span><br><span class="line">        System.out.println(<span class="string">&quot;http请求方式~= &quot;</span> + request.getMethod());</span><br><span class="line"></span><br><span class="line">        <span class="comment">/***********************************</span></span><br><span class="line"><span class="comment">         *  获取和请求参数相关信息, 注意要求在返回数据前，获取参数</span></span><br><span class="line"><span class="comment">         ***********************************/</span></span><br><span class="line">        <span class="comment">//解决接收参数的中文乱码问题, 老师提示，写在 getParameter前.</span></span><br><span class="line">        request.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//1. 获取表单的数据[单个数据]</span></span><br><span class="line">        <span class="comment">//username=tom&amp;pwd=&amp;hobby=hsp&amp;hobby=spls</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">pwd</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;pwd&quot;</span>);</span><br><span class="line">        <span class="comment">//2. 获取表单一组数据</span></span><br><span class="line">        String[] hobbies = request.getParameterValues(<span class="string">&quot;hobby&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;username = &quot;</span> + username);</span><br><span class="line">        System.out.println(<span class="string">&quot;pwd = &quot;</span> + pwd);</span><br><span class="line">        <span class="keyword">for</span> (String hobby : hobbies) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;hobby = &quot;</span> + hobby);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//返回接收到的信息，给浏览器回显</span></span><br><span class="line">        <span class="comment">//本质就是在http响应头，加上 Content-Type: text/html;charset=utf-8</span></span><br><span class="line">        <span class="comment">//说 text/html 表示返回的数据类型，浏览器会根据这个类型来解析数据</span></span><br><span class="line">        <span class="comment">// text/plain 表示返回的数据，请浏览器使用文本方式解析</span></span><br><span class="line">        <span class="comment">// application/x-tar 表示返回的是文件，浏览器就会以下载文件的方式处理</span></span><br><span class="line">        response.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">writer</span> <span class="operator">=</span> response.getWriter();</span><br><span class="line">        writer.print(<span class="string">&quot;提交的用户名 = &quot;</span> +  username);</span><br><span class="line">        writer.flush();</span><br><span class="line">        writer.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="注意事项和细节"><a href="#注意事项和细节" class="headerlink" title="注意事项和细节"></a>注意事项和细节</h2><p>1.获取 doPost 参数中文乱码解决方案 , 注意 setCharacterEncoding(“utf-8”) 要写在request.getParameter()前</p>
<p>2.注意：如果通过 PrintWriter writer, 有返回数据给浏览器，建议将获取参数代码写在writer.print() 之前，否则可能获取不到参数值(doPost)</p>
<p>3.处理 http 响应数据中文乱码问题</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//本质就是在http响应头，加上 Content-Type: text/html;charset=utf-8</span></span><br><span class="line">response.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br></pre></td></tr></table></figure>

<h2 id="请求转发"><a href="#请求转发" class="headerlink" title="请求转发"></a>请求转发</h2><h3 id="为什么需要"><a href="#为什么需要" class="headerlink" title="为什么需要"></a>为什么需要</h3><p>实际开发中，往往业务比较复杂，需要在一次请求中，使用到多个 Servlet 完成一个任务(Servlet 链, 流水作业) 如图</p>
<p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220301091705216.png" alt="image-20220301091705216"></p>
<h3 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h3><ol>
<li>实现请求转发：请求转发指一个 web 资源收到客户端请求后，通知服务器去调用另外一个 web 资源进行处理</li>
<li>HttpServletRequest 对象(也叫 Request 对象)提供了一个 getRequestDispatcher 方法，该方法返回一个 RequestDispatcher 对象，调用这个对象的 forward 方法可以实现请求转发</li>
<li>request 对象同时也是一个域对象，开发人员通过 request 对象在实现转发时，把数据通过 request 对象带给其它 web 资源处理</li>
</ol>
<h3 id="实现请求转发"><a href="#实现请求转发" class="headerlink" title="实现请求转发"></a>实现请求转发</h3><p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220301091852148.png" alt="image-20220301091852148"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;http://localhost:8080/servlet/checkServlet&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    u: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;登录&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.servlet.request;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.RequestDispatcher;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CheckServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;CheckServlet 被调用&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//根据用户名来确定该用户是什么身份</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        <span class="comment">//注意如果是同一个request对象，那么可以在不同的servlet中，是 getParameter</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;tom&quot;</span>.equals(username))&#123;</span><br><span class="line">            <span class="comment">//分配</span></span><br><span class="line">            request.setAttribute(<span class="string">&quot;role&quot;</span>, <span class="string">&quot;管理员&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            request.setAttribute(<span class="string">&quot;role&quot;</span>, <span class="string">&quot;普通用户&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取分发器</span></span><br><span class="line">        <span class="comment">// 1. /managerServlet 写的是要转发的servlet的url</span></span><br><span class="line">        <span class="comment">// 2. / 会被解析成 /servlet</span></span><br><span class="line">      <span class="comment">// 3. forward(request, response) 表示把当前servlet的request对象和response对象，传递给下一个servlet使用</span></span><br><span class="line">        <span class="type">RequestDispatcher</span> <span class="variable">requestDispatcher</span> <span class="operator">=</span> request.getRequestDispatcher(<span class="string">&quot;/managerServlet&quot;</span>);</span><br><span class="line">        requestDispatcher.forward(request, response);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.servlet.request;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ManagerServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ManagerServlet 被调用&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">role</span> <span class="operator">=</span> (String)request.getAttribute(<span class="string">&quot;role&quot;</span>);</span><br><span class="line">        <span class="comment">//输出信息</span></span><br><span class="line">        response.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">writer</span> <span class="operator">=</span> response.getWriter();</span><br><span class="line">        writer.print(<span class="string">&quot;用户名：&quot;</span> + username + <span class="string">&quot;&lt;br/&gt;&quot;</span>);</span><br><span class="line">        writer.print(<span class="string">&quot;角色：&quot;</span> + role);</span><br><span class="line">        writer.flush();</span><br><span class="line">        writer.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><ol>
<li><p>浏览器地址不会变化(地址会保留在第 1 个 servlet 的 url)</p>
</li>
<li><p>在同一次 HTTP 请求中，进行多次转发，仍然是一次 HTTP 请求</p>
</li>
<li><p>在同一次 HTTP 请求中，进行多次转发，多个 Servlet 可以共享 request 域&#x2F;对象的数据(因为始终是同一个 request 对象)</p>
</li>
<li><p>可以转发到 WEB-INF 目录下</p>
</li>
<li><p>不能访问当前 WEB 工程外的资源</p>
</li>
<li><p>因为浏览器地址栏会停止在第一个 servlet ,如果你刷新页面，会再次发出请求(并且会带数据), 所以在支付页面情况下，不要使用请求转发，否则会造成重复支付</p>
</li>
</ol>
<hr>


<h1 id="HttpServletResponse-Servlet"><a href="#HttpServletResponse-Servlet" class="headerlink" title="HttpServletResponse(Servlet)"></a>HttpServletResponse(Servlet)</h1><h2 id="介绍-3"><a href="#介绍-3" class="headerlink" title="介绍"></a>介绍</h2><ol>
<li>每次 HTTP 请求，Tomcat 会创建一个 HttpServletResponse 对象传递给 Servlet 程序去使用。</li>
<li>HttpServletRequest 表示请求过来的信息，HttpServletResponse 表示所有响应的信息，如果需要设置返回给客户端的信息，通过 HttpServletResponse 对象来进行设置即可。</li>
</ol>
<h2 id="向客户端返回数据方法"><a href="#向客户端返回数据方法" class="headerlink" title="向客户端返回数据方法"></a>向客户端返回数据方法</h2><p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220301195412155.png" alt="image-20220301195412155"></p>
<ol>
<li>字节流 getOutputStream(); 常用于下载（处理二进制数据）</li>
<li>字符流 getWriter(); 常用于回传字符串</li>
<li>(细节：)两个流同时只能使用一个。 使用了字节流，就不能再使用字符流，反之亦然，否则就会报错</li>
</ol>
<h2 id="向客户端返回数据实例"><a href="#向客户端返回数据实例" class="headerlink" title="向客户端返回数据实例"></a>向客户端返回数据实例</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResponseServlet_</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException,IOException &#123;</span><br><span class="line">        <span class="comment">/*  :</span></span><br><span class="line"><span class="comment">        1. setContentType 会设置服务器和客户端都用 utf-8 字符集，还设置了响应头</span></span><br><span class="line"><span class="comment">        2. setContentType 要在获取流对象(getWriter)之前调用才有效</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        response.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">writer</span> <span class="operator">=</span> response.getWriter();</span><br><span class="line">        writer.println(<span class="string">&quot;&lt;h1&gt;hello, world~&lt;/h1&gt;&quot;</span>);</span><br><span class="line">        writer.println(<span class="string">&quot;&lt;h1&gt;hi, LiAng&lt;/h1&gt;&quot;</span>);</span><br><span class="line">        writer.flush();</span><br><span class="line">        writer.close();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="注意事项和细节-1"><a href="#注意事项和细节-1" class="headerlink" title="注意事项和细节"></a>注意事项和细节</h2><p>1.处理中文乱码问题-方案1</p>
<p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220301203616954.png" alt="image-20220301203616954"></p>
<p>2.处理中文乱码问题-方案2</p>
<p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220301203628158.png" alt="image-20220301203628158"></p>
<h2 id="请求重定向"><a href="#请求重定向" class="headerlink" title="请求重定向"></a>请求重定向</h2><h3 id="介绍-4"><a href="#介绍-4" class="headerlink" title="介绍"></a>介绍</h3><ol>
<li>请求重定向指：一个 web 资源收到客户端请求后，通知客户端去访问另外一个 web资源，这称之为请求重定向</li>
<li>请求重定向原理示意图<img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220301203730411.png" alt="image-20220301203730411"></li>
</ol>
<h3 id="应用实例-1"><a href="#应用实例-1" class="headerlink" title="应用实例"></a>应用实例</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.servlet.response;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DownServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//完成了自己的业务</span></span><br><span class="line">        <span class="comment">//发出请求重定向 -&gt;</span></span><br><span class="line">        <span class="comment">//1. sendRedirect 本质就会 返回 302状态码 Location; /servlet/downServletNew</span></span><br><span class="line">        <span class="comment">//2. 因此 302 和 /servlet/downServletNew 是浏览器解析，而不是服务器</span></span><br><span class="line">        <span class="comment">//3. 浏览器在解析 /servlet/downServletNew =&gt; http://localhost:8080/servlet/downServletNew</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">contextPath</span> <span class="operator">=</span> getServletContext().getContextPath();</span><br><span class="line">        System.out.println(<span class="string">&quot;contextPath = &quot;</span> + contextPath);</span><br><span class="line"><span class="comment">//        response.sendRedirect(&quot;/servlet/downServletNew&quot;);</span></span><br><span class="line">        response.sendRedirect(contextPath + <span class="string">&quot;/downServletNew&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//第二种重定向的写法</span></span><br><span class="line"><span class="comment">//        response.setStatus(302); //设置http响应的状态码</span></span><br><span class="line"><span class="comment">//        //设置http响应的Location ：/servlet/downServletNew</span></span><br><span class="line"><span class="comment">//        response.setHeader(&quot;Location&quot;, &quot;/servlet/downServletNew&quot;);</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.servlet.response;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DownServletNew</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;DownServletNew 被调用&quot;</span>);</span><br><span class="line">        response.setContentType(<span class="string">&quot;application/x-tar;charset=utf-8&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">writer</span> <span class="operator">=</span> response.getWriter();</span><br><span class="line">        writer.print(<span class="string">&quot;ok&quot;</span>);</span><br><span class="line">        writer.flush();</span><br><span class="line">        writer.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="注意事项-1"><a href="#注意事项-1" class="headerlink" title="注意事项"></a>注意事项</h3><ol>
<li>最佳应用场景：网站迁移，比如原域名是 <a target="_blank" rel="noopener" href="http://www.hsp.com/">www.hsp.com</a> 迁移到 <a target="_blank" rel="noopener" href="http://www.hsp.cn/">www.hsp.cn</a> ，但是百度抓取的还是原来网址. </li>
<li>浏览器地址会发生变化，本质是两次 http 请求. </li>
<li>不能共享 Request 域中的数据，本质是两次 http 请求，会生成两个 HttpServletRequest对象</li>
<li>不能重定向到 &#x2F;WEB-INF 下的资源</li>
<li>可以重定向到 Web 工程以外的资源， 比如 到 <a target="_blank" rel="noopener" href="http://www.baidu.com/">www.baidu.com</a> 【在前面的案例演示】</li>
<li>重定向有两种方式, 推荐使用前者</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//第一种</span></span><br><span class="line">response.sendRedirect(<span class="string">&quot;/servlet/downServletNew&quot;</span>);</span><br><span class="line"><span class="comment">//第二种</span></span><br><span class="line">response.setStatus(<span class="number">302</span>); <span class="comment">//设置http响应的状态码</span></span><br><span class="line">response.setHeader(<span class="string">&quot;Location&quot;</span>, <span class="string">&quot;/servlet/downServletNew&quot;</span>);</span><br></pre></td></tr></table></figure>

<ol start="7">
<li>动态获取到 application context</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">contextPath</span> <span class="operator">=</span> getServletContext().getContextPath();</span><br><span class="line">      System.out.println(<span class="string">&quot;contextPath = &quot;</span> + contextPath);</span><br><span class="line">      response.sendRedirect(contextPath + <span class="string">&quot;/downServletNew&quot;</span>);</span><br></pre></td></tr></table></figure>

<hr>


<h1 id="HTTP协议"><a href="#HTTP协议" class="headerlink" title="HTTP协议"></a>HTTP协议</h1><h2 id="介绍-5"><a href="#介绍-5" class="headerlink" title="介绍"></a>介绍</h2><ol>
<li><p>超文本传输协议(HTTP，HyperText Transfer Protocol)是互联网上应用广泛的一种网络协议。是工作在 tcp&#x2F;ip 协议基础上的,所有的 WWW 文件都遵守这个标准。</p>
</li>
<li><p>http1.0 短连接 http1.1 长连接</p>
</li>
<li><p>http 是 TCP&#x2F;IP 协议的一个应用层协议,http 也是我们 web 开发的基础</p>
</li>
</ol>
<h2 id="GET请求"><a href="#GET请求" class="headerlink" title="GET请求"></a>GET请求</h2><p>1.form标签method&#x3D;get；2.a标签；3.link标签引入css；4.script标签引入js文件；5.img标签引入图片；</p>
<p>6.iframe引入html页面；7.在浏览器地址栏中输入地址后敲回车</p>
<p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220223211412046.png"></p>
<p>&#x3D;&#x3D;Get与Post传输数据大小的区别&#x3D;&#x3D;</p>
<p>1.get传送的数据量较小。不能大于2kb（不同浏览器不一样）</p>
<p>2.post传送的数据量较大。一般默认不受限制。</p>
<h2 id="POST请求"><a href="#POST请求" class="headerlink" title="POST请求"></a>POST请求</h2><p>1.form标签method&#x3D;post；</p>
<p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220223211519127.png" alt="image-20220223211519127"></p>
<p>建议：(1)GET方式的安全性较POST方式要差。包括机密信息的话。建议用POST数据提交方式；</p>
<p>(2)数据查询时，建议用GET。数据加入、改动或删除时，建议用POST方式。</p>
<h2 id="HTTP响应包"><a href="#HTTP响应包" class="headerlink" title="HTTP响应包"></a>HTTP响应包</h2><p>由响应行、响应头、响应体三部分组成。</p>
<p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220223212341065.png" alt="image-20220223212341065"></p>
<hr>

<h1 id="WEB工程路径"><a href="#WEB工程路径" class="headerlink" title="WEB工程路径"></a>WEB工程路径</h1><h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><h3 id="创建-index-html"><a href="#创建-index-html" class="headerlink" title="创建 index.html"></a>创建 index.html</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>base 标签<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>注册用户~~<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    1. 可以看到，我们原来的访问一个web资源的路径非常的麻烦</span></span><br><span class="line"><span class="comment">    2. 目前我们访问的是 ok的资源</span></span><br><span class="line"><span class="comment">    3. 我们可以使用相对路径来解决</span></span><br><span class="line"><span class="comment">    4. http://localhost:8080/webpath/ok =&gt; ok</span></span><br><span class="line"><span class="comment">    5. 如果你action=&quot;ok&quot; 等价 http://localhost:8080/webpath/ok</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;http://localhost:8080/webpath/ok&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    u:　<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;注册用户&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>讨论区~<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;http://localhost:8080/webpath/ok&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    讨论内容:　<span class="tag">&lt;<span class="name">textarea</span> <span class="attr">cols</span>=<span class="string">&quot;50&quot;</span> <span class="attr">rows</span>=<span class="string">&quot;5&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;发布讨论&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>回复区~<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;http://localhost:8080/webpath/ok&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    回复内容:　<span class="tag">&lt;<span class="name">textarea</span> <span class="attr">cols</span>=<span class="string">&quot;50&quot;</span> <span class="attr">rows</span>=<span class="string">&quot;5&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;回复&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><h3 id="相对路径"><a href="#相对路径" class="headerlink" title="相对路径"></a>相对路径</h3><p>​		使用相对路径来解决， 一个非常重要的规则：页面所有的相对路径，在默认情 况下，都会参考当前浏览器地址栏的路径 <code>http://ip:port/工程名/</code> + 资源来进行跳转。所以我们可以这样写：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;ok&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220625090140553.png" alt="image-20220625090140553"></p>
<h3 id="base标签"><a href="#base标签" class="headerlink" title="base标签"></a>base标签</h3><h4 id="基本介绍"><a href="#基本介绍" class="headerlink" title="基本介绍"></a>基本介绍</h4><ol>
<li><p>base 标签是 HTML 语言中的基准网址标记，它是一个单标签，位于网页头部文件的 head 标签内。</p>
</li>
<li><p>一个页面最多只能使用一个 base 元素，用来提供一个指定的默认目标，是一种表达路径和连接网址的标记。</p>
</li>
<li><p>常见的 url 路径形式分别有相对路径与绝对路径，如果 base 标签指定了目标，浏览器 将通过这个目标来解析当前文档中的所有相对路径，包括的标签有（a、img、link、form）。</p>
</li>
<li><p>也就是说，浏览器解析时会在路径前加上 base 给的目标，而页面中的相对路径也都转 换成了绝对路径。使用了 base 标签就应带上 href 属性和 target 属性。</p>
</li>
</ol>
<h4 id="应用实例-2"><a href="#应用实例-2" class="headerlink" title="应用实例"></a>应用实例</h4><h5 id="创建-web-a-html"><a href="#创建-web-a-html" class="headerlink" title="创建 web\a.html"></a>创建 web\a.html</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>a.html<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>这是a.html~~~~~<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 相对路径</span></span><br><span class="line"><span class="comment">    1. href=&quot;d1/d2/b.html&quot; 等价于 http://localhost:8080/项目名/d1/d2/b.html</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;d1/d2/b.html&quot;</span>&gt;</span>跳转到/d1/d2/b.html<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">1. 在实际开发中，往往不是直接访问一个资源的而是在服务端进行转发或者重定向来访问资源</span></span><br><span class="line"><span class="comment">2. 演示转发定位 b.html</span></span><br><span class="line"><span class="comment">3. href=&quot;servlet03&quot; http://localhost:8080/webpath/servlet03</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;servlet03&quot;</span>&gt;</span>转发到/d1/d2/b.html<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="创建-web-d1-d2-b-html"><a href="#创建-web-d1-d2-b-html" class="headerlink" title="创建 web\d1\d2\b.html"></a>创建 web\d1\d2\b.html</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>b.html<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        1. 如果没有&lt;base href=&quot;http://localhost:8080/hspedu_servlet/&quot;&gt;</span></span><br><span class="line"><span class="comment">        2. 当点击 返回a.html 超链接，将会以当前浏览器的地址为路径来确定 路径</span></span><br><span class="line"><span class="comment">        3. 如果增加了&lt;base href=&quot;http://localhost:8080/hspedu_servlet/&quot;&gt;</span></span><br><span class="line"><span class="comment">        4. 将以 base 指定的href的地址为路径，来确定 超链接的路径</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;base href=&quot;http://localhost:10000/hspedu_servlet/&quot;&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--简写形式--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--使用base 标签搞定</span></span><br><span class="line"><span class="comment">    1. 下面写的 base href=&quot;http://localhost:8080/webpath/&quot;</span></span><br><span class="line"><span class="comment">    2. 表示的含义就是当前这个页面的访问所有资源都是以 http://localhost:8080/webpath/ 参照</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;base href=&quot;http://localhost:8080/webpath/&quot;&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--上面的写法可以简化一把--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        1. base 标签是哪个在解析? =&gt; 浏览器</span></span><br><span class="line"><span class="comment">        2. 浏览器在解析 第一个 /时候，会解析成 http://localhost:8080/</span></span><br><span class="line"><span class="comment">        3. 浏览器 href=&quot;/webpath/&quot; =解析=&gt; href=&quot;http://localhost:8080/webpath/&quot;</span></span><br><span class="line"><span class="comment">        4. 浏览器 &lt;a href=&quot;a.html&quot;&gt;返回a.html~&lt;/a&gt; , 参考 base =&gt; 最后</span></span><br><span class="line"><span class="comment">          href=&quot;http://localhost:8080/webpath/a.html&quot;</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">base</span> <span class="attr">href</span>=<span class="string">&quot;/webpath/&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>这是/d1/d2/b.html<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    1. 返回a.html =&gt; 使用前面的相对路径http://localhost:8080/webpath/d1/d2/</span></span><br><span class="line"><span class="comment">    2. ../../a.html =&gt; http://localhost:8080/webpath/a.html</span></span><br><span class="line"><span class="comment">    3. 相对路径会让这个项目相互调用的关系变得复杂</span></span><br><span class="line"><span class="comment">    4. 使用base 标签搞定</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--&lt;a href=&quot;../../a.html&quot;&gt;返回a.html~&lt;/a&gt;--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;a.html&quot;</span>&gt;</span>返回a.html~<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="创建-Serlvet03-java"><a href="#创建-Serlvet03-java" class="headerlink" title="创建 Serlvet03.java"></a>创建 Serlvet03.java</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> LiAng</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Servlet03</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//这里我们希望通过转发来定位b.html</span></span><br><span class="line">        <span class="comment">//1.在服务器端 解析第一个 / 时，会被解析成 http://ip:port/项目名</span></span><br><span class="line">        <span class="comment">//2. &quot;/d1/d2/b.html&quot; =&gt;  被解析成 http://ip:port/项目名/d1/d2/b.html</span></span><br><span class="line">        request.getRequestDispatcher(<span class="string">&quot;/d1/d2/b.html&quot;</span>).forward(request, response);</span><br><span class="line">        <span class="comment">//3. 在服务器进行转发时，没有/就按照默认的方式参考定位 http://ip:port/项目名</span></span><br><span class="line">        <span class="comment">//建议使用上面的</span></span><br><span class="line">        <span class="comment">//request.getRequestDispatcher(&quot;d1/d2/b.html&quot;).forward(request, response);</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="注意事项和细节-2"><a href="#注意事项和细节-2" class="headerlink" title="注意事项和细节"></a>注意事项和细节</h2><ol>
<li>Web 工程的相对路径和绝对路径</li>
</ol>
<p>​		（1）相对路径：<code>.</code>表示当前目录，<code>..</code>表示上一级目录，资源名 表示 当前目录&#x2F;资源名</p>
<p>​		（2）绝对路径：<a href="http://ip:port/工程路径/资源路径">http://ip:port/工程路径/资源路径</a></p>
<ol start="2">
<li><p>在实际开发中，路径都使用<strong>绝对路径</strong>，而不是相对路径。</p>
</li>
<li><p>在 web 中 &#x2F; 斜杠 如果被浏览器解析，得到的地址是：<code>http://ip[域名]:port/ </code> </p>
<p>比如: <code>&lt;a href=&quot;/&quot;&gt;斜杠&lt;/a&gt;</code></p>
</li>
<li><p>在 web 中 &#x2F; 斜杠 如果被服务器解析，得到的地址是：<code>http://ip[域名]:port/工程路径/</code>， 你也可以理解成 &#x2F;工程路径&#x2F; 下面的几种情况就是如此</p>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(1) &lt;url-pattern&gt;/servelturl&lt;/url-pattern&gt;</span><br><span class="line">(2) servletContext.getRealPath(&quot;/&quot;); ==&gt; 是得到执行路径/工作路径</span><br><span class="line">(3) request.getRequestDispatcher(&quot;/&quot;);</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>在 javaWeb 中 路径最后带 &#x2F; 和 不带 &#x2F; 含义不同，一定要小心</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=&quot;/a/servlet03&quot;&gt;网址&lt;/a&gt; : servlet03 表示资源</span><br><span class="line">&lt;a href=&quot;/a/servlet03/&quot;&gt;网址&lt;/a&gt; : servlet03 表示路径</span><br></pre></td></tr></table></figure>

<ol start="6">
<li>重定向 response.sendRediect(“&#x2F;“)；这条语句虽然是在服务器执行的，但是服务器是把斜杠 &#x2F; 发送给浏览器解析。因此得到地址 <code>http://ip[域名]:port/</code></li>
</ol>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>在编写资源路径时 , 考虑这么几点</p>
<p>(1) 这个路径 前面有没有 &#x2F; 。</p>
<p>(2) 这个路径 在哪里被解析 [服务器还是浏览器] , 如果前面有 &#x2F; , 并且是在 浏览器被解 析的 被解析成 <a href="http://ip:port/">http://ip:port/</a> , 如果在服务器端被解析 , 被解析成 &#x2F;工程路径&#x2F; </p>
<p>(3) 如果这个路径，前面没有 &#x2F; , 并且在浏览器被解析，则以浏览器当前的地址栏 去掉 资源部分，作为一个相对路径。</p>
<p>(4) 这个路径最后有没有 &#x2F; , 如果最后有&#x2F; 表示路径， 如果没有 &#x2F; 表示资源。</p>
<hr>


<h1 id="会话技术"><a href="#会话技术" class="headerlink" title="会话技术"></a>会话技术</h1><h2 id="会话"><a href="#会话" class="headerlink" title="会话"></a>会话</h2><h3 id="介绍-6"><a href="#介绍-6" class="headerlink" title="介绍"></a>介绍</h3><p>会话可简单理解为：用户开一个浏览器，点击多个超链接，访问服务器多个 web 资源，然后关闭浏览器，整个过程称之为一个会话。</p>
<h3 id="会话的两种技术"><a href="#会话的两种技术" class="headerlink" title="会话的两种技术"></a>会话的两种技术</h3><p>Cookie</p>
<p>Session</p>
<h2 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h2><h3 id="介绍-7"><a href="#介绍-7" class="headerlink" title="介绍"></a>介绍</h3><ol>
<li>Cookie 是服务器在客户端保存用户的信息，比如登录名，浏览历史等, 就可以以 cookie方式保存。</li>
<li>Cookie 信息就像是小甜饼(cookie 中文)一样，数据量并不大，&#x3D;&#x3D;服务器端在需要的时候可以从客户端&#x2F;浏览器读取(http 协议)&#x3D;&#x3D;。</li>
</ol>
<h3 id="作用-2"><a href="#作用-2" class="headerlink" title="作用"></a>作用</h3><ol>
<li>保存上次登录时间等信息</li>
<li>保存用户名，密码, 在一定时间不用重新登录</li>
<li>网站的个性化，比如定制网站的服务，内容。</li>
</ol>
<h3 id="应用实例-3"><a href="#应用实例-3" class="headerlink" title="应用实例"></a>应用实例</h3><h4 id="创建Cookie"><a href="#创建Cookie" class="headerlink" title="创建Cookie"></a>创建Cookie</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.cookie;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.Cookie;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CreateCookie</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//1.创建一个Cookie对象</span></span><br><span class="line">        <span class="comment">//(1) username 该cookie的名字 是唯一的，可以理解为是key</span></span><br><span class="line">        <span class="comment">//(2) lzw 是值</span></span><br><span class="line">        <span class="comment">//(3) 可以创建多个Cookie</span></span><br><span class="line">        <span class="comment">//(4) 这时Cookie在服务器端，还没有到浏览器</span></span><br><span class="line">        <span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;username&quot;</span>, <span class="string">&quot;lzw&quot;</span>);</span><br><span class="line">        response.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">        <span class="comment">//2.将Cookie发送给浏览器，让浏览器将该Cookie保存</span></span><br><span class="line">        response.addCookie(cookie);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">writer</span> <span class="operator">=</span> response.getWriter();</span><br><span class="line">        writer.println(<span class="string">&quot;&lt;h1&gt;创建Cookie成功&lt;/h1&gt;&quot;</span>);</span><br><span class="line">        writer.flush();</span><br><span class="line">        writer.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="读取指定Cookie"><a href="#读取指定Cookie" class="headerlink" title="读取指定Cookie"></a>读取指定Cookie</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.cookie;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.Cookie;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReadCookies</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//1. 通过Request对象读取cookie信息</span></span><br><span class="line">        Cookie[] cookies = request.getCookies();</span><br><span class="line">        <span class="comment">//2. 遍历cookie</span></span><br><span class="line">        <span class="keyword">if</span>(cookies != <span class="literal">null</span> &amp;&amp; cookies.length != <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">for</span> (Cookie cookie : cookies) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;cookie name= &quot;</span> +cookie.getName() + <span class="string">&quot;, value=&quot;</span> + cookie.getValue());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//3. 给浏览器返回信息</span></span><br><span class="line">        response.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">writer</span> <span class="operator">=</span> response.getWriter();</span><br><span class="line">        writer.println(<span class="string">&quot;&lt;h1&gt;读取Cookie成功&lt;/h1&gt;&quot;</span>);</span><br><span class="line">        writer.flush();</span><br><span class="line">        writer.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//-------------------------</span></span><br><span class="line"><span class="comment">//返回指定名字的Cookie值</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Cookie <span class="title function_">readCookieByName</span><span class="params">(String name, Cookie[] cookies)</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//判断传入的参数是否正确</span></span><br><span class="line">        <span class="keyword">if</span>(name == <span class="literal">null</span> || <span class="string">&quot;&quot;</span>.equals(name) || cookies == <span class="literal">null</span> || cookies.length == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//遍历cookie</span></span><br><span class="line">        <span class="keyword">for</span> (Cookie cookie : cookies) &#123;</span><br><span class="line">            <span class="keyword">if</span>(name.equals(cookie.getName()))&#123;</span><br><span class="line">                <span class="keyword">return</span> cookie;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h4 id="修改Cookie"><a href="#修改Cookie" class="headerlink" title="修改Cookie"></a>修改Cookie</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.cookie;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.Cookie;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UpdateCookie</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//需求</span></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 1. 需求 演示如何修改Cookie</span></span><br><span class="line"><span class="comment">         * 1) 给定一个cookie的name, 找到该cookie, 如果找到, 则修改该cookie的值为 hsp-hi</span></span><br><span class="line"><span class="comment">         * 2) 如果找不到指定的cookie , 则提示, 没有该cookie</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="comment">//1. 根据name 去查找 cookie</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">cookieName</span> <span class="operator">=</span> <span class="string">&quot;username&quot;</span>;</span><br><span class="line">        Cookie[] cookies = request.getCookies();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//如果我们直接创建了一个同名的cookie</span></span><br><span class="line">        <span class="type">Cookie</span> <span class="variable">userNameCookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;username&quot;</span>, <span class="string">&quot;hahaha&quot;</span>);</span><br><span class="line">        <span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> CookieUtils.readCookieByName(cookieName, cookies);</span><br><span class="line">        <span class="keyword">if</span> (<span class="literal">null</span> == cookie) &#123;<span class="comment">//在该浏览器没有email cookie</span></span><br><span class="line">            System.out.println(<span class="string">&quot;当前访问 服务端的 浏览器没有 该cookie&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            cookie.setValue(<span class="string">&quot;lzw-hi&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//2. 遍历cookie</span></span><br><span class="line">        <span class="keyword">for</span> (Cookie cookie1 : cookies) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;cookie name= &quot;</span> + cookie1.getName() + <span class="string">&quot; value= &quot;</span> + cookie1.getValue());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//3. 给浏览器返回信息</span></span><br><span class="line">        response.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(cookie != <span class="literal">null</span>)&#123;</span><br><span class="line">            response.addCookie(cookie);</span><br><span class="line">        &#125;</span><br><span class="line">        response.addCookie(userNameCookie);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">writer</span> <span class="operator">=</span> response.getWriter();</span><br><span class="line">        writer.println(<span class="string">&quot;&lt;h1&gt;更新完成&lt;/h1&gt;&quot;</span>);</span><br><span class="line">        writer.flush();</span><br><span class="line">        writer.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="Cookie生命周期"><a href="#Cookie生命周期" class="headerlink" title="Cookie生命周期"></a>Cookie生命周期</h3><h4 id="介绍-8"><a href="#介绍-8" class="headerlink" title="介绍"></a>介绍</h4><ol>
<li><p>Cookie 的生命周期指的是如何管理 Cookie 什么时候被销毁（删除）</p>
</li>
<li><p>setMaxAge()</p>
</li>
</ol>
<p>  ● 正数，表示在指定的秒数后过期<br>  ● 负数，表示浏览器关闭，Cookie 就会被删除（默认值是-1）<br>  ● 0，表示马上删除 Cookie</p>
<h4 id="应用实例-4"><a href="#应用实例-4" class="headerlink" title="应用实例"></a>应用实例</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.cookie;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.Cookie;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CookieLive</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//演示创建一个cookie , 生命周期为 60s</span></span><br><span class="line">        <span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;job&quot;</span>, <span class="string">&quot;java&quot;</span>);</span><br><span class="line">        <span class="comment">// 1. 从创建该cookie开始计时, 60秒后无效</span></span><br><span class="line">        <span class="comment">// 2. 浏览器来根据创建的时间，计时到60s秒，就认为该cookie无效</span></span><br><span class="line">        <span class="comment">// 3. 如果该cookie无效，那么浏览器在发出http请求时，就不在携带该cookie</span></span><br><span class="line">        cookie.setMaxAge(<span class="number">60</span>);</span><br><span class="line">        <span class="comment">//讲cookie保存到浏览器</span></span><br><span class="line">        response.addCookie(cookie);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//演示如何删除一个cookie, 比如删除username</span></span><br><span class="line">        <span class="comment">//1 先得到username cookie</span></span><br><span class="line">        Cookie[] cookies = request.getCookies();</span><br><span class="line">        <span class="type">Cookie</span> <span class="variable">usernameCookie</span> <span class="operator">=</span> CookieUtils.readCookieByName(<span class="string">&quot;username&quot;</span>, cookies);</span><br><span class="line">        <span class="keyword">if</span>(usernameCookie != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">//2. 将其生命周期设置为0</span></span><br><span class="line">            usernameCookie.setMaxAge(<span class="number">0</span>);</span><br><span class="line">            <span class="comment">//3. 重新保存该cookie, 因为你将其生命周期设置0, 就等价于让浏览器删除该cookie</span></span><br><span class="line">            <span class="comment">//4. 说明：该cookie会被浏览器直接删除</span></span><br><span class="line">            <span class="comment">//   返回一个Set-Cookie</span></span><br><span class="line">            <span class="comment">//   Set-Cookie: username=tom; Expires=Thu, 01-Jan-1970 00:00:10 GMT</span></span><br><span class="line">            response.addCookie(usernameCookie);<span class="comment">//返回一个Set-Cookie: xxxxx =&gt; 一会抓包.</span></span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;没有找到该cookie, 无法删除...&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/***********************</span></span><br><span class="line"><span class="comment">         * 默认的会话级别的 Cookie [即浏览器关闭就销毁了]</span></span><br><span class="line"><span class="comment">         * 前面我们讲课时，都是默认会话级别的生命周期</span></span><br><span class="line"><span class="comment">         ***********************/</span></span><br><span class="line">        <span class="type">Cookie</span> <span class="variable">cookie3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;dkey&quot;</span>, <span class="string">&quot;dkey_value&quot;</span>);</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * public void setMaxAge(int expiry) &#123;</span></span><br><span class="line"><span class="comment">         *         this.maxAge = expiry;</span></span><br><span class="line"><span class="comment">         * &#125;</span></span><br><span class="line"><span class="comment">         * private int maxAge = -1; 默认就是-1</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="comment">//cookie.setMaxAge(-1);//设置存活时间</span></span><br><span class="line">        response.addCookie(cookie3);</span><br><span class="line">        <span class="comment">// 给浏览器返回信息</span></span><br><span class="line">        response.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">writer</span> <span class="operator">=</span> response.getWriter();</span><br><span class="line">        writer.println(<span class="string">&quot;&lt;h1&gt;设置cookie生命周期&lt;/h1&gt;&quot;</span>);</span><br><span class="line">        writer.flush();</span><br><span class="line">        writer.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="Cookie有效路径"><a href="#Cookie有效路径" class="headerlink" title="Cookie有效路径"></a>Cookie有效路径</h3><h4 id="规则"><a href="#规则" class="headerlink" title="规则"></a>规则</h4><ol>
<li>Cookie 有效路径 Path 的设置</li>
<li>Cookie 的 path 属性可以有效的过滤哪些 Cookie 可以发送给服务器。哪些不发。 path<br>属性是通过请求的地址来进行有效的过滤</li>
<li>规则如下:</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cookie1.setPath = /工程路径</span><br><span class="line">cookie2.setPath = /工程路径/aaa</span><br><span class="line">请求地址: http://ip:端口/工程路径/资源</span><br><span class="line">cookie1 会发给服务器</span><br><span class="line">cookie2 不会发给服务器</span><br><span class="line">请求地址: http://ip:端口/工程路径/aaa/资源</span><br><span class="line">cookie1 会发给服务器</span><br><span class="line">cookie2 会发给服务器</span><br></pre></td></tr></table></figure>

<h5 id="应用实例-5"><a href="#应用实例-5" class="headerlink" title="应用实例"></a>应用实例</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.cookie;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.Cookie;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CookiePathServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//1. 创建两个cookie</span></span><br><span class="line">        <span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;address&quot;</span>, <span class="string">&quot;bj&quot;</span>);</span><br><span class="line">        <span class="type">Cookie</span> <span class="variable">cookie2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;salary&quot;</span>, <span class="string">&quot;20000&quot;</span>);</span><br><span class="line">        <span class="comment">//2. 设置不同有效路径</span></span><br><span class="line">        <span class="comment">//   request.getContextPath() =&gt; /cs</span></span><br><span class="line">        cookie.setPath(request.getContextPath());</span><br><span class="line">        <span class="comment">//   cookie2有效路径 /cs/aaa</span></span><br><span class="line">        cookie2.setPath(request.getContextPath() + <span class="string">&quot;/aaa&quot;</span>);</span><br><span class="line">        <span class="comment">//如果我们没有设置cookie有效路径，默认就是 /工程路径</span></span><br><span class="line">        <span class="comment">//3. 保存到浏览器</span></span><br><span class="line">        response.addCookie(cookie);</span><br><span class="line">        response.addCookie(cookie2);</span><br><span class="line">        <span class="comment">//4. 给浏览器返回信息</span></span><br><span class="line">        response.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">writer</span> <span class="operator">=</span> response.getWriter();</span><br><span class="line">        writer.println(<span class="string">&quot;&lt;h1&gt;设置cookie有效路径成功&lt;/h1&gt;&quot;</span>);</span><br><span class="line">        writer.flush();</span><br><span class="line">        writer.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="注意事项和细节-3"><a href="#注意事项和细节-3" class="headerlink" title="注意事项和细节"></a>注意事项和细节</h3><ol>
<li>一个 Cookie 只能标识一种信息，它至少含有一个标识该信息的名称（NAME）和设置值（VALUE）。</li>
<li>一个 WEB 站点可以给一个浏览器发送多个 Cookie，一个浏览器也可以存储多个 WEB 站点提供的 Cookie。</li>
<li>cookie 的总数量没有限制，但是每个域名的 COOKIE 数量和每个 COOKIE 的大小是有限制的 (不同的浏览器限制不同, 知道即可) , Cookie 不适合存放数据量大的信息。</li>
<li>注意，删除 cookie 时，path 必须一致，否则不会删除</li>
<li>Java servlet 中 cookie 中文乱码解决</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.cookie;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.Cookie;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.net.URLDecoder;</span><br><span class="line"><span class="keyword">import</span> java.net.URLEncoder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EncoderCookie</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//System.out.println(&quot;EncoderCookie 被调用&quot;);</span></span><br><span class="line">        <span class="comment">//1. 创建cookie, 有中文</span></span><br><span class="line">        <span class="comment">//1) 如果直接存放中文的cookie, 报错 Control character in cookie value or attribute.</span></span><br><span class="line">        <span class="comment">//2) 解决方法，就是将中文 编程成 URL编码  英文： Encode=编码</span></span><br><span class="line">        <span class="comment">//3) 编码后，再保存即可</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">company</span> <span class="operator">=</span> URLEncoder.encode(<span class="string">&quot;LiAng&quot;</span>, <span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        <span class="comment">//URLDecoder.decode(); 解码</span></span><br><span class="line">        <span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;company&quot;</span>, company);</span><br><span class="line">        <span class="comment">//2. 保存到浏览器</span></span><br><span class="line">        response.addCookie(cookie);</span><br><span class="line">        <span class="comment">//3. 给浏览器返回信息</span></span><br><span class="line">        response.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">writer</span> <span class="operator">=</span> response.getWriter();</span><br><span class="line">        writer.println(<span class="string">&quot;&lt;h1&gt;设置中文cookie成功&lt;/h1&gt;&quot;</span>);</span><br><span class="line">        writer.flush();</span><br><span class="line">        writer.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Session"><a href="#Session" class="headerlink" title="Session"></a>Session</h2><h3 id="介绍-9"><a href="#介绍-9" class="headerlink" title="介绍"></a>介绍</h3><ol>
<li>Session 是服务器端技术，服务器在运行时为每一个用户的浏览器创建一个其独享的session 对象&#x2F;集合</li>
<li>由于 session 为各个用户浏览器独享，所以用户在访问服务器的不同页面时，可以从各自的 session 中读取&#x2F;添加数据, 从而完成相应任务</li>
</ol>
<h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><ol>
<li>当用户打开浏览器，访问某个网站, 操作 session 时，服务器就会在内存(在服务端)为该浏览器分配一个 session 对象，该 session 对象被这个浏览器独占, 如图</li>
</ol>
<p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220310135905260.png" alt="image-20220310135905260"></p>
<p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220310135916708.png" alt="image-20220310135916708"></p>
<ol start="2">
<li>这个 session 对象也可看做是一个容器&#x2F;集合,session 对象默认存在时间为 30min(这是在tomcat&#x2F;conf&#x2F;web.xml)，也可修改</li>
</ol>
<h3 id="如何理解Session"><a href="#如何理解Session" class="headerlink" title="如何理解Session"></a>如何理解Session</h3><p>1.存储结构示意图</p>
<p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220310140256266.png" alt="image-20220310140256266"></p>
<p>2.你可以把 session 看作是一容器类似 HashMap，有两列(K-V)，每一行就是 session 的一个属性。</p>
<p>3.每个属性包含有两个部分，一个是该属性的名字(String)，另外一个是它的值(Object)</p>
<h3 id="Session底层实现机制"><a href="#Session底层实现机制" class="headerlink" title="Session底层实现机制"></a>Session底层实现机制</h3><p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220310141232989.png" alt="image-20220310141232989"></p>
<p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220310141252966.png" alt="image-20220310141252966"></p>
<h4 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.session;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CreateSession</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//1. 获取session, 同时也可能创建session</span></span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> request.getSession();</span><br><span class="line">        <span class="comment">//2. 给session获取id</span></span><br><span class="line">        System.out.println(<span class="string">&quot;CreateSession 当前sessionid= &quot;</span> + session.getId());</span><br><span class="line">        <span class="comment">//3. 给session存放数据</span></span><br><span class="line">        session.setAttribute(<span class="string">&quot;email&quot;</span>, <span class="string">&quot;zs@qq.com&quot;</span>);</span><br><span class="line">        <span class="comment">//4. 给浏览器发送一个回复</span></span><br><span class="line">        response.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">writer</span> <span class="operator">=</span> response.getWriter();</span><br><span class="line">        writer.println(<span class="string">&quot;&lt;h1&gt;创建/操作session成功...&lt;/h1&gt;&quot;</span>);</span><br><span class="line">        writer.flush();</span><br><span class="line">        writer.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.session;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReadSession</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//1. 获取session, 如果没有session, 也会创建</span></span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> request.getSession();</span><br><span class="line">        <span class="comment">//输出sessionId</span></span><br><span class="line">        System.out.println(<span class="string">&quot;ReadSession sessionid= &quot;</span> + session.getId());</span><br><span class="line">        <span class="comment">//2. 读取属性</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">email</span> <span class="operator">=</span> session.getAttribute(<span class="string">&quot;email&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (email != <span class="literal">null</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;session属性 email= &quot;</span> + (String) email);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;session中没有 email属性 &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//给浏览器回复一下</span></span><br><span class="line">        response.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">writer</span> <span class="operator">=</span> response.getWriter();</span><br><span class="line">        writer.println(<span class="string">&quot;&lt;h1&gt;读取session成功...&lt;/h1&gt;&quot;</span>);</span><br><span class="line">        writer.flush();</span><br><span class="line">        writer.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Session生命周期"><a href="#Session生命周期" class="headerlink" title="Session生命周期"></a>Session生命周期</h3><h4 id="介绍-10"><a href="#介绍-10" class="headerlink" title="介绍"></a>介绍</h4><ol>
<li>public void setMaxInactiveInterval(int interval) 设置 Session 的超时时间（以秒为单位），超过指定的时长，Session 就会被销毁。</li>
<li>值为正数的时候，设定 Session 的超时时长。</li>
<li>负数表示永不超时</li>
<li>public int getMaxInactiveInterval()获取 Session 的超时时间</li>
<li>public void invalidate() 让当前 Session 会话立即无效</li>
<li>如果没有调用 setMaxInactiveInterval() 来指定 Session 的生命时长，Tomcat 会以 Session默认时长为准，Session 默认的超时为 30 分钟， 可以在 tomcat 的 web.xml 设置</li>
</ol>
<p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220310202550602.png" alt="image-20220310202550602"></p>
<ol start="7">
<li>Session 的生命周期指的是 ：客户端&#x2F;浏览器两次请求最大间隔时长，而不是累积时长。即当客户端访问了自己的 session，session 的生命周期将从 0 开始重新计算。(指的是同一个会话两次请求之间的间隔时间)</li>
<li>底层: Tomcat 用一个线程来轮询会话状态，如果某个会话的空闲时间超过设定的最大值，则将该会话销毁</li>
</ol>
<h4 id="应用实例-6"><a href="#应用实例-6" class="headerlink" title="应用实例"></a>应用实例</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.session;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CreateSession2</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;CreateSession2 被调用&quot;</span>);</span><br><span class="line">        <span class="comment">//创建Session</span></span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> request.getSession();</span><br><span class="line">        System.out.println(<span class="string">&quot;CreateSession2 sid= &quot;</span> + session.getId());</span><br><span class="line">        <span class="comment">//设置生命周期</span></span><br><span class="line">        session.setMaxInactiveInterval(<span class="number">30</span>);<span class="comment">//30秒</span></span><br><span class="line">        session.setAttribute(<span class="string">&quot;u&quot;</span>,<span class="string">&quot;jack&quot;</span>);</span><br><span class="line">        <span class="comment">//回复下浏览器</span></span><br><span class="line">        response.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">writer</span> <span class="operator">=</span> response.getWriter();</span><br><span class="line">        writer.println(<span class="string">&quot;&lt;h1&gt;创建session成功, 设置生命周期30s&lt;/h1&gt;&quot;</span>);</span><br><span class="line">        writer.flush();</span><br><span class="line">        writer.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.session;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReadSession2</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//1. 获取到session</span></span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> request.getSession();</span><br><span class="line">        System.out.println(<span class="string">&quot;ReadSession2 sid= &quot;</span> + session.getId());</span><br><span class="line">        <span class="comment">//2. 读取session的属性</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">u</span> <span class="operator">=</span> session.getAttribute(<span class="string">&quot;u&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (u != <span class="literal">null</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;读取到session属性 u= &quot;</span> + (String) u);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;读取不到session属性 u 说明原来的session被销毁&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.session;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DeleteSession</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//演示如何删除session</span></span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> request.getSession();</span><br><span class="line">        session.invalidate();</span><br><span class="line">        <span class="comment">//如果你要删除session的某个属性</span></span><br><span class="line">        <span class="comment">//session.removeAttribute(&quot;xxx&quot;);</span></span><br><span class="line">        <span class="comment">//回复一下浏览器</span></span><br><span class="line">        response.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">writer</span> <span class="operator">=</span> response.getWriter();</span><br><span class="line">        writer.println(<span class="string">&quot;&lt;h1&gt;删除session成功&lt;/h1&gt;&quot;</span>);</span><br><span class="line">        writer.flush();</span><br><span class="line">        writer.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>


<h1 id="服务器渲染技术-JSP-会使用"><a href="#服务器渲染技术-JSP-会使用" class="headerlink" title="服务器渲染技术-JSP[会使用]"></a>服务器渲染技术-JSP[会使用]</h1><h2 id="介绍-11"><a href="#介绍-11" class="headerlink" title="介绍"></a>介绍</h2><p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220312082018008.png" alt="image-20220312082018008"></p>
<ol>
<li><p>JSP 全称是 Java Server Pages，Java 的服务器页面</p>
</li>
<li><p>JSP 这门技术的最大的特点在于，写 JSP 就像在写 HTML</p>
</li>
</ol>
<p>  ● 相比 html 而言，html 只能为用户提供静态数据，而 JSP 技术允许在页面中嵌套 java 代码，为用户提供动态数据<br>  ● 相比 Servlet 而言，Servlet 很难对数据进行排版，而 jsp 除了可以用 java 代码产 生动态数据的同时，也很容易对数据进行排版。</p>
<ol start="3">
<li>jsp 技术基于 Servlet, 你可以理解成 JSP 就是对 Servlet 的包装. 4. 会使用 JSP 的程序员, 再使用 thymeleaf 是非常容易的事情, 几乎是无缝接轨。</li>
</ol>
<h2 id="入门"><a href="#入门" class="headerlink" title="入门"></a>入门</h2><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;java.io.PrintWriter&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;jsp简单求和计算器&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;jsp简单求和计算器&lt;/h1&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    <span class="comment">//1. 在jsp的该标签中，可以写java代码</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">20</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> i + j;</span><br><span class="line">    <span class="comment">//2. jsp中内置对象，可以直接使用，比如 out</span></span><br><span class="line">    <span class="comment">// 格式化快捷键 ctrl + alt + l</span></span><br><span class="line">    out.print(i + <span class="string">&quot; + &quot;</span> + j + <span class="string">&quot; = &quot;</span> + res);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h2 id="运行原理"><a href="#运行原理" class="headerlink" title="运行原理"></a>运行原理</h2><ol>
<li>jsp 页面本质是一个 Servlet 程序, 其性能是和 java 关联的, 只是长得丑。</li>
<li>第 1 次访问 jsp 页面的时候。Tomcat 服务器会把 jsp 页面解析成为一个 java 源文件。并且对它进行编译成为.class 字节码程序。 看下 Cal.jsp 对应的 cal_jsp.java 和cal_jsp.class 文件<img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220312084236388.png" alt="image-20220312084236388"><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220312084350591.png" alt="image-20220312084350591"></li>
<li>分析下 cal_jsp.java 的源码，可以看出本质就是 Servlet。（要看到源码和分析类图，需要加入 jasper.jar 这个包[在tomcat&#x2F;lib 下拷贝]）<img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220312084934681.png" alt="image-20220312084934681"></li>
</ol>
<p>（1）sum.jsp -&gt; sum_jsp.jsp</p>
<p>（2）sum_jsp 继承 HttpJspBase</p>
<p>（3）HttpJspBase 继承了 HttpServlet</p>
<p>（4）结论 sum.jsp本质就是servlet</p>
<p>（5）因为sum_jsp 类还继承 HttpJspBase 所以就有更强的功能</p>
<h2 id="常用page指令"><a href="#常用page指令" class="headerlink" title="常用page指令"></a>常用page指令</h2><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br></pre></td></tr></table></figure>

<ol>
<li>language 表示 jsp 翻译后是什么语言文件, 只支持 java</li>
<li>contentType 表示 jsp 返回的数据类型，对应源码中 response.setContentType()参数值</li>
<li>pageEncoding 属性 表示当前 jsp 页面文件本身的字符集</li>
<li>import 属性 跟 java 源代码中一样。用于导包，导类</li>
</ol>
<h2 id="JSP常用三种脚本"><a href="#JSP常用三种脚本" class="headerlink" title="JSP常用三种脚本"></a>JSP常用三种脚本</h2><h3 id="声明脚本基本语法"><a href="#声明脚本基本语法" class="headerlink" title="声明脚本基本语法"></a>声明脚本基本语法</h3><ol>
<li><p>声明脚本的格式是： &lt;%! 声明 java 代码 %&gt;</p>
</li>
<li><p>作用：定义 jsp 的需要属性、方法、静态代码块和内部类等</p>
</li>
</ol>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;jsp声明脚本&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;jsp声明脚本&lt;/h1&gt;</span><br><span class="line">&lt;%!</span><br><span class="line">    <span class="comment">//这里我们可以声明该jsp需要使用的属性，方法，静态代码块，内部类</span></span><br><span class="line">    <span class="comment">//也就是给 statement.jsp 对应的 statement_jsp 类定义成员</span></span><br><span class="line">    <span class="comment">//1. 属性</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;jack&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String company;</span><br><span class="line">    <span class="comment">//2. 方法</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//3. 静态代码块</span></span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        company = <span class="string">&quot;阿里巴巴&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="表达式脚本基本语法"><a href="#表达式脚本基本语法" class="headerlink" title="表达式脚本基本语法"></a>表达式脚本基本语法</h3><ol>
<li>表达式脚本的格式是：&lt;%&#x3D;表达式%&gt;</li>
<li>表达式脚本的作用是：在 jsp 页面上输出数据</li>
<li>表达式脚本中的表达式不能以分号结束</li>
</ol>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;表达式脚本的使用&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;个人信息&lt;/h1&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;lzw&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">email</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;email&quot;</span>);</span><br><span class="line">%&gt;</span><br><span class="line">用户名：&lt;%=name%&gt;&lt;br&gt;</span><br><span class="line">工作是：&lt;%=<span class="string">&quot;java工程师&quot;</span>%&gt;&lt;br&gt;</span><br><span class="line">年龄:&lt;%=request.getParameter(<span class="string">&quot;age&quot;</span>)%&gt;&lt;br&gt;</span><br><span class="line">邮箱:&lt;%=email%&gt;&lt;br&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="代码脚本基本语法"><a href="#代码脚本基本语法" class="headerlink" title="代码脚本基本语法"></a>代码脚本基本语法</h3><ol>
<li>代码脚本的语法是：&lt;% java 代码%&gt;</li>
<li>代码脚本的作用是：可以在 jsp 页面中，编写我们需要的功能（使用 java ）</li>
<li>可以由多个代码脚本块组合完成一个完整的 java 语句。</li>
<li>代码脚本还可以和表达式脚本一起组合使用，在 jsp 页面上输出数据</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Monster</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String skill;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Monster</span><span class="params">(Integer id, String name, String skill)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.skill = skill;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getSkill</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> skill;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSkill</span><span class="params">(String skill)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.skill = skill;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;java.util.ArrayList&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;com.lzw.entity.Monster&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;演示代码脚本&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;演示代码脚本&lt;/h1&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    <span class="comment">//创建 ArrayList，放入两个monster</span></span><br><span class="line">    ArrayList&lt;Monster&gt; monsterLists = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    monsterLists.add(<span class="keyword">new</span> <span class="title class_">Monster</span>(<span class="number">1</span>, <span class="string">&quot;牛魔王&quot;</span>, <span class="string">&quot;芭蕉扇&quot;</span>));</span><br><span class="line">    monsterLists.add(<span class="keyword">new</span> <span class="title class_">Monster</span>(<span class="number">2</span>, <span class="string">&quot;蜘蛛精&quot;</span>, <span class="string">&quot;吐口水&quot;</span>));</span><br><span class="line">%&gt;</span><br><span class="line">&lt;table bgcolor=<span class="string">&quot;#bfa&quot;</span> border=<span class="string">&quot;1px&quot;</span> width=<span class="string">&quot;300px&quot;</span>&gt;</span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">        &lt;th&gt;id&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;名字&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;技能&lt;/th&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">    &lt;%</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; monsterLists.size(); i++) &#123;</span><br><span class="line">            <span class="comment">//先取出monster对象</span></span><br><span class="line">            <span class="type">Monster</span> <span class="variable">monster</span> <span class="operator">=</span> monsterLists.get(i);</span><br><span class="line">    %&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;td&gt;&lt;%=monster.getId()%&gt;&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;&lt;%=monster.getName()%&gt;&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;&lt;%=monster.getSkill()%&gt;&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">    &lt;%</span><br><span class="line">        &#125;</span><br><span class="line">    %&gt;</span><br><span class="line">&lt;/table&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h2 id="JSP内置对象"><a href="#JSP内置对象" class="headerlink" title="JSP内置对象"></a>JSP内置对象</h2><h3 id="介绍-12"><a href="#介绍-12" class="headerlink" title="介绍"></a>介绍</h3><p>1、JSP 内置对象(已经创建好的对象, 直接使用 inbuild)，是指 Tomcat 在翻译 jsp 页面成为Servlet 后，内部提供的九大对象，叫内置对象<br>2、内置对象，可以直接使用，不需要手动定义</p>
<h3 id="九大内置对象"><a href="#九大内置对象" class="headerlink" title="九大内置对象"></a>九大内置对象</h3><ol>
<li>out 向客户端输出数据，out.println(“”);</li>
<li>request 客户端的 http 请求</li>
<li>response 响应对象</li>
<li>session 会话对象</li>
<li>application 对应 ServletContext</li>
<li>pageContext jsp 页面的上下文，是一个域对象，可以 setAttribue(),作用范围只是本页面</li>
<li>exception 异常对象 , getMessage()</li>
<li>page 代表 jsp 这个实例本身</li>
<li>config 对应 ServletConfig</li>
</ol>
<p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220313153638744.png" alt="image-20220313153638744"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletConfig;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContext;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HiServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;HiServlet 被调用&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">writer</span> <span class="operator">=</span> response.getWriter();</span><br><span class="line">        writer.println(<span class="string">&quot;haha&quot;</span>);</span><br><span class="line">        request.getParameter(<span class="string">&quot;age&quot;</span>);</span><br><span class="line">        response.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> request.getSession();</span><br><span class="line">        session.setAttribute(<span class="string">&quot;job&quot;</span>,<span class="string">&quot;java工程师&quot;</span>);</span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> request.getServletContext();</span><br><span class="line">        servletContext.setAttribute(<span class="string">&quot;count&quot;</span>,<span class="number">666</span>);</span><br><span class="line">        <span class="type">ServletConfig</span> <span class="variable">servletConfig</span> <span class="operator">=</span> getServletConfig();</span><br><span class="line">        servletConfig.getInitParameter(<span class="string">&quot;pwd&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;jsp内置对象&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;jsp内置对象&lt;/h1&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    <span class="comment">//jsp的内置对象</span></span><br><span class="line">    <span class="comment">//out 类型是 JspWriter 父类就是 Writer.</span></span><br><span class="line">    out.println(<span class="string">&quot;jsp out&quot;</span>);</span><br><span class="line">    <span class="comment">//request是HttpServletRequest</span></span><br><span class="line">    request.getParameter(<span class="string">&quot;age&quot;</span>);</span><br><span class="line">    <span class="comment">//response就是 HttpServletResponse</span></span><br><span class="line">    <span class="comment">//response.sendRedirect(&quot;http://www.baidu.com&quot;);</span></span><br><span class="line">    <span class="comment">//session 就是 HttpSession</span></span><br><span class="line">    session.setAttribute(<span class="string">&quot;job&quot;</span>, <span class="string">&quot;PHP工程师&quot;</span>);</span><br><span class="line">    <span class="comment">//application类型就是ServletContext</span></span><br><span class="line">    application.setAttribute(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;老韩老师&quot;</span>);</span><br><span class="line">    <span class="comment">//pageContext 可以存放数据(属性), 但是该数据只能在本页面使用</span></span><br><span class="line">    pageContext.setAttribute(<span class="string">&quot;age&quot;</span>, <span class="number">100</span>);</span><br><span class="line">    <span class="comment">//exception 异常对象 使用比较少</span></span><br><span class="line">    <span class="comment">//page 内置对象，类似 this</span></span><br><span class="line">    out.println(<span class="string">&quot;page=&quot;</span> + page);</span><br><span class="line">    <span class="comment">//config 内置对象的类型就是ServletConfig</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">pwd</span> <span class="operator">=</span> config.getInitParameter(<span class="string">&quot;pwd&quot;</span>);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">age: &lt;%=pageContext.getAttribute(<span class="string">&quot;age&quot;</span>)%&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h2 id="JSP域对象"><a href="#JSP域对象" class="headerlink" title="JSP域对象"></a>JSP域对象</h2><h3 id="JSP四大域对象"><a href="#JSP四大域对象" class="headerlink" title="JSP四大域对象"></a>JSP四大域对象</h3><ol>
<li>pageContext (域对象，存放的数据只能在当前页面使用)</li>
</ol>
<p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220313212927458.png" alt="image-20220313212927458"></p>
<ol start="2">
<li>request (域对象，存放的数据在一次 request 请求有效)</li>
</ol>
<p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220313213142802.png" alt="image-20220313213142802"></p>
<ol start="3">
<li>session(域对象,存放的数据在一次会话有效)</li>
</ol>
<p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220313213158673.png" alt="image-20220313213158673"></p>
<ol start="4">
<li>application(域对象,存放的数据在整个 web 应用运行期间有效, 范围更大)</li>
</ol>
<p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220313213230807.png" alt="image-20220313213230807"></p>
<p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220313214003016.png" alt="image-20220313214003016"></p>
<h3 id="应用实例-7"><a href="#应用实例-7" class="headerlink" title="应用实例"></a>应用实例</h3><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;scope文件&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    <span class="comment">//在不同的域对象中，放入数据</span></span><br><span class="line">    <span class="comment">//1. 因为四个域对象，是不同的对象，因此name(key) 相同时，并不会冲突</span></span><br><span class="line">    pageContext.setAttribute(<span class="string">&quot;k1&quot;</span>,<span class="string">&quot;pageContext 数据（k1）&quot;</span>);</span><br><span class="line">    request.setAttribute(<span class="string">&quot;k1&quot;</span>,<span class="string">&quot;request 数据(k1)&quot;</span>);</span><br><span class="line">    session.setAttribute(<span class="string">&quot;k1&quot;</span>,<span class="string">&quot;session 数据（k1）&quot;</span>);</span><br><span class="line">    application.setAttribute(<span class="string">&quot;k1&quot;</span>,<span class="string">&quot;application 数据（k1）&quot;</span>);</span><br><span class="line">    <span class="comment">//做一个请求转发的操作</span></span><br><span class="line">    <span class="comment">//路径</span></span><br><span class="line"><span class="comment">//    request.getRequestDispatcher(&quot;/scope2.jsp&quot;).forward(request, response);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//做一个重定向</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">contextPath</span> <span class="operator">=</span> request.getContextPath();</span><br><span class="line">    response.sendRedirect(contextPath + <span class="string">&quot;/scope2.jsp&quot;</span>);</span><br><span class="line"><span class="comment">//    response.sendRedirect(&quot;/jsp/scope2.jsp&quot;);</span></span><br><span class="line">%&gt;</span><br><span class="line">&lt;h1&gt;四个域对象，在本页面获取数据的情况&lt;/h1&gt;</span><br><span class="line">pageContext-k1:&lt;%=pageContext.getAttribute(<span class="string">&quot;k1&quot;</span>)%&gt;&lt;br&gt;</span><br><span class="line">request-k1:&lt;%=request.getAttribute(<span class="string">&quot;k1&quot;</span>)%&gt;&lt;br&gt;</span><br><span class="line">session-k1:&lt;%=session.getAttribute(<span class="string">&quot;k1&quot;</span>)%&gt;&lt;br&gt;</span><br><span class="line">application-k1:&lt;%=application.getAttribute(<span class="string">&quot;k1&quot;</span>)%&gt;&lt;br&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;scope2.jsp&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;scope2页面获取数据的情况&lt;/h1&gt;</span><br><span class="line">pageContext-k1:&lt;%=pageContext.getAttribute(<span class="string">&quot;k1&quot;</span>)%&gt;&lt;br&gt;</span><br><span class="line">request-k1:&lt;%=request.getAttribute(<span class="string">&quot;k1&quot;</span>)%&gt;&lt;br&gt;</span><br><span class="line">session-k1:&lt;%=session.getAttribute(<span class="string">&quot;k1&quot;</span>)%&gt;&lt;br&gt;</span><br><span class="line">application-k1:&lt;%=application.getAttribute(<span class="string">&quot;k1&quot;</span>)%&gt;&lt;br&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="注意事项和细节-4"><a href="#注意事项和细节-4" class="headerlink" title="注意事项和细节"></a>注意事项和细节</h3><ol>
<li>域对象是可以像 Map 一样存取数据的对象。四个域对象功能一样。不同的是它们对数据的存储范围</li>
<li>从存储范围(作用域范围看) pageContext &lt; request &lt; session &lt; application</li>
</ol>
<h2 id="JSP请求转发标签"><a href="#JSP请求转发标签" class="headerlink" title="JSP请求转发标签"></a>JSP请求转发标签</h2><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;aa.jsp&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%--</span><br><span class="line"><span class="number">1.</span> jsp提供了很多标签，但是因为jsp不是重点，老韩就讲一个常用forward</span><br><span class="line"><span class="number">2.</span> jsp:forward 本质就是 等价 request.getRequestDispatcher(<span class="string">&quot;/bb.jsp&quot;</span>).<span class="keyword">for</span>...</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;jsp:forward page=<span class="string">&quot;bb.jsp&quot;</span>&gt;&lt;/jsp:forward&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<hr>


<h1 id="EL表达式-JSP"><a href="#EL表达式-JSP" class="headerlink" title="EL表达式(JSP)"></a>EL表达式(JSP)</h1><h2 id="介绍-13"><a href="#介绍-13" class="headerlink" title="介绍"></a>介绍</h2><ol>
<li>EL 表达式全称：Expression Language，是表达式语言</li>
<li>EL 表达式主要是代替 jsp 页面的表达式脚本&lt;%&#x3D;request.getAttribute(“xx”)%&gt;</li>
<li>EL 表达式输出数据的时，比 jsp 的表达式脚本简洁</li>
<li>EL 表达式基本语法： ${key1}, 你可以理解就是一个语法糖</li>
</ol>
<h2 id="快速入门"><a href="#快速入门" class="headerlink" title="快速入门"></a>快速入门</h2><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;el表达式快速入门&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;el表达式快速入门&lt;/h1&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    request.setAttribute(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;梁lzw&quot;</span>);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;%--</span><br><span class="line">    <span class="number">1.</span> 如果name是<span class="literal">null</span>，request.getAttribute() 返回的是<span class="literal">null</span>字符串</span><br><span class="line">    <span class="number">2.</span> 如果name是<span class="literal">null</span>，$&#123;name&#125;，返回的<span class="string">&quot;&quot;</span></span><br><span class="line">--%&gt;</span><br><span class="line">&lt;h1&gt;jsp表达式脚本&lt;/h1&gt;</span><br><span class="line">名字 = &lt;%=request.getAttribute(<span class="string">&quot;name&quot;</span>) == <span class="literal">null</span> ? <span class="string">&quot;&quot;</span>:request.getAttribute(<span class="string">&quot;name&quot;</span>)%&gt;&lt;br&gt;</span><br><span class="line">&lt;h1&gt;el 表达式&lt;/h1&gt;</span><br><span class="line">名字 = $&#123;name&#125;&lt;br/&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h2 id="EL常用输出形式"><a href="#EL常用输出形式" class="headerlink" title="EL常用输出形式"></a>EL常用输出形式</h2><p>EL 表达式常用输出 Bean 的普通属性、 数组属性、List 集合属性和 map 集合属性</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;com.lzw.entity.Book&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;java.util.ArrayList&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;java.util.HashMap&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;el表达式输出数据演示&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;el表达式输出数据演示&lt;/h1&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    <span class="comment">//创建Book对象，放入相关的属性</span></span><br><span class="line">    <span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Book</span>();</span><br><span class="line">    book.setName(<span class="string">&quot;昆虫总动员&quot;</span>);</span><br><span class="line">    book.setWriter(<span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;jack&quot;</span>,<span class="string">&quot;tom&quot;</span>&#125;);</span><br><span class="line">    ArrayList&lt;String&gt; reader = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line">    reader.add(<span class="string">&quot;老韩&quot;</span>);</span><br><span class="line">    reader.add(<span class="string">&quot;lzw&quot;</span>);</span><br><span class="line">    book.setReader(reader);<span class="comment">//放入readers</span></span><br><span class="line">    HashMap&lt;String, String&gt; topics = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    topics.put(<span class="string">&quot;topic1&quot;</span>,<span class="string">&quot;这是我看过最好的动画片&quot;</span>);</span><br><span class="line">    topics.put(<span class="string">&quot;topic2&quot;</span>,<span class="string">&quot;不错的电影&quot;</span>);</span><br><span class="line">    book.setTopics(topics);</span><br><span class="line">    <span class="comment">//把book放入到request域对象</span></span><br><span class="line">    request.setAttribute(<span class="string">&quot;bookkey&quot;</span>,book);</span><br><span class="line">%&gt;</span><br><span class="line">book对象：$&#123;bookkey&#125;&lt;br/&gt;</span><br><span class="line">book.name：$&#123;bookkey.name&#125;&lt;br/&gt;</span><br><span class="line">book.writer：$&#123;bookkey.writer&#125;&lt;br/&gt;</span><br><span class="line">book.writer[<span class="number">0</span>]：$&#123;bookkey.writer[<span class="number">0</span>]&#125;&lt;br/&gt;</span><br><span class="line">book.readers：$&#123;bookkey.reader&#125;&lt;br/&gt;</span><br><span class="line">book.readers第二个：$&#123;bookkey.reader.get(<span class="number">1</span>)&#125;&lt;br/&gt;</span><br><span class="line">book.readers第二个：$&#123;bookkey.reader[<span class="number">1</span>]&#125;&lt;br/&gt;</span><br><span class="line">book.topics：$&#123;bookkey.topics&#125;&lt;br/&gt;</span><br><span class="line">book.topics第一个：$&#123;bookkey.topics[<span class="string">&quot;topic1&quot;</span>]&#125;&lt;br/&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h2 id="EL运算操作符"><a href="#EL运算操作符" class="headerlink" title="EL运算操作符"></a>EL运算操作符</h2><p>语法：${ 运算表达式 }</p>
<h3 id="关系运算"><a href="#关系运算" class="headerlink" title="关系运算"></a>关系运算</h3><p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220314092625286.png" alt="image-20220314092625286"></p>
<h3 id="逻辑运算"><a href="#逻辑运算" class="headerlink" title="逻辑运算"></a>逻辑运算</h3><p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220314092649787.png" alt="image-20220314092649787"></p>
<h3 id="算术运算"><a href="#算术运算" class="headerlink" title="算术运算"></a>算术运算</h3><p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220314092710646.png" alt="image-20220314092710646"></p>
<h2 id="EL的empty运算"><a href="#EL的empty运算" class="headerlink" title="EL的empty运算"></a>EL的empty运算</h2><p>1.empty 运算可以判断一个数据是否为空，如果为空，返回 true，否则返回 false</p>
<p>2.以下几种情况为空</p>
<p>● 值为 null<br>● 值为空串的时<br>● 值是 Object 类型数组，长度为零<br>● list 集合，元素个数为零<br>● map 集合，元素个数为零</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;java.util.ArrayList&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;java.util.HashMap&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;el empty的运算&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;el empty的运算&lt;/h1&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    request.setAttribute(<span class="string">&quot;k1&quot;</span>,<span class="literal">null</span>);</span><br><span class="line">    request.setAttribute(<span class="string">&quot;k2&quot;</span>,<span class="string">&quot;&quot;</span>);</span><br><span class="line">    request.setAttribute(<span class="string">&quot;k3&quot;</span>,<span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;&#125;);</span><br><span class="line">    request.setAttribute(<span class="string">&quot;k4&quot;</span>,<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;());</span><br><span class="line">    request.setAttribute(<span class="string">&quot;k5&quot;</span>,<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, Object&gt;());</span><br><span class="line">%&gt;</span><br><span class="line">k1 是否为空= $&#123;empty k1&#125;&lt;br/&gt;</span><br><span class="line">k2 是否为空= $&#123;empty k2&#125;&lt;br/&gt;</span><br><span class="line">k3 是否为空= $&#123;empty k3&#125;&lt;br/&gt;</span><br><span class="line">k4 是否为空= $&#123;empty k4&#125;&lt;br/&gt;</span><br><span class="line">k5 是否为空= $&#123;empty k5&#125;&lt;br/&gt;</span><br><span class="line">k5 是否为空= $&#123;not empty k5&#125;&lt;br/&gt;  </span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h2 id="EL三元运算"><a href="#EL三元运算" class="headerlink" title="EL三元运算"></a>EL三元运算</h2><p>表达式 1?表达式 2: 表达式 3</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$&#123;score &gt;= <span class="number">60</span> ? <span class="string">&quot;及格&quot;</span>:<span class="string">&quot;不及格&quot;</span>&#125;</span><br></pre></td></tr></table></figure>

<h2 id="EL的11隐含对象"><a href="#EL的11隐含对象" class="headerlink" title="EL的11隐含对象"></a>EL的11隐含对象</h2><p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220314093518792.png" alt="image-20220314093518792"></p>
<h3 id="EL获取四个域数据"><a href="#EL获取四个域数据" class="headerlink" title="EL获取四个域数据"></a>EL获取四个域数据</h3><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;EL 获取四个特定域中的属性&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;EL 获取四个特定域中的属性&lt;/h1&gt;</span><br><span class="line"></span><br><span class="line">&lt;%</span><br><span class="line">    pageContext.setAttribute(<span class="string">&quot;key1&quot;</span>, <span class="string">&quot;pageContext_key1 的值&quot;</span>);</span><br><span class="line">    request.setAttribute(<span class="string">&quot;key1&quot;</span>, <span class="string">&quot;request_key1 的值&quot;</span>);</span><br><span class="line">    session.setAttribute(<span class="string">&quot;key1&quot;</span>, <span class="string">&quot;session_key1 的值&quot;</span>);</span><br><span class="line">    application.setAttribute(<span class="string">&quot;key1&quot;</span>, <span class="string">&quot;application_key1 的值&quot;</span>);</span><br><span class="line">%&gt;</span><br><span class="line">application 的 key1: $&#123;applicationScope.key1 &#125;&lt;br/&gt;</span><br><span class="line">pageContext 的 key1: $&#123;pageScope.key1 &#125;&lt;br/&gt;</span><br><span class="line">session 的 key1: $&#123;sessionScope.key1 &#125;&lt;br/&gt;</span><br><span class="line">request 的 key1: $&#123;requestScope.key1 &#125;&lt;br/&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="pageContext对象"><a href="#pageContext对象" class="headerlink" title="pageContext对象"></a>pageContext对象</h3><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;pageContext 对象的使用&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;pageContext 对象的使用&lt;/h1&gt;</span><br><span class="line">&lt;%--</span><br><span class="line"><span class="comment">//通过 request 对象来获取和 HTTP 协议相关的数据</span></span><br><span class="line">request.getScheme() 它可以获取请求的协议</span><br><span class="line">request.getServerName() 获取请求的服务器 ip 或域名</span><br><span class="line">request.getServerPort() 获取请求的服务器端口号</span><br><span class="line">getContextPath() 获取当前工程路径</span><br><span class="line">request.getMethod() 获取请求的方式（GET 或 POST）</span><br><span class="line">request.getRemoteHost() 获取客户端的 ip 地址</span><br><span class="line">session.getId() 获取会话的唯一标识</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;hr/&gt;</span><br><span class="line">&lt;%--</span><br><span class="line">    <span class="number">1.</span>我们可以通过pageContext.request.xx 俩获取和http协议相关的信息</span><br><span class="line">    <span class="number">2.</span>相当于替代 request.getMethod()....</span><br><span class="line">--%&gt;</span><br><span class="line">协议： $&#123; pageContext.request.scheme &#125;&lt;br&gt;</span><br><span class="line">服务器 ip：$&#123; pageContext.request.serverName &#125;&lt;br&gt;</span><br><span class="line">服务器端口：$&#123; pageContext.request.serverPort &#125;&lt;br&gt;</span><br><span class="line">工程路径：$&#123; pageContext.request.contextPath &#125;&lt;br&gt;</span><br><span class="line">请求方法：$&#123; pageContext.request.method &#125;&lt;br&gt;</span><br><span class="line">客户端 ip 地址：$&#123; pageContext.request.remoteHost &#125;&lt;br&gt;</span><br><span class="line">会话 id ：$&#123; pageContext.session.id &#125;&lt;br&gt;</span><br><span class="line">&lt;h1&gt;使用 jsp 表达式脚本获取如上信息&lt;/h1&gt;</span><br><span class="line">ip 地址: &lt;%=request.getRemoteHost() %&gt; &lt;br&gt;</span><br><span class="line">&lt;h1&gt;使用 el 表达式形式获取信息-简化写法&lt;/h1&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    pageContext.setAttribute(<span class="string">&quot;req&quot;</span>, request);</span><br><span class="line">%&gt;</span><br><span class="line">ip 地址: $&#123;req.remoteHost&#125; &lt;br&gt;</span><br><span class="line">获取请求方法: $&#123;req.method&#125; &lt;br&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<hr>


<h1 id="JSTL-JSP"><a href="#JSTL-JSP" class="headerlink" title="JSTL(JSP)"></a>JSTL(JSP)</h1><h2 id="介绍-14"><a href="#介绍-14" class="headerlink" title="介绍"></a>介绍</h2><ol>
<li>JSTL 标签库 是指 JSP Standard Tag Library JSP 标准标签库</li>
<li>EL 表达式是为了替换 jsp 中的表达式脚本，JSTL 是为了替换代码脚本。这样 jsp 页面<br>变得更佳简洁</li>
<li>JSTL 由五个标签库组成</li>
</ol>
<p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220314100858009.png" alt="image-20220314100858009"></p>
<ol start="4">
<li>使用 JSTL，需要导入相关的 jar 包</li>
</ol>
<p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220314100923734.png" alt="image-20220314100923734"></p>
<h2 id="快速入门-1"><a href="#快速入门-1" class="headerlink" title="快速入门"></a>快速入门<a id="jstlksrm"></a></h2><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;%<span class="meta">@taglib</span> prefix=<span class="string">&quot;c&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;jstl的快速入门&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;jstl的快速入门&lt;/h1&gt;</span><br><span class="line">&lt;%--</span><br><span class="line">    <span class="number">1.</span> c:<span class="keyword">if</span> 类似</span><br><span class="line">    <span class="number">2.</span> <span class="keyword">if</span>(<span class="number">10</span>&gt;<span class="number">2</span>)&#123;</span><br><span class="line">        out.println(<span class="string">&quot;&lt;h1&gt;10 &gt; 2 成立~ &lt;/h1&gt;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;c:<span class="keyword">if</span> test=<span class="string">&quot;$&#123;10 &gt; 2&#125;&quot;</span>&gt;</span><br><span class="line">    &lt;h1&gt;<span class="number">10</span> &gt; <span class="number">2</span> 成立~ &lt;/h1&gt;</span><br><span class="line">&lt;/c:<span class="keyword">if</span>&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>细节</p>
<p>● taglib 引入标签，要放在行首<br>● 导入 jstl jar 包后，要重新发布 web 工程，否则不识别 jstl</p>
<h2 id="Core核心库"><a href="#Core核心库" class="headerlink" title="Core核心库"></a>Core核心库</h2><h3 id="lt-c-set-x2F-gt"><a href="#lt-c-set-x2F-gt" class="headerlink" title="&lt;c:set &#x2F;&gt;"></a>&lt;c:set &#x2F;&gt;</h3><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;%<span class="meta">@taglib</span> prefix=<span class="string">&quot;c&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;c:set标签的使用&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;c:set标签的使用&lt;/h1&gt;</span><br><span class="line">&lt;%--</span><br><span class="line">    <span class="comment">//Java代码</span></span><br><span class="line">    request.setAttribute(<span class="string">&quot;email&quot;</span>, <span class="string">&quot;hsp@sohu.com&quot;</span>);</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%--</span><br><span class="line">    &lt;c:set /&gt; set 标签可以往域中保存数据</span><br><span class="line">    <span class="number">1.</span> 等价 域对象.setAttribute(key,value);</span><br><span class="line">    <span class="number">2.</span> scope 属性设置保存到哪个域</span><br><span class="line">            page 表示 PageContext 域（默认值）</span><br><span class="line">            request 表示 Request 域</span><br><span class="line">            session 表示 Session 域</span><br><span class="line">            application 表示 ServletContext 域</span><br><span class="line">    <span class="number">3.</span> <span class="keyword">var</span> 属性设置 key 是什么</span><br><span class="line">    <span class="number">4.</span> value 属性设置值</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;c:set scope=<span class="string">&quot;request&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;name&quot;</span> value=<span class="string">&quot;LiAng&quot;</span>&gt;&lt;/c:set&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="lt-c-if-x2F-gt"><a href="#lt-c-if-x2F-gt" class="headerlink" title="&lt;c:if &#x2F;&gt;"></a>&lt;c:if &#x2F;&gt;</h3><p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220314104734614.png" alt="image-20220314104734614"></p>
<p>代码见 <a href="#jstlksrm">快速入门</a></p>
<h3 id="lt-c-choose-gt-lt-c-when-gt-lt-c-otherwise-gt-标签"><a href="#lt-c-choose-gt-lt-c-when-gt-lt-c-otherwise-gt-标签" class="headerlink" title="&lt;c:choose&gt; &lt;c:when&gt; &lt;c:otherwise&gt;标签"></a>&lt;c:choose&gt; &lt;c:when&gt; &lt;c:otherwise&gt;标签</h3><p>介绍：多路判断。跟 switch … case …. default 非常接近</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">&quot;c&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;c:choose标签的使用&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;c:choose标签的使用&lt;/h1&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    request.setAttribute(<span class="string">&quot;score&quot;</span>,<span class="number">90</span>);</span><br><span class="line">    <span class="comment">//request.setAttribute(&quot;k1&quot;, &quot;request-k1的值&quot;);</span></span><br><span class="line">    <span class="comment">//session.setAttribute(&quot;k1&quot;, &quot;session-k1的值&quot;);</span></span><br><span class="line">    <span class="comment">//application.setAttribute(&quot;k1&quot;, &quot;application-k1的值&quot;);</span></span><br><span class="line">    <span class="comment">//pageContext.setAttribute(&quot;k1&quot;, &quot;pageContext-k1的值~&quot;);</span></span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">&lt;%--</span><br><span class="line"><span class="number">1.</span> 如果$&#123;requestScope.score&#125; 那么就明确的指定从request域对象取出数据</span><br><span class="line"><span class="number">2.</span> 如果$&#123;score&#125;, 这是就按照从小到大的域范围去获取 pageContext-&gt;request-&gt;session-&gt;application</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;c:choose&gt;</span><br><span class="line">    &lt;c:when test=<span class="string">&quot;$&#123;requestScope.score &gt; 80&#125;&quot;</span>&gt;</span><br><span class="line">        &lt;h1&gt;$&#123;score&#125;-成绩优秀&lt;/h1&gt;</span><br><span class="line">    &lt;/c:when&gt;</span><br><span class="line">    &lt;c:when test=<span class="string">&quot;$&#123;requestScope.score &gt;= 60&#125;&quot;</span>&gt;</span><br><span class="line">        &lt;h1&gt;$&#123;score&#125;-成绩一般, 及格了&lt;/h1&gt;</span><br><span class="line">    &lt;/c:when&gt;</span><br><span class="line">    &lt;c:otherwise&gt;</span><br><span class="line">        &lt;h1&gt;$&#123;score&#125;-没有及格，下次努力~&lt;/h1&gt;</span><br><span class="line">    &lt;/c:otherwise&gt;</span><br><span class="line">&lt;/c:choose&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="lt-c-forEach-x2F-gt"><a href="#lt-c-forEach-x2F-gt" class="headerlink" title="&lt;c:forEach &#x2F;&gt;"></a>&lt;c:forEach &#x2F;&gt;</h3><p>介绍: c:forEach 标签 用来遍历输出, 主要有 4 种形式</p>
<p> ● 普通遍历输出 i 到 j<br> ● 遍历数组<br> ● 遍历 Map<br> ● 遍历 List</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;java.util.Map&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;java.util.HashMap&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;java.util.ArrayList&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;java.util.List&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;com.lzw.entity.Monster&quot;</span> %&gt;</span><br><span class="line"></span><br><span class="line">&lt;%<span class="meta">@taglib</span> prefix=<span class="string">&quot;c&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;c:forEach 标签&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;c:forEach 标签&lt;/h1&gt;</span><br><span class="line">&lt;hr/&gt;</span><br><span class="line">&lt;h1&gt;第<span class="number">1</span>种遍历方式从i到j&lt;/h1&gt;</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">    &lt;%--</span><br><span class="line">    <span class="number">1.</span>遍历 <span class="number">1</span> 到 <span class="number">5</span>，</span><br><span class="line">    <span class="number">2.</span> 输出 begin 属性设置开始的索引 end 属性设置结束的索引</span><br><span class="line">    <span class="number">3.</span> <span class="keyword">var</span> 属性表示循环的变量(也是当前正在遍历到的数据)</span><br><span class="line">    <span class="number">4.</span> 等价 <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">5</span>; i++) &#123;&#125;</span><br><span class="line">    <span class="number">5.</span> 在默认情况下, i 每次会递增<span class="number">1</span></span><br><span class="line">    --%&gt;</span><br><span class="line">    &lt;c:forEach begin=<span class="string">&quot;1&quot;</span> end=<span class="string">&quot;5&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;i&quot;</span>&gt;</span><br><span class="line">        &lt;li&gt;排名=$&#123;i&#125;&lt;/li&gt;</span><br><span class="line">    &lt;/c:forEach&gt;</span><br><span class="line">&lt;/ul&gt;</span><br><span class="line">&lt;hr/&gt;</span><br><span class="line">&lt;h1&gt;第<span class="number">2</span>种遍历方式：遍历数组&lt;/h1&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    request.setAttribute(<span class="string">&quot;sports&quot;</span>, <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;打篮球&quot;</span>, <span class="string">&quot;乒乓球&quot;</span>&#125;);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;%--</span><br><span class="line">    &lt;c:forEach items=<span class="string">&quot;$&#123; requestScope.sports &#125;&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;item&quot;</span>/&gt;</span><br><span class="line">    <span class="number">1.</span> items 遍历的集合/数组</span><br><span class="line">    <span class="number">2.</span> <span class="keyword">var</span> 遍历到的数据</span><br><span class="line">    <span class="number">3.</span> 等价 <span class="keyword">for</span> (Object item: arr) &#123;&#125;</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;c:forEach items=<span class="string">&quot;$&#123;requestScope.sports&#125;&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;sport&quot;</span>&gt;</span><br><span class="line">    运动名称= $&#123;sport&#125;&lt;br/&gt;</span><br><span class="line">&lt;/c:forEach&gt;</span><br><span class="line">&lt;hr/&gt;</span><br><span class="line">&lt;h1&gt;第<span class="number">3</span>种遍历方式：遍历Map&lt;/h1&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    Map&lt;String, Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    map.put(<span class="string">&quot;key1&quot;</span>, <span class="string">&quot;北京&quot;</span>);</span><br><span class="line">    map.put(<span class="string">&quot;key2&quot;</span>, <span class="string">&quot;上海&quot;</span>);</span><br><span class="line">    map.put(<span class="string">&quot;key3&quot;</span>, <span class="string">&quot;天津&quot;</span>);</span><br><span class="line">    request.setAttribute(<span class="string">&quot;cities&quot;</span>, map);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;%--</span><br><span class="line">    <span class="number">1.</span> items 遍历的map集合</span><br><span class="line">    <span class="number">2.</span> <span class="keyword">var</span> 遍历到的数据</span><br><span class="line">    <span class="number">3.</span> entry.key 取出key</span><br><span class="line">    <span class="number">4.</span> entry.value 取出值</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;c:forEach items=<span class="string">&quot;$&#123;requestScope.cities&#125;&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;city&quot;</span>&gt;</span><br><span class="line">    城市信息: $&#123;city.key&#125;--$&#123;city.value&#125;&lt;br/&gt;</span><br><span class="line">&lt;/c:forEach&gt;</span><br><span class="line">&lt;hr/&gt;</span><br><span class="line">&lt;h1&gt;第<span class="number">4</span>种遍历方式：遍历List&lt;/h1&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    List&lt;Monster&gt; monsters = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    monsters.add(<span class="keyword">new</span> <span class="title class_">Monster</span>(<span class="number">100</span>, <span class="string">&quot;小妖怪&quot;</span>, <span class="string">&quot;巡山的&quot;</span>));</span><br><span class="line">    monsters.add(<span class="keyword">new</span> <span class="title class_">Monster</span>(<span class="number">200</span>, <span class="string">&quot;大妖怪&quot;</span>, <span class="string">&quot;做饭的&quot;</span>));</span><br><span class="line">    monsters.add(<span class="keyword">new</span> <span class="title class_">Monster</span>(<span class="number">300</span>, <span class="string">&quot;老妖怪&quot;</span>, <span class="string">&quot;打扫位置的&quot;</span>));</span><br><span class="line">    request.setAttribute(<span class="string">&quot;monsters&quot;</span>, monsters);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;%--</span><br><span class="line">    items 表示遍历的集合</span><br><span class="line">    <span class="keyword">var</span> 表示遍历到的数据</span><br><span class="line">    begin 表示遍历的开始索引值 ,从<span class="number">0</span>开始计算</span><br><span class="line">    end 表示结束的索引值</span><br><span class="line">    step 属性表示遍历的步长值</span><br><span class="line">    varStatus 属性表示当前遍历到的数据的状态,可以得到step,begin,end等属性值</span><br><span class="line">    <span class="comment">//老师提示, 对于jstl标签，能看懂，会使用即可</span></span><br><span class="line">--%&gt;</span><br><span class="line">&lt;c:forEach items=<span class="string">&quot;$&#123;requestScope.monsters&#125;&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;monster&quot;</span>&gt;</span><br><span class="line">    妖怪的信息: $&#123;monster.id&#125;-$&#123;monster.name&#125;-$&#123;monster.skill&#125;&lt;br/&gt;</span><br><span class="line">&lt;/c:forEach&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<hr>


<h1 id="三大组件-Listener监听器"><a href="#三大组件-Listener监听器" class="headerlink" title="三大组件-Listener监听器"></a>三大组件-Listener监听器</h1><h2 id="介绍-15"><a href="#介绍-15" class="headerlink" title="介绍"></a>介绍</h2><ol>
<li><p>Listener 监听器它是 JavaWeb 的三大组件之一。JavaWeb 的三大组件分别是：Servlet 程序、Listener 监听器、Filter 过滤器</p>
</li>
<li><p>Listener 是 JavaEE 的规范，就是接口</p>
</li>
<li><p>监听器的作用是，监听某种变化(一般就是对象创建&#x2F;销毁, 属性变化), 触发对应方法完成相应的任务</p>
</li>
<li><p>JavaWeb 中的监听器（共八个）, 目前最常用的是 ServletContextListener。</p>
</li>
</ol>
<h2 id="ServletContextListener-监听器"><a href="#ServletContextListener-监听器" class="headerlink" title="ServletContextListener 监听器"></a>ServletContextListener 监听器</h2><h3 id="作用-3"><a href="#作用-3" class="headerlink" title="作用"></a>作用</h3><p>监听 ServletContext 创建或销毁(当我们 Web 应用启动时，就会创建 ServletContext)，即生命周期监听，</p>
<p>应用场景(1)加载初始化的配置文件；比如 spring 的配置文件 ；(2)任务调度（配合定时器 Timer&#x2F;TimerTask)</p>
<h3 id="相关方法"><a href="#相关方法" class="headerlink" title="相关方法"></a>相关方法</h3><p>void contextInitialized(ServletContextEvent sce) 创建 Servletcontext 时触发</p>
<p>void contextDestroyed(ServletContextEvent sce) 销毁 Servletcontext 时</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.listener;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContext;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContextEvent;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContextListener;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 1. 当一个类实现了 ServletContextListener</span></span><br><span class="line"><span class="comment"> * 2. 该类就是一个监听器</span></span><br><span class="line"><span class="comment"> * 3. 该类可以监听的事件 由该类实现的监听接口决定，比如实现了 ServletContextListener</span></span><br><span class="line"><span class="comment"> *    ，则该类就可以监听 ServletContext对象的创建和销毁，以此类推</span></span><br><span class="line"><span class="comment"> * 4. LzwServletContextListener 就是一个监听者</span></span><br><span class="line"><span class="comment"> * 5. 当web应用启动时，就会产生 ServletContextEvent 事件，会调用监听器的对应事件处理方法</span></span><br><span class="line"><span class="comment"> *    contextInitialized，同时会传递 事件对象</span></span><br><span class="line"><span class="comment"> * 6. 程序员可以通过 ServletContextEvent 事件对象，来获取需要的信息，然后再进行业务处理</span></span><br><span class="line"><span class="comment"> * 7. tomcat 怎么知道这个监听器存在？ 因为需要在web.xml中配置</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LzwServletContextListener</span> <span class="keyword">implements</span> <span class="title class_">ServletContextListener</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">contextInitialized</span><span class="params">(ServletContextEvent servletContextEvent)</span> &#123;</span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> servletContextEvent.getServletContext();</span><br><span class="line">        System.out.println(<span class="string">&quot;LzwServletContextListener 监听到 &quot;</span> +</span><br><span class="line">                servletContext + <span class="string">&quot; 被创建&quot;</span>);</span><br><span class="line">        <span class="comment">//如果我们获取到 ServletContext 对象。。 进行业务处理</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">contextDestroyed</span><span class="params">(ServletContextEvent servletContextEvent)</span> &#123;</span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> servletContextEvent.getServletContext();</span><br><span class="line">        System.out.println(<span class="string">&quot;LzwServletContextListener 监听到 &quot;</span> +</span><br><span class="line">                servletContext + <span class="string">&quot; 被销毁&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//比如可以对 ServletContext 数据进行处理，或日志的管理</span></span><br><span class="line">        System.out.println(<span class="string">&quot;进行处理工作&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配置监听器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>com.lzw.listener.LzwServletContextListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="ServletContextAttributeListener-监听器"><a href="#ServletContextAttributeListener-监听器" class="headerlink" title="ServletContextAttributeListener 监听器"></a>ServletContextAttributeListener 监听器</h2><h3 id="作用-4"><a href="#作用-4" class="headerlink" title="作用"></a>作用</h3><p>监听 ServletContext 属性变化</p>
<h3 id="相关方法-1"><a href="#相关方法-1" class="headerlink" title="相关方法"></a>相关方法</h3><p>void attributeAdded(ServletContextAttributeEvent event) 添加属性时调用</p>
<p>void attributeReplaced(ServletContextAttributeEvent event) 替换属性时调用</p>
<p>void attributeRemoved(ServletContextAttributeEvent event) 移除属性时调用</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.listener;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContextAttributeEvent;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContextAttributeListener;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LzwServletContextAttributeListener</span> <span class="keyword">implements</span> <span class="title class_">ServletContextAttributeListener</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">attributeAdded</span><span class="params">(ServletContextAttributeEvent servletContextAttributeEvent)</span> &#123;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;LzwServletContextAttributeListener 监听到添加属性&quot;</span> +</span><br><span class="line">               servletContextAttributeEvent.getName() + <span class="string">&quot;=&quot;</span> + servletContextAttributeEvent.getValue());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">attributeRemoved</span><span class="params">(ServletContextAttributeEvent servletContextAttributeEvent)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;LzwServletContextAttributeListener 监听到删除属性&quot;</span> +</span><br><span class="line">                servletContextAttributeEvent.getName() + <span class="string">&quot;=&quot;</span> + servletContextAttributeEvent.getValue());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">attributeReplaced</span><span class="params">(ServletContextAttributeEvent servletContextAttributeEvent)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;LzwServletContextAttributeListener 监听到修改属性&quot;</span> +</span><br><span class="line">                servletContextAttributeEvent.getName() + <span class="string">&quot;=&quot;</span> + servletContextAttributeEvent.getValue());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContext;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HiServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//给servletContext 对象操作属性</span></span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> request.getServletContext();</span><br><span class="line">        servletContext.setAttribute(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;Lzw&quot;</span>);</span><br><span class="line">        servletContext.setAttribute(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;LiAng&quot;</span>);</span><br><span class="line">        servletContext.removeAttribute(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;HiServlet 处理完毕&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="其他监听器-使用较少"><a href="#其他监听器-使用较少" class="headerlink" title="其他监听器-使用较少"></a>其他监听器-使用较少</h2><h3 id="HttpSessionListener-监听器"><a href="#HttpSessionListener-监听器" class="headerlink" title="HttpSessionListener 监听器"></a>HttpSessionListener 监听器</h3><h4 id="作用-5"><a href="#作用-5" class="headerlink" title="作用"></a>作用</h4><p>监听 Session 创建或销毁，即生命周期监听</p>
<h4 id="相关方法-2"><a href="#相关方法-2" class="headerlink" title="相关方法"></a>相关方法</h4><p>void sessionCreated(HttpSessionEvent se) 创建 session 时调用 </p>
<p>void sessionDestroyed(HttpSessionEvent se) 销毁 session 时调用</p>
<p>使用方法和前面一样, 可以用于监控用户上线，离线</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.listener;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSessionEvent;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSessionListener;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LzwHttpSessionListener</span> <span class="keyword">implements</span> <span class="title class_">HttpSessionListener</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sessionCreated</span><span class="params">(HttpSessionEvent httpSessionEvent)</span> &#123;</span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> httpSessionEvent.getSession();</span><br><span class="line">        <span class="comment">//当session创建时，给它设置一个生命周期</span></span><br><span class="line">        session.setMaxInactiveInterval(<span class="number">5</span>);<span class="comment">//5秒</span></span><br><span class="line">        System.out.println(<span class="string">&quot;LzwHttpSessionListener 监听到 session创建=&quot;</span> + session.getId());</span><br><span class="line">        System.out.println(<span class="string">&quot;用户id=&quot;</span> + session.getId() + <span class="string">&quot; 上线&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sessionDestroyed</span><span class="params">(HttpSessionEvent httpSessionEvent)</span> &#123;</span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> httpSessionEvent.getSession();</span><br><span class="line">        System.out.println(<span class="string">&quot;LzwHttpSessionListener 监听到 session销毁=&quot;</span> + session.getId());</span><br><span class="line">        System.out.println(<span class="string">&quot;用户id=&quot;</span> + session.getId() + <span class="string">&quot; 离线&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="HttpSessionAttributeListener-监听器"><a href="#HttpSessionAttributeListener-监听器" class="headerlink" title="HttpSessionAttributeListener 监听器"></a>HttpSessionAttributeListener 监听器</h3><h4 id="作用-6"><a href="#作用-6" class="headerlink" title="作用"></a>作用</h4><p>监听 Session 属性的变化</p>
<h4 id="相关方法-3"><a href="#相关方法-3" class="headerlink" title="相关方法"></a>相关方法</h4><p>void attributeAdded(ServletRequestAttributeEvent srae) 添加属性时</p>
<p>void attributeReplaced(ServletRequestAttributeEvent srae) 替换属性时</p>
<p>void attributeRemoved(ServletRequestAttributeEvent srae) 移除属性时</p>
<h3 id="ServletRequestListener-监听器"><a href="#ServletRequestListener-监听器" class="headerlink" title="ServletRequestListener 监听器"></a>ServletRequestListener 监听器</h3><h4 id="作用-7"><a href="#作用-7" class="headerlink" title="作用"></a>作用</h4><p>监听 Request 创建或销毁，即 Request 生命周期监听</p>
<h4 id="相关方法-4"><a href="#相关方法-4" class="headerlink" title="相关方法"></a>相关方法</h4><p>void requestInitialized(ServletRequestEvent sre) 创建 request 时</p>
<p>void requestDestroyed(ServletRequestEvent sre) 销毁 request 时</p>
<p>可以用来监控, 某个 IP 访问我们网站的频率, 日志记录 ,访问资源的情况</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.listener;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletRequestEvent;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletRequestListener;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LzwRequestListener</span> <span class="keyword">implements</span> <span class="title class_">ServletRequestListener</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">requestInitialized</span><span class="params">(ServletRequestEvent servletRequestEvent)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;LzwRequestListener 监听到 request对象创建&quot;</span>);</span><br><span class="line">        <span class="type">ServletRequest</span> <span class="variable">servletRequest</span> <span class="operator">=</span> servletRequestEvent.getServletRequest();</span><br><span class="line">        System.out.println(<span class="string">&quot;记录访问日志&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;访问IP = &quot;</span> + servletRequest.getRemoteAddr());</span><br><span class="line">        System.out.println(<span class="string">&quot;访问的资源 = &quot;</span> + ((HttpServletRequest)servletRequest).getRequestURL());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">requestDestroyed</span><span class="params">(ServletRequestEvent servletRequestEvent)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;LzwRequestListener 监听到 request对象销毁&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ServletRequestAttributeListener-监听器"><a href="#ServletRequestAttributeListener-监听器" class="headerlink" title="ServletRequestAttributeListener 监听器"></a>ServletRequestAttributeListener 监听器</h3><h4 id="作用-8"><a href="#作用-8" class="headerlink" title="作用"></a>作用</h4><p>监听 Request 属性变化</p>
<h4 id="相关方法-5"><a href="#相关方法-5" class="headerlink" title="相关方法"></a>相关方法</h4><p>void attributeAdded(ServletRequestAttributeEvent srae) 添加属性时</p>
<p>void attributeReplaced(ServletRequestAttributeEvent srae) 替换属性时</p>
<p>void attributeRemoved(ServletRequestAttributeEvent srae)移除属性时</p>
<h3 id="HttpSessionBindingListener-感知监听器"><a href="#HttpSessionBindingListener-感知监听器" class="headerlink" title="HttpSessionBindingListener 感知监听器"></a>HttpSessionBindingListener 感知监听器</h3><h4 id="作用-9"><a href="#作用-9" class="headerlink" title="作用"></a>作用</h4><p>绑定Session中的数据（对象）</p>
<h3 id="HttpSessionActivationListener-感知监听器"><a href="#HttpSessionActivationListener-感知监听器" class="headerlink" title="HttpSessionActivationListener 感知监听器"></a>HttpSessionActivationListener 感知监听器</h3><h4 id="作用-10"><a href="#作用-10" class="headerlink" title="作用"></a>作用</h4><p>Session绑定的对象在钝化（把对象持久化到磁盘）之前监听到。（和上面的 HttpSessionBindingListener 是一对）</p>
<hr>


<h1 id="三大组件-Filter过滤器"><a href="#三大组件-Filter过滤器" class="headerlink" title="三大组件-Filter过滤器"></a>三大组件-Filter过滤器</h1><p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220316193247406.png" alt="image-20220316193247406"></p>
<h2 id="介绍-16"><a href="#介绍-16" class="headerlink" title="介绍"></a>介绍</h2><ol>
<li><p>Filter 过滤器它是 JavaWeb 的三大组件之一(Servlet 程序、Listener 监听器、Filter 过滤器)</p>
</li>
<li><p>Filter 过滤器是 JavaEE 的规范，是接口</p>
<p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220316193401481.png" alt="image-20220316193401481"></p>
</li>
<li><p>Filter 过滤器它的作用是：拦截请求，过滤响应。</p>
</li>
<li><p>应用场景<br>● 权限检查<br>● 日记操作<br>● 事务管理</p>
</li>
</ol>
<h2 id="基本原理"><a href="#基本原理" class="headerlink" title="基本原理"></a>基本原理</h2><p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220316193546561.png" alt="image-20220316193546561"></p>
<h2 id="快速入门-2"><a href="#快速入门-2" class="headerlink" title="快速入门"></a>快速入门</h2><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;管理后台登录&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;管理后台登录&lt;/h1&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    System.out.println(<span class="string">&quot;request=&quot;</span> + request);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;form action=<span class="string">&quot;&lt;%=request.getContextPath() %&gt;/loginCheckServlet&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    u：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span>/&gt; &lt;br/&gt;&lt;br/&gt;</span><br><span class="line">    p：&lt;input type=<span class="string">&quot;password&quot;</span> name=<span class="string">&quot;password&quot;</span>/&gt; &lt;br/&gt;&lt;br/&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;用户登录&quot;</span>/&gt;&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginCheckServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//获取到用户名和密码</span></span><br><span class="line">        <span class="comment">//假设密码是 123456 就可以通过</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;123456&quot;</span>.equals(password))&#123;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//合法，请求转发到admin.jsp</span></span><br><span class="line">            request.getSession().setAttribute(<span class="string">&quot;username&quot;</span>, username);</span><br><span class="line">            request.getRequestDispatcher(<span class="string">&quot;/manage/admin.jsp&quot;</span>).forward(request, response);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">//返回登录界面</span></span><br><span class="line">            request.getRequestDispatcher(<span class="string">&quot;/login.jsp&quot;</span>).forward(request, response);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;后台管理&lt;/title&gt;</span><br><span class="line">    &lt;base href=<span class="string">&quot;&lt;%=request.getContextPath() %&gt;/manage/&quot;</span>/&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;后台管理&lt;/h1&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    <span class="comment">//验证request对象是和前面的filter是一个对象</span></span><br><span class="line">    System.out.println(<span class="string">&quot;request=&quot;</span> + request);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;#&quot;</span>&gt;用户列表&lt;/a&gt;||&lt;a href=<span class="string">&quot;#&quot;</span>&gt;添加用户&lt;/a&gt;||&lt;a href=<span class="string">&quot;#&quot;</span>&gt;删除用户&lt;/a&gt;</span><br><span class="line">&lt;hr/&gt;</span><br><span class="line">&lt;img src=<span class="string">&quot;shunping.jpg&quot;</span> height=<span class="string">&quot;300&quot;</span>/&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.filter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ManagerFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">        <span class="comment">//当Tomcat 创建 Filter 后，就会调用该方法，进行初始化</span></span><br><span class="line">        System.out.println(<span class="string">&quot;ManagerFilter init被调用...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">        <span class="comment">//当每次调用该filter时，doFilter就会被调用</span></span><br><span class="line">        System.out.println(<span class="string">&quot;ManagerFilter doFilter 被调用...&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//如果继续访问目标资源</span></span><br><span class="line">        <span class="comment">//在调用过滤器前，request对象已经被创建并封装</span></span><br><span class="line">        <span class="comment">//所以，我们这里可以通过 servletRequest 对象获取很多信息，比如访问url，session，参数</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取到session</span></span><br><span class="line">        <span class="type">HttpServletRequest</span> <span class="variable">httpServletRequest</span> <span class="operator">=</span> (HttpServletRequest)servletRequest;</span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> httpServletRequest.getSession();</span><br><span class="line">        <span class="comment">//获取username session 对象，还可以继续使用</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">username</span> <span class="operator">=</span> session.getAttribute(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(username != <span class="literal">null</span>)&#123;</span><br><span class="line">            filterChain.doFilter(servletRequest, servletResponse);</span><br><span class="line">            <span class="comment">//1. 继续访问目标资源url</span></span><br><span class="line">            <span class="comment">//2. servletRequest 和 servletResponse 对象会传递给目标资源/文件</span></span><br><span class="line">            <span class="comment">//3. 一定要理解filter传递的两个对象，再后面的servlet/jsp 是同一个对象(指的是在一次http请求)</span></span><br><span class="line">            System.out.println(<span class="string">&quot;servletRequest=&quot;</span> + servletRequest);</span><br><span class="line">            System.out.println(<span class="string">&quot;日志信息==&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;访问的用户名=&quot;</span> + username.toString());</span><br><span class="line">            System.out.println(<span class="string">&quot;访问的url=&quot;</span> + httpServletRequest.getRequestURL());</span><br><span class="line">            System.out.println(<span class="string">&quot;访问的IP=&quot;</span> + httpServletRequest.getRemoteAddr());</span><br><span class="line">            filterChain.doFilter(servletRequest, servletResponse);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;<span class="comment">//说明没有登录过</span></span><br><span class="line">            servletRequest.getRequestDispatcher(<span class="string">&quot;/login.jsp&quot;</span>).forward(servletRequest, servletResponse);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//当filter被销毁时，会调用该方法</span></span><br><span class="line">        System.out.println(<span class="string">&quot;ManagerFilter destroy 被调用...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--Filter 一般写在其他servlet的前面</span></span><br><span class="line"><span class="comment">        1. filter配置和servlet配置非常相似，filter也是被tomcat管理和维护</span></span><br><span class="line"><span class="comment">        2. url-pattern 就是当请求的url 匹配的时候，就会调用 filter</span></span><br><span class="line"><span class="comment">        3. /manage/* 第一个/ 解析成 http://ip:port/工程路径</span></span><br><span class="line"><span class="comment">        4. 完整的路径就是 http://ip:port/工程路径/manage/* 当请求的资源url满足该条件时</span></span><br><span class="line"><span class="comment">        都会调用 filter</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>ManageFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>com.lzw.filter.ManagerFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>ManageFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/manage/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>LoginCheckServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.lzw.servlet.LoginCheckServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>LoginCheckServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/loginCheckServlet<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="url-pattern"><a href="#url-pattern" class="headerlink" title="url-pattern"></a>url-pattern</h2><p>1、url-pattern : Filter 的拦截路径, 即浏览器在请求什么位置的资源时，过滤器会进行拦截过滤</p>
<p>2.、精确匹配 <url-pattern>&#x2F;a.jsp</url-pattern> 对应的 请求地址 <a href="http://ip[域名]:port/工程路径/a.jsp">http://ip[域名]:port/工程路径/a.jsp</a> 会拦截</p>
<p>3、目录匹配 <url-pattern>&#x2F;manage&#x2F; * </url-pattern>对应的 请求地址 <a href="http://ip[域名]:port/工程路径/manage/xx">http://ip[域名]:port/工程路径/manage/xx</a> , 即 web 工程 manage 目录下所有资源 会拦截</p>
<p>4、后缀名匹配 <url-pattern>*.jsp</url-pattern> 后缀名可变，比如 *.action *.do 等等对应的请求地址 <a href="http://ip[域名]:port/">http://ip[域名]:port/</a></p>
<p>工程路径&#x2F;xx.jsp , 后缀名为 .jsp 请求会拦截</p>
<p>5、Filter 过滤器它只关心请求的地址是否匹配，不关心请求的资源是否存在</p>
<h2 id="Filter生命周期"><a href="#Filter生命周期" class="headerlink" title="Filter生命周期"></a>Filter生命周期</h2><p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220316223355873.png" alt="image-20220316223355873"></p>
<p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220316224358294.png" alt="image-20220316224358294"></p>
<h2 id="FilterConfig"><a href="#FilterConfig" class="headerlink" title="FilterConfig"></a>FilterConfig</h2><p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220317092159390.png" alt="image-20220317092159390"></p>
<h3 id="介绍-17"><a href="#介绍-17" class="headerlink" title="介绍"></a>介绍</h3><ol>
<li>FilterConfig 是 Filter 过滤器的配置类</li>
<li>Tomcat 每次创建 Filter 的时候，也会创建一个 FilterConfig 对象，这里包含了 Filter 配置文件的配置信息。</li>
<li>FilterConfig 对象作用是获取 filter 过滤器的配置内容</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>LzwFilterConfig<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>com.lzw.filter.LzwFilterConfig<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--这里就是该filter配置的参数-由程序员根据业务逻辑来设置--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>ip<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>127.0<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>port<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>8888<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>LzwFilterConfig<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/abc/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.filter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.Enumeration;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//演示FilterConfig使用</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LzwFilterConfig</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String ip;<span class="comment">//从配置获取的ip</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">        <span class="comment">//通过FilterConfig 获取相关的参数</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">filterName</span> <span class="operator">=</span> filterConfig.getFilterName();</span><br><span class="line">        ip = filterConfig.getInitParameter(<span class="string">&quot;ip&quot;</span>);</span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> filterConfig.getServletContext();</span><br><span class="line">        <span class="comment">//可以获取到该filter所有的配置参数名</span></span><br><span class="line">        Enumeration&lt;String&gt; initParameterNames = filterConfig.getInitParameterNames();</span><br><span class="line">        <span class="comment">//遍历枚举</span></span><br><span class="line">        <span class="keyword">while</span>(initParameterNames.hasMoreElements())&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;名字 = &quot;</span> + initParameterNames.nextElement());</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;filterName = &quot;</span> + filterName);</span><br><span class="line">        System.out.println(<span class="string">&quot;ip = &quot;</span> + ip);</span><br><span class="line">        System.out.println(<span class="string">&quot;servletContext = &quot;</span> + servletContext);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//通过 forbidden ip 来进行控制 </span></span><br><span class="line">        <span class="comment">//先获取到访问ip</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">remoteAddr</span> <span class="operator">=</span> servletRequest.getRemoteAddr();</span><br><span class="line">        <span class="keyword">if</span>(remoteAddr.contains(ip)) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;封杀该网段..&quot;</span>);</span><br><span class="line">            servletRequest.getRequestDispatcher(<span class="string">&quot;/login.jsp&quot;</span>).forward(servletRequest, servletResponse);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//继续访问目标资源</span></span><br><span class="line">        filterChain.doFilter(servletRequest, servletResponse);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="FilterChain"><a href="#FilterChain" class="headerlink" title="FilterChain"></a>FilterChain</h2><h3 id="介绍-18"><a href="#介绍-18" class="headerlink" title="介绍"></a>介绍</h3><p>在处理某些复杂业务时，一个过滤器不够，可以设计多个过滤器共同完成过滤任务，形成过滤器链。</p>
<p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220317172211618.png" alt="image-20220317172211618"></p>
<h3 id="应用实例-8"><a href="#应用实例-8" class="headerlink" title="应用实例"></a>应用实例</h3><p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220317172314023.png" alt="image-20220317172314023"></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>AFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>com.lzw.filter.AFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>AFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/admin/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>BFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>com.lzw.filter.BFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>BFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/admin/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.filter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;AFilter doFilter 的前置代码...&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;开始执行 AFilter 的 doFilter()&quot;</span>);</span><br><span class="line">        filterChain.doFilter(servletRequest,servletResponse);</span><br><span class="line">        System.out.println(<span class="string">&quot;AFilter doFilter 的后置代码...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.filter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;BFilter doFilter 的前置代码...&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;开始执行 BFilter 的 doFilter()&quot;</span>);</span><br><span class="line">        filterChain.doFilter(servletRequest,servletResponse);</span><br><span class="line">        System.out.println(<span class="string">&quot;BFilter doFilter 的后置代码...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="注意事项和细节-5"><a href="#注意事项和细节-5" class="headerlink" title="注意事项和细节"></a>注意事项和细节</h3><ol>
<li>多个 filter 和目标资源在一次 http 请求，在同一个线程中</li>
<li>当一个请求 url 和 filter 的 url-pattern 匹配时, 才会被执行, 如果有多个匹配上，就会顺序执行，形成一个 filter 调用链(底层可以使用一个数据结构搞定)</li>
<li>多个 filter 共同执行时,因为是一次 http 请求, 使用同一个 request 对象</li>
<li>多个 filter 执行顺序，和 web.xml 配置顺序保持一致. </li>
<li>chain.doFilter(req, resp)方法 将执行下一个过滤器的 doFilter 方法, 如果后面没有过滤器，则执行目标资源。</li>
<li>小结：注意执行过滤器链时, 顺序是(用前面的案例分析) Http请求 -&gt; A 过滤器 dofilter()-&gt; A 过滤器前置代码 -&gt; A 过滤器 chain.doFilter() -&gt; B 过滤器 dofilter() -&gt; B 过滤器前置代码 -&gt; B过滤器 chain.doFilter() -&gt; 目标文件 -&gt; B过滤器后置代码 -&gt; A过滤器后置代码 -&gt;返回给浏览器页面&#x2F;数据</li>
</ol>
<hr>

<h1 id="Json"><a href="#Json" class="headerlink" title="Json"></a>Json</h1><h2 id="介绍-19"><a href="#介绍-19" class="headerlink" title="介绍"></a>介绍</h2><ol>
<li><p>JSON 指的是 JavaScript 对象表示法（JavaScript Object Notation）</p>
</li>
<li><p>JSON 是轻量级的文本数据交换格式</p>
</li>
<li><p>JSON 独立于语言 [ ：即 java 、php、asp.net , go 等都可以使用 JSON]</p>
</li>
<li><p>JSON 具有自我描述性，更易理解, 一句话，非常的好用</p>
</li>
</ol>
<h2 id="快速入门-3"><a href="#快速入门-3" class="headerlink" title="快速入门"></a>快速入门</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>json 快速入门案例<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">/*</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">                 1. myJson 就是一个json对象</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">                 2. 演示如何获取到json对象的各个属性/key</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">            */</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> myJson = &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="string">&quot;key1&quot;</span>: <span class="string">&quot;LiAng梁&quot;</span>,  <span class="comment">// 字符串</span></span></span><br><span class="line"><span class="language-javascript">                <span class="string">&quot;key2&quot;</span>: <span class="number">123</span>,    <span class="comment">// Number</span></span></span><br><span class="line"><span class="language-javascript">                <span class="string">&quot;key3&quot;</span>: [<span class="number">1</span>, <span class="string">&quot;hello&quot;</span>, <span class="number">2.3</span>],  <span class="comment">// 数组</span></span></span><br><span class="line"><span class="language-javascript">                <span class="string">&quot;key4&quot;</span>: &#123;<span class="string">&quot;age&quot;</span>: <span class="number">12</span>, <span class="string">&quot;name&quot;</span>: <span class="string">&quot;jack&quot;</span>&#125;,  <span class="comment">//json对象</span></span></span><br><span class="line"><span class="language-javascript">                <span class="string">&quot;key5&quot;</span>: [      <span class="comment">//json数组</span></span></span><br><span class="line"><span class="language-javascript">                    &#123;<span class="string">&quot;k1&quot;</span>: <span class="number">10</span>, <span class="string">&quot;k2&quot;</span>: <span class="string">&quot;milan&quot;</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">                    &#123;<span class="string">&quot;k3&quot;</span>: <span class="number">30</span>, <span class="string">&quot;k4&quot;</span>: <span class="string">&quot;smith&quot;</span>&#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                ]</span></span><br><span class="line"><span class="language-javascript">            &#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//1.取出key1</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;key1 = &quot;</span>, myJson.<span class="property">key1</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//2.取出key3</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;key3 = &quot;</span>, myJson.<span class="property">key3</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//可以对key3取出的值（Array），遍历</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; myJson.<span class="property">key3</span>.<span class="property">length</span>;i++)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;第%i个元素的值 = &quot;</span>, i,myJson.<span class="property">key3</span>[i]);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//3.取出 key4</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;key4 = &quot;</span> , myJson.<span class="property">key4</span>, <span class="string">&quot; name = &quot;</span> , myJson.<span class="property">key4</span>.<span class="property">name</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//4.取出 key5</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;key5 = &quot;</span>, myJson.<span class="property">key5</span>, <span class="string">&quot; k4 = &quot;</span>, myJson.<span class="property">key5</span>[<span class="number">1</span>].<span class="property">k4</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>json 快速入门案例<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="Json对象和字符串对象转换"><a href="#Json对象和字符串对象转换" class="headerlink" title="Json对象和字符串对象转换"></a>Json对象和字符串对象转换</h2><ol>
<li>JSON.stringify(json)功能: 将一个 json 对象转换成为 json 字符串</li>
<li>JSON.parse( jsonString )功能: 将一个 json 字符串转换成为 json 对象</li>
</ol>
<h3 id="应用实例-9"><a href="#应用实例-9" class="headerlink" title="应用实例"></a>应用实例</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>JSON对象和字符串对象转换<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//1.JSON 是一个js的内置对象(build-in)，可以直接使用</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//console.log(&quot;JSON=&quot;, JSON);</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> jsonPerson = &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="string">&quot;name&quot;</span>:<span class="string">&quot;jack&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="string">&quot;age&quot;</span>:<span class="number">20</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;jsonPerson = &quot;</span>, jsonPerson);</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//json-&gt;string</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> strPerson = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(jsonPerson);</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;strPerson = &quot;</span>, strPerson, <span class="string">&quot; strPerson类型是&quot;</span>, <span class="title function_">typeof</span>(strPerson));</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//string-&gt;json</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> strDog = <span class="string">&quot;&#123;\&quot;name\&quot;:\&quot;小黄狗\&quot;,\&quot;age\&quot;:2&#125;&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> jsonDog = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(strDog);</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;jsonDog = &quot;</span>, jsonDog);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>JSON对象和字符串对象转换<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="注意事项和细节-6"><a href="#注意事项和细节-6" class="headerlink" title="注意事项和细节"></a>注意事项和细节</h3><p>1、JSON.springify(json 对 象 ) 会 返 回 对 应 string, 并 不 会 影 响 原 来 json 对 象</p>
<p>2、JSON.parse(string) 函数会返回对应的 json 对象, 并不会影响原来 string</p>
<p>3、在定义 Json 对象时, 可以使用 ‘ ‘ 表示字符串</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> json_person = &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;jack&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">100</span>&#125;;</span><br><span class="line"><span class="keyword">var</span> json_person = &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;jack&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">100</span>&#125;;</span><br></pre></td></tr></table></figure>

<p>4、但是在把原生字符串转成 json 对象时, 必须使用 “”, 否则会报错 比如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str_dog = <span class="string">&quot;&#123;&#x27;name&#x27;:&#x27;小黄狗&#x27;, &#x27;age&#x27;: 4&#125;&quot;</span>; <span class="comment">//转 json 就会报错</span></span><br></pre></td></tr></table></figure>

<p>5、JSON.springify(json 对象) 返回的字符串, 都是 “” 表示的字符串, 所以在语法格式正确的情况下, 是可以重新转成 json 对象的</p>
<h2 id="Json在Java中使用"><a href="#Json在Java中使用" class="headerlink" title="Json在Java中使用"></a>Json在Java中使用</h2><h3 id="说明-1"><a href="#说明-1" class="headerlink" title="说明"></a>说明</h3><ol>
<li><p>java 中使用 json，需要引入到第 3 方的包 gson.jar</p>
</li>
<li><p>Gson 是 Google 提供的用来在 Java 对象和 JSON 数据之间进行映射的 Java 类库</p>
</li>
<li><p>可以对 JSON 字符串 和 Java 对象相互转换</p>
</li>
</ol>
<h3 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h3><ol>
<li>Javabean 对象和 json 字符串 的转换</li>
<li>List 对象和 json 字符串 的转换</li>
<li>map 对象和 json 字符串 的转换</li>
<li>应用场景示意图</li>
</ol>
<p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220325090230829.png" alt="image-20220325090230829"></p>
<h3 id="应用实例-10"><a href="#应用实例-10" class="headerlink" title="应用实例"></a>应用实例</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.json;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.google.gson.Gson;</span><br><span class="line"><span class="keyword">import</span> com.google.gson.reflect.TypeToken;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Type;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JavaJson</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//创建一个gson对象，作为一个工具对象使用</span></span><br><span class="line">        <span class="type">Gson</span> <span class="variable">gson</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Gson</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//演示 javabean 和 json 字符串的转换</span></span><br><span class="line">        <span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Book</span>(<span class="number">100</span>,<span class="string">&quot;Java从入门到入土&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//1. 演示把 javabean -&gt; json字符串</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">strBook</span> <span class="operator">=</span> gson.toJson(book);</span><br><span class="line">        System.out.println(<span class="string">&quot;strBook = &quot;</span> + strBook);</span><br><span class="line">        <span class="comment">//2. json字符串 -&gt; javabean</span></span><br><span class="line">        <span class="comment">//(1) strBook 就是json字符串</span></span><br><span class="line">        <span class="comment">//(2) Book.class 指定将 json字符串转成 Book 对象</span></span><br><span class="line">        <span class="comment">//(3) 底层是反射机制</span></span><br><span class="line">        <span class="type">Book</span> <span class="variable">book2</span> <span class="operator">=</span> gson.fromJson(strBook, Book.class);</span><br><span class="line">        System.out.println(book2);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3. 演示把list对象 -&gt; json 字符串</span></span><br><span class="line">        List&lt;Book&gt; bookList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        bookList.add(<span class="keyword">new</span> <span class="title class_">Book</span>(<span class="number">200</span>, <span class="string">&quot;天龙八部&quot;</span>));</span><br><span class="line">        bookList.add(<span class="keyword">new</span> <span class="title class_">Book</span>(<span class="number">300</span>, <span class="string">&quot;三国演义&quot;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//因为把对象,集合转成字符串, 相对比较简单</span></span><br><span class="line">        <span class="comment">//底层只需要遍历, 按照json格式拼接返回即可</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">strBookList</span> <span class="operator">=</span> gson.toJson(bookList);</span><br><span class="line">        System.out.println(<span class="string">&quot;strBookList= &quot;</span> + strBookList);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4. 演示把json字符串 -&gt; list对象</span></span><br><span class="line">        <span class="comment">//(1) 如果需要把json字符串 转成 集合这样复杂的类型, 需要使用gson提供的一个类</span></span><br><span class="line">        <span class="comment">//(2) TypeToken , 是一个自定义泛型类, 然后通过TypeToken来指定我们需要转换成的类型</span></span><br><span class="line">         <span class="comment">/*</span></span><br><span class="line"><span class="comment">        com.google.gson.reflect</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        public class TypeToken&lt;T&gt; &#123;</span></span><br><span class="line"><span class="comment">            final Class&lt;? super T&gt; rawType;</span></span><br><span class="line"><span class="comment">            final Type type;</span></span><br><span class="line"><span class="comment">            final int hashCode;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">            protected TypeToken() &#123;</span></span><br><span class="line"><span class="comment">                this.type = getSuperclassTypeParameter(this.getClass());</span></span><br><span class="line"><span class="comment">                this.rawType = Types.getRawType(this.type);</span></span><br><span class="line"><span class="comment">                this.hashCode = this.type.hashCode();</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="comment">//(1) 返回类型的完整路径java.util.List&lt;com.lzw.json.Book&gt;</span></span><br><span class="line">        <span class="comment">//(2) gson的设计者，需要得到类型的完整路径，然后进行底层反射</span></span><br><span class="line">        <span class="comment">//(3) 所以gson 设计者就提供TypeToken, 来搞定.</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//二说 TypeToken , 为什么要加 &#123;&#125;</span></span><br><span class="line">        <span class="comment">//(1) 如果我们  new TypeToken&lt;List&lt;Book&gt;&gt;()  提示</span></span><br><span class="line">        <span class="comment">// &#x27;TypeToken()&#x27; has protected access in &#x27;com.google.gson.reflect.TypeToken&#x27;</span></span><br><span class="line">        <span class="comment">//(2) 因为TypeToken 的无参构造器是protected ， 而 new TypeToken&lt;List&lt;Book&gt;&gt;() 就是调用其无参构造器</span></span><br><span class="line">        <span class="comment">//(3) 根据java基础, 如果一个方法是protected ,而且不在同一个包， 是不能直接访问的, 因此报错</span></span><br><span class="line">        <span class="comment">//(4) 为什么 new TypeToken&lt;List&lt;Book&gt;&gt;()&#123;&#125; 使用就可以，这里就涉及到匿名内部类的知识.</span></span><br><span class="line">        <span class="comment">//(5) 当 new TypeToken&lt;List&lt;Book&gt;&gt;()&#123;&#125; 其实这个类型就不是 TypeToken 而是一个匿名内部类(子类)</span></span><br><span class="line">        <span class="comment">//(6) 而且这个匿名内部类是有自己的无参构造器(隐式), 根据java基础规则 当执行子类的无参构造器时, 默认super();</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//三说 TypeToken-&gt;举一个例子.[对java基础回顾.]</span></span><br><span class="line">        <span class="type">Type</span> <span class="variable">type</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TypeToken</span>&lt;List&lt;Book&gt;&gt;() &#123;&#125;.getType();</span><br><span class="line">        </span><br><span class="line"><span class="comment">//        System.out.println(&quot;type = &quot; + type);</span></span><br><span class="line">        List&lt;Book&gt; bookList2 = gson.fromJson(strBookList, type);</span><br><span class="line">        System.out.println(<span class="string">&quot;bookList2 = &quot;</span> + bookList2);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//5. 把map对象-&gt;json字符串</span></span><br><span class="line">        Map&lt;String, Book&gt; bookMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        bookMap.put(<span class="string">&quot;k1&quot;</span>,<span class="keyword">new</span> <span class="title class_">Book</span>(<span class="number">400</span>,<span class="string">&quot;西游记&quot;</span>));</span><br><span class="line">        bookMap.put(<span class="string">&quot;k2&quot;</span>,<span class="keyword">new</span> <span class="title class_">Book</span>(<span class="number">500</span>,<span class="string">&quot;水浒传&quot;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">strBookMap</span> <span class="operator">=</span> gson.toJson(bookMap);</span><br><span class="line">        System.out.println(<span class="string">&quot;strBookMap = &quot;</span> + strBookMap);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//6. 把json字符串 -&gt; map对象</span></span><br><span class="line">        <span class="comment">//   new TypeToken&lt;Map&lt;String, Book&gt;&gt;() &#123;&#125;.getType()=&gt;</span></span><br><span class="line">        <span class="comment">//   java.util.Map&lt;java....String,com.lzw.json.Book&gt;</span></span><br><span class="line">        Map&lt;String, Book&gt; bookMap2 = gson.fromJson(strBookMap, <span class="keyword">new</span> <span class="title class_">TypeToken</span>&lt;Map&lt;String, Book&gt;&gt;() &#123;&#125;.getType());</span><br><span class="line">        System.out.println(bookMap2);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<hr>


<h1 id="Ajax"><a href="#Ajax" class="headerlink" title="Ajax"></a>Ajax</h1><h2 id="介绍-20"><a href="#介绍-20" class="headerlink" title="介绍"></a>介绍</h2><ol>
<li>AJAX 即”Asynchronous Javascript And XML”(异步 JavaScript 和 XML)</li>
<li>Ajax 是一种浏览器&#x3D;&#x3D;异步发起请求(指定发哪些数据)&#x3D;&#x3D;，&#x3D;&#x3D;局部更新页面&#x3D;&#x3D;的技术</li>
</ol>
<h2 id="应用场景-1"><a href="#应用场景-1" class="headerlink" title="应用场景"></a>应用场景</h2><ol>
<li>搜索引擎根据用户输入关键字，自动提示检索关键字</li>
<li>动态加载数据，按需取得数据【树形菜单、联动菜单…】</li>
<li>改善用户体验。【输入内容前提示、带进度条文件上传…】</li>
<li>电子商务应用。 【购物车、邮件订阅…】</li>
<li>访问第三方服务。【访问搜索服务、rss 阅读器】</li>
<li>页面局部刷新, <a target="_blank" rel="noopener" href="https://piaofang.maoyan.com/dashboard">https://piaofang.maoyan.com/dashboard</a></li>
</ol>
<p>（1）异步请求（2）发送指定数据（3）局部</p>
<h2 id="原理示意图"><a href="#原理示意图" class="headerlink" title="原理示意图"></a>原理示意图</h2><h3 id="传统web数据通信方式"><a href="#传统web数据通信方式" class="headerlink" title="传统web数据通信方式"></a>传统web数据通信方式</h3><p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220326221601071.png" alt="image-20220326221601071"></p>
<h3 id="Ajax原理示意图"><a href="#Ajax原理示意图" class="headerlink" title="Ajax原理示意图"></a>Ajax原理示意图</h3><p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220326221743296.png" alt="image-20220326221743296"></p>
<h2 id="JavaScript原生Ajax请求"><a href="#JavaScript原生Ajax请求" class="headerlink" title="JavaScript原生Ajax请求"></a>JavaScript原生Ajax请求</h2><h3 id="应用实例-验证用户名是否存在"><a href="#应用实例-验证用户名是否存在" class="headerlink" title="应用实例-验证用户名是否存在"></a>应用实例-验证用户名是否存在</h3><p>1、演示 javascript 发送原生 ajax 请求的案例</p>
<p>​	1）在输入框输入用户名</p>
<p>​	2）点击验证用户名, 使用 ajax 方式， 服务端验证该用户名是否已经占用了, 如果该用户已经占用, 以 json 格式返回该用户信息</p>
<p>​	3)假定用户名为 king , 就不可用, 其它用户名可以&#x3D;》 后面我们接入 DB[Mysql+JDBC]</p>
<p>​	4）对页面进行局部刷新, 显示返回信息</p>
<p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220327104208251.png" alt="image-20220327104208251"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.ajax.entity;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * User类就是一个 javabean/pojo/entity/domain</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String pwd;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(Integer id, String username, String pwd, String email)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">        <span class="built_in">this</span>.username = username;</span><br><span class="line">        <span class="built_in">this</span>.pwd = pwd;</span><br><span class="line">        <span class="built_in">this</span>.email = email;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getUsername</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUsername</span><span class="params">(String username)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getPwd</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> pwd;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPwd</span><span class="params">(String pwd)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.pwd = pwd;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getEmail</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> email;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setEmail</span><span class="params">(String email)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.email = email;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.ajax.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.google.gson.Gson;</span><br><span class="line"><span class="keyword">import</span> com.lzw.ajax.entity.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CheckServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"><span class="comment">//        System.out.println(&quot;CheckServlet 被调用&quot;);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//接收ajax提交的数据</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">uname</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;uname&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;uname = &quot;</span> + uname);</span><br><span class="line"></span><br><span class="line">        response.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">        <span class="comment">//假定用户名为king，就不可用，其他用户名可以</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;king&quot;</span>.equals(uname))&#123;</span><br><span class="line">            <span class="comment">//后面这个信息，从DB获取</span></span><br><span class="line">            <span class="type">User</span> <span class="variable">king</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">100</span>, <span class="string">&quot;king&quot;</span>, <span class="string">&quot;666&quot;</span>, <span class="string">&quot;king@163.com&quot;</span>);</span><br><span class="line">            <span class="comment">//把king 转成 json</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">strKing</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Gson</span>().toJson(king);</span><br><span class="line">            <span class="comment">//返回</span></span><br><span class="line">            response.getWriter().write(strKing);</span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">//如果用户名可以用，返回“”</span></span><br><span class="line">            response.getWriter().write(<span class="string">&quot;&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>用户注册<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123; <span class="comment">//页面加载后执行function</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> checkButton = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;checkButton&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//给checkButton绑定onclick</span></span></span><br><span class="line"><span class="language-javascript">            checkButton.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//1. 创建XMLHttpRequest对象(!!!) [ajax引擎对象]</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//   获取用户填写的用户名</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> uname =<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;uname&quot;</span>).<span class="property">value</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//2. 准备发送指定数据 open, send</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//(1)&quot;GET&quot; 请求方式可以 GET/POST</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//(2)&quot;/ajax/checkServlet?username=&quot; + uname 就是 url</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//(3)true , 表示异步发送</span></span></span><br><span class="line"><span class="language-javascript">                xhr.<span class="title function_">open</span>(<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;/ajax/checkServlet?uname=&quot;</span> + uname, <span class="literal">true</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//在send函数调用前，给XMLHttpRequest 绑定一个事件onreadystatechange</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//该事件表示，可以去指定一个函数，当数据变化，会触发onreadystatechange</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 每当 xhr对象readyState 改变时，就会触发 onreadystatechange 事件</span></span></span><br><span class="line"><span class="language-javascript">                xhr.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">//如果请求已完成，且响应已就绪, 并且状态码是200</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span>(xhr.<span class="property">readyState</span> = <span class="number">4</span> &amp;&amp; xhr.<span class="property">status</span> == <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//把返回的json数据显示在div上</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;div1&quot;</span>).<span class="property">innerHTML</span> = xhr.<span class="property">responseText</span>;</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// console.log(&quot;xhr=&quot; , xhr);</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">var</span> responseText = xhr.<span class="property">responseText</span>;</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// console.log(&quot;返回的信息=&quot; +responseText);</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span>(responseText != <span class="string">&quot;&quot;</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;myres&quot;</span>).<span class="property">value</span> = <span class="string">&quot;用户名不可用&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">                        &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;myres&quot;</span>).<span class="property">value</span> = <span class="string">&quot;用户名可用&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                &#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//3. 真正的发送ajax请求[http请求]</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 如果你POST 请求，再send(&quot;发送的数据&quot;)</span></span></span><br><span class="line"><span class="language-javascript">                xhr.<span class="title function_">send</span>();</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>用户注册~<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/ajax/checkServlet&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    用户名字:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">id</span>=<span class="string">&quot;uname&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">id</span>=<span class="string">&quot;checkButton&quot;</span> <span class="attr">value</span>=<span class="string">&quot;验证用户名&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">style</span>=<span class="string">&quot;border-width: 0;color: red&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;myres&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    用户密码:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    电子邮件:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;用户注册&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>返回的json数据<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="JQuery中的Ajax"><a href="#JQuery中的Ajax" class="headerlink" title="JQuery中的Ajax"></a>JQuery中的Ajax</h2><h3 id="ajax-函数"><a href="#ajax-函数" class="headerlink" title="$.ajax 函数"></a>$.ajax 函数</h3><p>● url： 请求的地址<br>● type : 请求的方式 get 或 post<br>● data : 发送到服务器的数据。将自动转换为请求字符串格式<br>● success: 成功的回调函数<br>● error: 失败后的回调函数<br>● dataType: 返回的数据类型 常用 json 或 text</p>
<h3 id="get函数和-post函数"><a href="#get函数和-post函数" class="headerlink" title="$.get函数和$.post函数"></a>$.get函数和$.post函数</h3><p>url: 请求的 URL 地址<br>data: 请求发送到服务器的数据<br>success: 成功时回调函数<br>type: 返回内容格式，xml, html, script, json, text</p>
<p>&#x3D;&#x3D;$.get 和 $.post 底层还是使用$.ajax()方法来实现异步请求&#x3D;&#x3D;</p>
<h3 id="getJSON"><a href="#getJSON" class="headerlink" title="$.getJSON"></a>$.getJSON</h3><p>url: 请求发送的哪个 URL<br>data: 请求发送到服务器的数据<br>success: 请求成功时运行的函数</p>
<p>&#x3D;&#x3D;$.getJSON 底层使用$.ajax()方法来实现异步请求&#x3D;&#x3D;</p>
<h3 id="应用实例-11"><a href="#应用实例-11" class="headerlink" title="应用实例"></a>应用实例</h3><ol>
<li>演示 jquery 发送 ajax 请求的案例</li>
</ol>
<ol>
<li>在输入框输入用户名</li>
<li>点击验证用户名, 服务端验证该用户名是否已经占用了, 如果该用户已经占用, 以 json格式返回该用户信息</li>
<li>假定用户名为 king , 就不可用, 其它用户名可以</li>
<li>对页面进行局部刷新, 显示返回信息</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>用户注册<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--    引入jquery--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;./script/jquery-3.6.0.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        $(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//绑定事件</span></span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&quot;#btn1&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//发出ajax</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">/**</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">                 * 1. 指定参数时，需要在&#123;&#125;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">                 * 2. 给参数时，前面需要指定参数名</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">                 * 3. dataType: &quot;json&quot; 要求服务器返回的数据格式是json</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">                 */</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// $.ajax(&#123;</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//     url:&quot;/ajax/checkUserServlet2&quot;,</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//     type:&quot;POST&quot;,</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//     data:&#123;//这里给json</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//         username:$(&quot;#uname&quot;).val(),</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//         date: new Date()</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//     &#125;,</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//     error:function()&#123;//失败后的回调函数</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//         console.log(&quot;失败~&quot;)</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//     &#125;,</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//     success:function (data,status,xhr) &#123;</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//         console.log(&quot;成功~&quot;);</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//         console.log(&quot;data = &quot;, data);</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//         console.log(&quot;status = &quot;, status);</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//         console.log(&quot;xhr = &quot;, xhr);</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//         //data是json对象，要转成字符串</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//         $(&quot;#div1&quot;).html(JSON.stringify(data));</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//         if(&quot;&quot; == data.username)&#123;</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//             $(&quot;#myres&quot;).val(&quot;该用户名可用&quot;);</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//         &#125;else&#123;</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//             $(&quot;#myres&quot;).val(&quot;该用户名不可用&quot;);</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//         &#125;</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//     &#125;,</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//     dataType:&quot;json&quot;</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// &#125;);</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//说明</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//1.$.get() 默认是get请求，不需要指定 请求方式</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//2.不需要指定参数名</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//3.填写的实参，是顺序 url, data, success回调函数, 返回的数据格式</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//讲解.get() 使用</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// $.get(</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//     &quot;/ajax/checkUserServlet2&quot;,</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//     &#123;</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//         username:$(&quot;#uname&quot;).val(),</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//         date: new Date()</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//     &#125;,</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//     function (data,status,xhr) &#123;</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//         console.log(&quot;$.get 成功~&quot;);</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//         console.log(&quot;data = &quot;, data);</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//         console.log(&quot;status = &quot;, status);</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//         console.log(&quot;xhr = &quot;, xhr);</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//         //data是json对象，要转成字符串</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//         $(&quot;#div1&quot;).html(JSON.stringify(data));</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//         if(&quot;&quot; == data.username)&#123;</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//             $(&quot;#myres&quot;).val(&quot;该用户名可用&quot;);</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//         &#125;else&#123;</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//             $(&quot;#myres&quot;).val(&quot;该用户名不可用&quot;);</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//         &#125;</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//     &#125;,</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//     &quot;json&quot;</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// )</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//$.post() 和 $.get() 的方式一样</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//只是这时，是按照post方式发送ajax请求</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// $.post(</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//     &quot;/ajax/checkUserServlet2&quot;,</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//     &#123;</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//         username:$(&quot;#uname&quot;).val(),</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//         date: new Date()</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//     &#125;,</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//     function (data,status,xhr) &#123;</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//         console.log(&quot;$.post 成功~&quot;);</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//         console.log(&quot;data = &quot;, data);</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//         console.log(&quot;status = &quot;, status);</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//         console.log(&quot;xhr = &quot;, xhr);</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//         //data是json对象，要转成字符串</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//         $(&quot;#div1&quot;).html(JSON.stringify(data));</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//         if(&quot;&quot; == data.username)&#123;</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//             $(&quot;#myres&quot;).val(&quot;该用户名可用&quot;);</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//         &#125;else&#123;</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//             $(&quot;#myres&quot;).val(&quot;该用户名不可用&quot;);</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//         &#125;</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//     &#125;,</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//     &quot;json&quot;</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// )</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//1. 如果你通过jquery发出的ajax请求是get 并且 返回的数据格式是json</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//2. 可以直接使用getJSON() 函数，就很简洁</span></span></span><br><span class="line"><span class="language-javascript">                $.<span class="title function_">getJSON</span>(</span></span><br><span class="line"><span class="language-javascript">                    <span class="string">&quot;/ajax/checkUserServlet2&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                    &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">username</span>:$(<span class="string">&quot;#uname&quot;</span>).<span class="title function_">val</span>(),</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">date</span>: <span class="keyword">new</span> <span class="title class_">Date</span>()</span></span><br><span class="line"><span class="language-javascript">                    &#125;,</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">function</span> (<span class="params">data,status,xhr</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;$.getJSON 成功~&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;data = &quot;</span>, data);</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;status = &quot;</span>, status);</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;xhr = &quot;</span>, xhr);</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//data是json对象，要转成字符串</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                        $(<span class="string">&quot;#div1&quot;</span>).<span class="title function_">html</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(data));</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span>(<span class="string">&quot;&quot;</span> == data.<span class="property">username</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                            $(<span class="string">&quot;#myres&quot;</span>).<span class="title function_">val</span>(<span class="string">&quot;该用户名可用&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                        &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                            $(<span class="string">&quot;#myres&quot;</span>).<span class="title function_">val</span>(<span class="string">&quot;该用户名不可用&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                )</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>用户注册-Jquery+Ajax<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/ajax/checkUserServlet2&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    用户名字:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">id</span>=<span class="string">&quot;uname&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">id</span>=<span class="string">&quot;btn1&quot;</span> <span class="attr">value</span>=<span class="string">&quot;验证用户名&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">style</span>=<span class="string">&quot;border-width: 0;color: red&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;myres&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    用户密码:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    电子邮件:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">id</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;用户注册&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>返回的json数据<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.ajax.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.google.gson.Gson;</span><br><span class="line"><span class="keyword">import</span> com.lzw.ajax.entity.User;</span><br><span class="line"><span class="keyword">import</span> com.lzw.ajax.service.UserService;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CheckUserServlet2</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//定义一个UserService属性</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">UserService</span> <span class="variable">userService</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserService</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//接收jquery发送的ajax数据</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;username = &quot;</span> + username);</span><br><span class="line">        response.setContentType(<span class="string">&quot;text/json;charset=utf-8&quot;</span>);</span><br><span class="line">        <span class="type">Gson</span> <span class="variable">gson</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Gson</span>();</span><br><span class="line"></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userService.getUserByName(username);</span><br><span class="line">        <span class="keyword">if</span>(user != <span class="literal">null</span>)&#123;</span><br><span class="line">           response.getWriter().write(gson.toJson(user));</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="comment">//            User user1 = new User();</span></span><br><span class="line"><span class="comment">//            user1.setUsername(&quot;&quot;);</span></span><br><span class="line"><span class="comment">//            response.getWriter().write(gson.toJson(user1));</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//        if(&quot;king&quot;.equals(username))&#123;</span></span><br><span class="line"><span class="comment">//            //接入到db</span></span><br><span class="line"><span class="comment">//            User user = new User(100, &quot;king&quot;, &quot;abc&quot;, &quot;king@163.com&quot;);</span></span><br><span class="line"><span class="comment">//            response.getWriter().write(gson.toJson(user));</span></span><br><span class="line"><span class="comment">//        &#125;else&#123;</span></span><br><span class="line"><span class="comment">//            //返回一个不存在的user</span></span><br><span class="line"><span class="comment">//            User user = new User(-1, &quot;&quot;, &quot;&quot;, &quot;&quot;);</span></span><br><span class="line"><span class="comment">//            response.getWriter().write(gson.toJson(user));</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line">      </span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>


<h1 id="线程数据共享和安全-ThreadLocal"><a href="#线程数据共享和安全-ThreadLocal" class="headerlink" title="*线程数据共享和安全-ThreadLocal"></a>*线程数据共享和安全-ThreadLocal</h1><h2 id="介绍-21"><a href="#介绍-21" class="headerlink" title="介绍"></a>介绍</h2><ol>
<li>ThreadLocal 的作用，可以实现&#x3D;&#x3D;在同一个线程数据共享&#x3D;&#x3D;, 从而解决多线程数据安全问题. 2. ThreadLocal 可以给当前线程关联一个数据(普通变量、对象、数组)set 方法 [源码!]</li>
<li>ThreadLocal 可以像 Map 一样存取数据，key 为当前线程, get 方法</li>
<li>每一个 ThreadLocal 对象，只能为当前线程关联一个数据，如果要为当前线程关联多个数据，就需要使用多个 ThreadLocal 对象实例</li>
<li>每个 ThreadLocal 对象实例定义的时候，一般为 static 类型</li>
<li>ThreadLocal 中保存数据，在线程销毁后，会自动释放</li>
</ol>
<p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220328163701554.png" alt="image-20220328163701554"></p>
<h2 id="快速入门-4"><a href="#快速入门-4" class="headerlink" title="快速入门"></a>快速入门</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.threadlocal;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">T2DAO</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//取出线程关联的threadLocal1对象的数据</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">o</span> <span class="operator">=</span> T1.threadLocal1.get();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取当前线程名</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> Thread.currentThread().getName();</span><br><span class="line">        System.out.println(<span class="string">&quot;在T2DAO的update() 线程是= &quot;</span> + name + <span class="string">&quot; 取出dog=&quot;</span> + o);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.threadlocal;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">T1Service</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//取出 threadLocal1 关联的对象</span></span><br><span class="line">        <span class="comment">/**解读源码</span></span><br><span class="line"><span class="comment">         * * public T get() &#123;</span></span><br><span class="line"><span class="comment">         *          //1. 先得到当前的线程对象</span></span><br><span class="line"><span class="comment">         *         Thread t = Thread.currentThread();</span></span><br><span class="line"><span class="comment">         *         //2.通过线程获取到对应的ThreadLocalMap</span></span><br><span class="line"><span class="comment">         *         ThreadLocalMap map = getMap(t);</span></span><br><span class="line"><span class="comment">         *         if (map != null) &#123;</span></span><br><span class="line"><span class="comment">         *              //3. 如果map不为空, 根据当前的 threadlocal对象，得到对应的Entry</span></span><br><span class="line"><span class="comment">         *             ThreadLocalMap.Entry e = map.getEntry(this);</span></span><br><span class="line"><span class="comment">         *             //4. 如果e 不为null</span></span><br><span class="line"><span class="comment">         *             if (e != null) &#123;</span></span><br><span class="line"><span class="comment">         *                 <span class="doctag">@SuppressWarnings</span>(&quot;unchecked&quot;)</span></span><br><span class="line"><span class="comment">         *                 //返回当前threadlocal关联的数据value</span></span><br><span class="line"><span class="comment">         *                 T result = (T)e.value;</span></span><br><span class="line"><span class="comment">         *                 return result;</span></span><br><span class="line"><span class="comment">         *             &#125;</span></span><br><span class="line"><span class="comment">         *         &#125;</span></span><br><span class="line"><span class="comment">         *         return setInitialValue();</span></span><br><span class="line"><span class="comment">         *     &#125;*</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">o</span> <span class="operator">=</span> T1.threadLocal1.get();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取当前线程名</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> Thread.currentThread().getName();</span><br><span class="line">        System.out.println(<span class="string">&quot;在T1Service的update() 线程name= &quot;</span> + name + <span class="string">&quot; dog= &quot;</span> + o);</span><br><span class="line">        <span class="comment">//调用dao-update</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">T2DAO</span>().update();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.threadlocal;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">T1</span> &#123;</span><br><span class="line">    <span class="comment">//创建ThreadLocal对象，做成public static.</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> ThreadLocal&lt;Object&gt; threadLocal1 = <span class="keyword">new</span> <span class="title class_">ThreadLocal</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> ThreadLocal&lt;Object&gt; threadLocal2 = <span class="keyword">new</span> <span class="title class_">ThreadLocal</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Task 是线程类 -&gt; 内部类 / 线程</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Task</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="type">Dog</span> <span class="variable">dog</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Dog</span>();</span><br><span class="line">            <span class="type">Pig</span> <span class="variable">pig</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Pig</span>();</span><br><span class="line">            <span class="comment">//给threadLocal1 对象放入set dog , 隔山打牛</span></span><br><span class="line">            System.out.println(<span class="string">&quot;Task 放入了 dog= &quot;</span> + dog);</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">                解读源码</span></span><br><span class="line"><span class="comment">             public void set(T value) &#123;</span></span><br><span class="line"><span class="comment">                 //1. 获取当前线程, 关联到当前线程!</span></span><br><span class="line"><span class="comment">                 Thread t = Thread.currentThread();</span></span><br><span class="line"><span class="comment">                 //2. 通过线程对象, 获取到ThreadLocalMap</span></span><br><span class="line"><span class="comment">                 //   ThreadLocalMap 类型 ThreadLocal.ThreadLocalMap</span></span><br><span class="line"><span class="comment">                 ThreadLocalMap map = getMap(t);</span></span><br><span class="line"><span class="comment">                 //3. 如果map不为null, 将数据(dog,pig..) 放入map -key:threadLocal value:存放的数据</span></span><br><span class="line"><span class="comment">                 //   从这个源码我们已然看出一个threadlocal只能关联一个数据，如果你set, 就会替换</span></span><br><span class="line"><span class="comment">                 //4. 如果map为null, 就创建一个和当前线程关联的ThreadLocalMap, 并且该数据放入</span></span><br><span class="line"><span class="comment">                 if (map != null)</span></span><br><span class="line"><span class="comment">                    map.set(this, value);</span></span><br><span class="line"><span class="comment">                 else</span></span><br><span class="line"><span class="comment">                    createMap(t, value);</span></span><br><span class="line"><span class="comment">                 &#125;</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            threadLocal1.set(dog);</span><br><span class="line">            <span class="comment">//threadLocal1.set(pig);</span></span><br><span class="line">            threadLocal2.set(pig);</span><br><span class="line">            System.out.println(<span class="string">&quot;Task 在run 方法中 线程=&quot;</span> + Thread.currentThread().getName());</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">T1Service</span>().update();</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">Task</span>()).start();<span class="comment">//主线程启动一个新的线程,注意不是主线程</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="原理分析"><a href="#原理分析" class="headerlink" title="原理分析"></a>原理分析</h2><p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220328173610621.png" alt="image-20220328173610621"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">set</span><span class="params">(T value)</span> &#123;</span><br><span class="line">    <span class="type">Thread</span> <span class="variable">t</span> <span class="operator">=</span> Thread.currentThread();</span><br><span class="line">    <span class="type">ThreadLocalMap</span> <span class="variable">map</span> <span class="operator">=</span> getMap(t);</span><br><span class="line">    <span class="keyword">if</span> (map != <span class="literal">null</span>)</span><br><span class="line">        map.set(<span class="built_in">this</span>, value);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        createMap(t, value);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*********************/</span></span><br><span class="line"><span class="keyword">public</span> T <span class="title function_">get</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t</span> <span class="operator">=</span> Thread.currentThread();</span><br><span class="line">        <span class="type">ThreadLocalMap</span> <span class="variable">map</span> <span class="operator">=</span> getMap(t);</span><br><span class="line">        <span class="keyword">if</span> (map != <span class="literal">null</span>) &#123;</span><br><span class="line">            ThreadLocalMap.<span class="type">Entry</span> <span class="variable">e</span> <span class="operator">=</span> map.getEntry(<span class="built_in">this</span>);</span><br><span class="line">            <span class="keyword">if</span> (e != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">                <span class="type">T</span> <span class="variable">result</span> <span class="operator">=</span> (T)e.value;</span><br><span class="line">                <span class="keyword">return</span> result;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> setInitialValue();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220328173812023.png" alt="image-20220328173812023"></p>
<p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220328173837621.png" alt="image-20220328173837621"></p>
<hr>


<h1 id="文件上传下载"><a href="#文件上传下载" class="headerlink" title="*文件上传下载"></a>*文件上传下载</h1><h2 id="介绍-22"><a href="#介绍-22" class="headerlink" title="介绍"></a>介绍</h2><ol>
<li>文件的上传和下载，是常见的功能。</li>
<li>后面项目就使用了文件上传下载。</li>
<li>如果是传输大文件，一般用专门工具或者插件</li>
<li>文件上传下载需要使用到两个包 , 需要导入</li>
<li>说明:</li>
</ol>
<p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220330161244605.png" alt="image-20220330161244605"></p>
<h2 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h2><h3 id="基本原理-1"><a href="#基本原理-1" class="headerlink" title="基本原理"></a>基本原理</h3><img src="E:\VIP\JavaWeb\笔记\JavaWeb.assets\image-20220330162807058.png" alt="image-20220330162807058"  />

<p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220330162919197.png" alt="image-20220330162919197"></p>
<h3 id="应用实例-12"><a href="#应用实例-12" class="headerlink" title="应用实例"></a>应用实例</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.lzw.utils.WebUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.fileupload.FileItem;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.fileupload.FileUploadException;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.fileupload.disk.DiskFileItemFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.fileupload.servlet.ServletFileUpload;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.UUID;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileUploadServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"><span class="comment">//        System.out.println(&quot;FileUploadServlet 被调用&quot;);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//1. 判断是不是文件表单(enctype=&quot;multipart/form-data&quot;)</span></span><br><span class="line">        <span class="keyword">if</span>(ServletFileUpload.isMultipartContent(request))&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Ok&quot;</span>);</span><br><span class="line">            <span class="comment">//2. 创建 DiskFileItemFactory 对象, 用于构建一个 解析上传数据的工具 对象</span></span><br><span class="line">            <span class="type">DiskFileItemFactory</span> <span class="variable">diskFileItemFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DiskFileItemFactory</span>();</span><br><span class="line">            <span class="comment">//3. 创建一个解析上传数据的工具对象</span></span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             *     表单提交的数据就是 input 元素</span></span><br><span class="line"><span class="comment">             *     &lt;input type=&quot;file&quot; name=&quot;pic&quot; id=&quot;&quot; value=&quot;2xxx.jpg&quot; onchange=&quot;prev(this)&quot;/&gt;</span></span><br><span class="line"><span class="comment">             *     家居名: &lt;input type=&quot;text&quot; name=&quot;name&quot;&gt;&lt;br/&gt;</span></span><br><span class="line"><span class="comment">             *     &lt;input type=&quot;submit&quot; value=&quot;上传&quot;/&gt;</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            <span class="type">ServletFileUpload</span> <span class="variable">servletFileUpload</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServletFileUpload</span>(diskFileItemFactory);</span><br><span class="line">            <span class="comment">//解决接收到文件名是中文乱码</span></span><br><span class="line">            servletFileUpload.setHeaderEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="comment">//4. 关键的地方, servletFileUpload 对象可以把表单提交的数据text / 文件</span></span><br><span class="line">            <span class="comment">//   将其封装到 FileItem 文件项中</span></span><br><span class="line">            <span class="comment">//   心得体会: 如果我们不知道一个对象是什么结构[1.输出 2.debug 3. 底层自动看到]</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                List&lt;FileItem&gt; list = servletFileUpload.parseRequest(request);</span><br><span class="line">                <span class="comment">/**</span></span><br><span class="line"><span class="comment">                [name=1.jpg, StoreLocation=D:\Environment\Tomcat\apache-tomcat-8.0.50\temp\xupload_351e9703_17fda038795__7f67_00000000.tmp, size=0bytes, isFormField=false, FieldName=pic,</span></span><br><span class="line"><span class="comment">                // name=null, StoreLocation=D:\Environment\Tomcat\apache-tomcat-8.0.50\temp\xupload_351e9703_17fda038795__7f67_00000001.tmp, size=0bytes, isFormField=true, FieldName=name]</span></span><br><span class="line"><span class="comment">                */</span></span><br><span class="line">                 <span class="comment">//System.out.println(&quot;list ==&gt; &quot; + list);</span></span><br><span class="line">                <span class="comment">//遍历，并分别处理</span></span><br><span class="line">                <span class="keyword">for</span> (FileItem fileItem : list) &#123;</span><br><span class="line">                    <span class="comment">//System.out.println(&quot;fileItem = &quot; + fileItem);</span></span><br><span class="line">                    <span class="comment">//判断是不是一个文件</span></span><br><span class="line">                    <span class="keyword">if</span>(fileItem.isFormField())&#123;<span class="comment">//如果是true就是文本 input text</span></span><br><span class="line">                        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> fileItem.getString(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">                        System.out.println(<span class="string">&quot;家具名=&quot;</span> + name);</span><br><span class="line">                    &#125;<span class="keyword">else</span>&#123;<span class="comment">//是一个文件</span></span><br><span class="line">                        <span class="comment">//用一个方法</span></span><br><span class="line">                        <span class="comment">//获取上传的文件的名字</span></span><br><span class="line">                        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> fileItem.getName();</span><br><span class="line">                        System.out.println(<span class="string">&quot;上传的文件名=&quot;</span> + name);</span><br><span class="line"></span><br><span class="line">                        <span class="comment">//把这个上传到 服务器的 temp下的文件保存到你指定的目录</span></span><br><span class="line">                        <span class="comment">//1.指定一个目录 , 就是我们网站工作目录下</span></span><br><span class="line">                        <span class="type">String</span> <span class="variable">filePath</span> <span class="operator">=</span> <span class="string">&quot;/upload/&quot;</span>;</span><br><span class="line">                        <span class="comment">//2.获取到完整目录 [io/servlet基础]</span></span><br><span class="line">                        <span class="comment">//  这个目录是和你的web项目运行环境绑定的. 是动态的。</span></span><br><span class="line">                        <span class="comment">// fileRealPath = E:\VIP\JavaWeb\Demo\fileupdown\out\artifacts\fileupdown_war_exploded\xupload\</span></span><br><span class="line">                        <span class="type">String</span> <span class="variable">fileRealPath</span> <span class="operator">=</span> request.getServletContext().getRealPath(filePath);</span><br><span class="line">                        System.out.println(<span class="string">&quot;fileRealPath = &quot;</span> + fileRealPath);</span><br><span class="line"></span><br><span class="line">                        <span class="comment">//3. 创建这个上传的目录=&gt; 创建目录?=&gt; Java基础</span></span><br><span class="line">                        <span class="comment">//   我们写一个工具类，可以返回 /2024/11/11 字符串</span></span><br><span class="line">                        <span class="type">File</span> <span class="variable">fileRealPathDirectory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(fileRealPath + WebUtils.getYearMonthDay());</span><br><span class="line">                        <span class="keyword">if</span>(!fileRealPathDirectory.exists())&#123;<span class="comment">//不存在就创建</span></span><br><span class="line">                            fileRealPathDirectory.mkdirs();<span class="comment">//创建</span></span><br><span class="line">                        &#125;</span><br><span class="line"></span><br><span class="line">                        <span class="comment">//4. 将文件拷贝到fileRealPathDirectory目录</span></span><br><span class="line">                        <span class="comment">//   构建一个上传文件的完整路径 ：目录+文件名</span></span><br><span class="line">                        <span class="comment">//   对上传的文件名进行处理, 前面增加一个前缀，保证是唯一即可, 不错</span></span><br><span class="line">                        name = UUID.randomUUID().toString() + <span class="string">&quot;_&quot;</span> + System.currentTimeMillis() + <span class="string">&quot;_&quot;</span> + name;</span><br><span class="line">                        <span class="type">String</span> <span class="variable">fileFullPath</span> <span class="operator">=</span> fileRealPathDirectory + <span class="string">&quot;/&quot;</span> + name;</span><br><span class="line">                        fileItem.write(<span class="keyword">new</span> <span class="title class_">File</span>(fileFullPath));</span><br><span class="line">                        <span class="comment">//5.提示信息</span></span><br><span class="line">                        response.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">                        response.getWriter().write(<span class="string">&quot;上传成功~&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;不是文件表单&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebUtils</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getYearMonthDay</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">LocalDateTime</span> <span class="variable">ldt</span> <span class="operator">=</span> LocalDateTime.now();</span><br><span class="line">        <span class="type">int</span> <span class="variable">year</span> <span class="operator">=</span> ldt.getYear();</span><br><span class="line">        <span class="type">int</span> <span class="variable">monthValue</span> <span class="operator">=</span> ldt.getMonthValue();</span><br><span class="line">        <span class="type">int</span> <span class="variable">dayOfMonth</span> <span class="operator">=</span> ldt.getDayOfMonth();</span><br><span class="line">        <span class="type">String</span> <span class="variable">yearMonthDay</span> <span class="operator">=</span> year + <span class="string">&quot;/&quot;</span> + monthValue + <span class="string">&quot;/&quot;</span> + dayOfMonth + <span class="string">&quot;/&quot;</span>;</span><br><span class="line">        System.out.println(yearMonthDay);</span><br><span class="line">        <span class="keyword">return</span> yearMonthDay;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">    &lt;!-- 指定了base标签 --&gt;</span><br><span class="line">    &lt;base href=<span class="string">&quot;&lt;%=request.getContextPath()+&quot;</span>/<span class="string">&quot;%&gt;&gt;&quot;</span>&gt;</span><br><span class="line">    &lt;style type=<span class="string">&quot;text/css&quot;</span>&gt;</span><br><span class="line">        input[type=<span class="string">&quot;submit&quot;</span>] &#123;</span><br><span class="line">            outline: none;</span><br><span class="line">            border-radius: 5px;</span><br><span class="line">            cursor: pointer;</span><br><span class="line">            background-color: #31B0D5;</span><br><span class="line">            border: none;</span><br><span class="line">            width: 70px;</span><br><span class="line">            height: 35px;</span><br><span class="line">            font-size: 20px;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        img &#123;</span><br><span class="line">            border-radius: <span class="number">50</span>%;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        form &#123;</span><br><span class="line">            position: relative;</span><br><span class="line">            width: 200px;</span><br><span class="line">            height: 200px;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        input[type=<span class="string">&quot;file&quot;</span>] &#123;</span><br><span class="line">            position: absolute;</span><br><span class="line">            left: <span class="number">0</span>;</span><br><span class="line">            top: <span class="number">0</span>;</span><br><span class="line">            height: 200px;</span><br><span class="line">            opacity: <span class="number">0</span>;</span><br><span class="line">            cursor: pointer;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line"></span><br><span class="line">    &lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">        function <span class="title function_">prev</span><span class="params">(event)</span> &#123;</span><br><span class="line">            <span class="comment">//获取展示图片的区域</span></span><br><span class="line">            <span class="type">var</span> <span class="variable">img</span> <span class="operator">=</span> document.getElementById(<span class="string">&quot;prevView&quot;</span>);</span><br><span class="line">            <span class="comment">//获取文件对象</span></span><br><span class="line">            <span class="type">var</span> <span class="variable">file</span> <span class="operator">=</span> event.files[<span class="number">0</span>];</span><br><span class="line">            <span class="comment">//获取文件阅读器： Js的一个类，直接使用即可</span></span><br><span class="line">            <span class="type">var</span> <span class="variable">reader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileReader</span>();</span><br><span class="line">            reader.readAsDataURL(file);</span><br><span class="line">            reader.onload = function () &#123;</span><br><span class="line">                <span class="comment">//给img的src设置图片url</span></span><br><span class="line">                img.setAttribute(<span class="string">&quot;src&quot;</span>, <span class="built_in">this</span>.result);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;!-- 表单的enctype属性要设置为multipart/form-data</span><br><span class="line">    enctype=<span class="string">&quot;multipart/form-data&quot;</span> 表示提交的数据是多个部分构造，有文件和文本</span><br><span class="line"> --&gt;</span><br><span class="line"></span><br><span class="line">&lt;form action=<span class="string">&quot;fileUploadServlet&quot;</span> method=<span class="string">&quot;post&quot;</span> enctype=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span><br><span class="line">    家居图: &lt;img src=<span class="string">&quot;2.jpg&quot;</span> alt=<span class="string">&quot;&quot;</span> width=<span class="string">&quot;200&quot;</span> height=<span class="string">&quot;200&quot;</span> id=<span class="string">&quot;prevView&quot;</span>&gt;</span><br><span class="line">    &lt;%--    小伙伴愿意完成自己测试--%&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;file&quot;</span> name=<span class="string">&quot;pic&quot;</span> id=<span class="string">&quot;&quot;</span> value=<span class="string">&quot;&quot;</span> onchange=<span class="string">&quot;prev(this)&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">    家居名: &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;name&quot;</span>&gt;&lt;br/&gt;</span><br><span class="line"></span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;上传&quot;</span>/&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="注意事项和细节-7"><a href="#注意事项和细节-7" class="headerlink" title="注意事项和细节"></a>注意事项和细节</h3><ol>
<li><p>如果将文件都上传到一个目录下，当上传文件很多时，会造成访问文件速度变慢，因此可以将文件上传到不同目录 比如 一天上传的文件，统一放到一个文件夹 年月日, 比如21001010 文件夹</p>
</li>
<li><p>一个完美的文件上传，要考虑的因素很多，比如断点续传、控制图片大小，尺寸，分片上传，防止恶意上传等，在项目中，可以考虑使用 WebUploader 组件(百度开发)<a target="_blank" rel="noopener" href="http://fex.baidu.com/webuploader/doc/index.html">http://fex.baidu.com/webuploader/doc/index.html</a></p>
</li>
<li><p>文件上传功能，在项目中建议有限制的使用，一般用在头像、证明、合同、产品展示等，如果不加限制，会造成服务器空间被大量占用 [比如 b 站评论，就不能传图片，微信发 1次朋友圈最多 9 张图等..]</p>
</li>
<li><p>文件上传，创建 web&#x2F;upload 的文件夹，在 tomcat 启动时，没有在 out 目录下 创建 对应的 upload 文件夹, 原因是 tomcat 对应空目录是不会在 out 下创建相应目录的，所以，只需在 upload 目录下，放一个文件即可, 这个是 Idea + Tomcat 的问题, 实际开发不会存在</p>
</li>
</ol>
<h2 id="文件下载"><a href="#文件下载" class="headerlink" title="文件下载"></a>文件下载</h2><h3 id="基本原理-2"><a href="#基本原理-2" class="headerlink" title="基本原理"></a>基本原理</h3><p><img src="D:\Github\will-liang.github.io\source_posts\JavaWeb.assets\image-20220330195348040.png" alt="image-20220330195348040"></p>
<h3 id="应用实例-13"><a href="#应用实例-13" class="headerlink" title="应用实例"></a>应用实例</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.io.IOUtils;</span><br><span class="line"><span class="keyword">import</span> sun.misc.BASE64Encoder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContext;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletOutputStream;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.URLEncoder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileDownLoadServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;FileDownLoadServlet 被调用&quot;</span>);</span><br><span class="line">        <span class="comment">//1. 先准备要下载的文件[假定这些文件是公共的资源]</span></span><br><span class="line">        <span class="comment">//   重要: 保证当我们的tomcat启动后，在工作目录out下有download文件夹, 并且有可供下载的文件!!</span></span><br><span class="line">        <span class="comment">//   如果你没有看到你创建的download在工作目录out下 rebuild project -&gt; restart, 就OK</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2. 获取到要下载的文件的名字</span></span><br><span class="line">        request.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">downLoadFileName</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;downLoadFileName = &quot;</span> + downLoadFileName);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3. 给http响应，设置响应头 Content-Type , 就是文件的MIME</span></span><br><span class="line">        <span class="comment">//   通过servletContext 来获取</span></span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> request.getServletContext();</span><br><span class="line">        <span class="type">String</span> <span class="variable">downLoadPath</span> <span class="operator">=</span> <span class="string">&quot;/download/&quot;</span>;<span class="comment">//下载目录从web工程根目录计算 /download/1.jpg</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">downLoadFileFullPath</span> <span class="operator">=</span> downLoadPath + downLoadFileName;</span><br><span class="line">        <span class="type">String</span> <span class="variable">mimeType</span> <span class="operator">=</span> servletContext.getMimeType(downLoadFileFullPath);</span><br><span class="line">        System.out.println(<span class="string">&quot;mimeType = &quot;</span> + mimeType);</span><br><span class="line">        response.setContentType(mimeType);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4. 给http响应，设置响应头 Content-Disposition</span></span><br><span class="line">        <span class="comment">//  这里考虑的细节比较多，比如不同的浏览器写法不一样，考虑编辑</span></span><br><span class="line">        <span class="comment">//   ff 是 文件名中文需要 base64, 而 ie/chrome 是 URL编码</span></span><br><span class="line">        <span class="comment">//   这里我们不需要同学们记住，只需知道原理</span></span><br><span class="line">        <span class="comment">//  解读</span></span><br><span class="line">        <span class="comment">//(1)如果是Firefox 则中文编码需要 base64</span></span><br><span class="line">        <span class="comment">//(2)Content-Disposition 是指定下载的数据的展示形式 , 如果attachment 则使用文件下载方式</span></span><br><span class="line">        <span class="comment">//(3)如果是其他(主流ie/chrome) 中文编码使用URL编码</span></span><br><span class="line">        <span class="keyword">if</span> (request.getHeader(<span class="string">&quot;User-Agent&quot;</span>).contains(<span class="string">&quot;Firefox&quot;</span>)) &#123;</span><br><span class="line">            <span class="comment">// 火狐 Base64编码</span></span><br><span class="line">            response.setHeader(<span class="string">&quot;Content-Disposition&quot;</span>, <span class="string">&quot;attachment; filename==?UTF-8?B?&quot;</span> +</span><br><span class="line">                    <span class="keyword">new</span> <span class="title class_">BASE64Encoder</span>().encode(downLoadFileName.getBytes(<span class="string">&quot;UTF-8&quot;</span>)) + <span class="string">&quot;?=&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 其他(主流ie/chrome)使用URL编码操作</span></span><br><span class="line">            response.setHeader(<span class="string">&quot;Content-Disposition&quot;</span>, <span class="string">&quot;attachment; filename=&quot;</span> +</span><br><span class="line">                    URLEncoder.encode(downLoadFileName, <span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//5. 读取下载的文件数据，返回给客户端/浏览器</span></span><br><span class="line">        <span class="comment">//(1) 创建一个和要下载的文件，关联的输入流</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">resourceAsStream</span> <span class="operator">=</span> servletContext.getResourceAsStream(downLoadFileFullPath);</span><br><span class="line">        <span class="comment">//(2) 得到返回数据的输出流 [因为返回文件大多数是二进制(字节), IO java基础]</span></span><br><span class="line">        <span class="type">ServletOutputStream</span> <span class="variable">outputStream</span> <span class="operator">=</span> response.getOutputStream();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//(3) 使用工具类，将输入流关联的文件，对拷到输出流，并返回给客户端/浏览器</span></span><br><span class="line">        IOUtils.copy(resourceAsStream, outputStream);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">    &lt;title&gt;文件下载&lt;/title&gt;</span><br><span class="line">    &lt;base href=<span class="string">&quot;&lt;%=request.getContextPath()+&quot;</span>/<span class="string">&quot;%&gt;&gt;&quot;</span>&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;文件下载&lt;/h1&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;fileDownLoadServlet?name=1.jpg&quot;</span>&gt;点击下载小狗图片&lt;/a&gt;&lt;br/&gt;&lt;br/&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;fileDownLoadServlet?name=笔记.pdf&quot;</span>&gt;点击下载 笔记.pdf&lt;/a&gt;&lt;br/&gt;&lt;br/&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;fileDownLoadServlet?name=高山流水.mp3&quot;</span>&gt;点击下载 高山流水.mp3&lt;/a&gt;&lt;br/&gt;&lt;br/&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="注意事项和细节-8"><a href="#注意事项和细节-8" class="headerlink" title="注意事项和细节"></a>注意事项和细节</h3><ol>
<li><p>文件下载，比较麻烦的就是文件名中文处理</p>
</li>
<li><p>因此，在代码中，针对不同浏览器做了处理</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (request.getHeader(<span class="string">&quot;User-Agent&quot;</span>).contains(<span class="string">&quot;Firefox&quot;</span>)) &#123;</span><br><span class="line">    <span class="comment">// 火狐 Base64编码</span></span><br><span class="line">    response.setHeader(<span class="string">&quot;Content-Disposition&quot;</span>, <span class="string">&quot;attachment; filename==?UTF-8?B?&quot;</span> +</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">BASE64Encoder</span>().encode(downLoadFileName.getBytes(<span class="string">&quot;UTF-8&quot;</span>)) + <span class="string">&quot;?=&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 其他(主流ie/chrome)使用URL编码操作</span></span><br><span class="line">    response.setHeader(<span class="string">&quot;Content-Disposition&quot;</span>, <span class="string">&quot;attachment; filename=&quot;</span> +</span><br><span class="line">            URLEncoder.encode(downLoadFileName, <span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>对于网站的文件，很多文件使用另存为即可下载，对于大文件(文档，视频)，会使用专业的下载工具(迅雷、百度，腾讯，网盘等)</li>
<li>对于不同的浏览器, 在把文件下载完毕后，处理的方式不一样, 有些是直接打开文件，有些是将文件下载到 本地&#x2F;下载目录</li>
</ol>

    </div>

    
    
    

    
        <div>
          <div>
    
        <div style="text-align:center;color: #ccc;font-size:24px;">-------------本文结束<i class="fa fa-paw"></i>感谢您的阅读-------------</div>
    
</div>
        </div>
    

    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Java/" rel="tag"># Java</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2022/07/20/Spring5/" rel="prev" title="Spring5">
      <i class="fa fa-chevron-left"></i> Spring5
    </a></div>
      <div class="post-nav-item">
    <a href="/2022/07/23/JavaWeb/" rel="next" title="JavaWeb">
      JavaWeb <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-number">1.</span> <span class="nav-text">常用正则表达式</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A0%A1%E9%AA%8C%E6%95%B0%E5%AD%97%E7%9A%84%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-number">1.1.</span> <span class="nav-text">校验数字的表达式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A0%A1%E9%AA%8C%E5%AD%97%E7%AC%A6%E7%9A%84%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-number">1.2.</span> <span class="nav-text">校验字符的表达式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%89%B9%E6%AE%8A%E9%9C%80%E6%B1%82%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-number">1.3.</span> <span class="nav-text">特殊需求表达式</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Tomcat"><span class="nav-number">2.</span> <span class="nav-text">Tomcat</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="nav-number">2.1.</span> <span class="nav-text">目录结构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#catalina-%E5%90%AF%E5%8A%A8-Tomcat"><span class="nav-number">2.2.</span> <span class="nav-text">catalina 启动 Tomcat</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E8%BF%9B%E5%85%A5%E5%88%B0-Tomcat-%E7%9A%84-bin-%E7%9B%AE%E5%BD%95%E4%B8%8B"><span class="nav-number">2.2.1.</span> <span class="nav-text">1. 进入到 Tomcat 的 bin 目录下</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4%EF%BC%9A-catalina-run"><span class="nav-number">2.2.2.</span> <span class="nav-text">2. 执行命令： catalina run</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%81%9C%E6%AD%A2-Tomcat"><span class="nav-number">2.3.</span> <span class="nav-text">停止 Tomcat</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-Tomcat-%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%8F%A3"><span class="nav-number">2.4.</span> <span class="nav-text">修改 Tomcat 服务端口</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Tomcat-%E6%9C%8D%E5%8A%A1%E4%B8%AD%E9%83%A8%E7%BD%B2-WEB-%E5%BA%94%E7%94%A8"><span class="nav-number">2.5.</span> <span class="nav-text">Tomcat 服务中部署 WEB 应用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%83%A8%E7%BD%B2%E6%96%B9%E5%BC%8F1%EF%BC%9A%E5%B0%86-web-%E5%B7%A5%E7%A8%8B%E7%9A%84%E7%9B%AE%E5%BD%95%E6%8B%B7%E8%B4%9D%E5%88%B0-Tomcat-%E7%9A%84-webapps-%E7%9B%AE%E5%BD%95%E4%B8%8B"><span class="nav-number">2.5.1.</span> <span class="nav-text">部署方式1：将 web 工程的目录拷贝到 Tomcat 的 webapps 目录下</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%83%A8%E7%BD%B2%E6%96%B9%E5%BC%8F2%EF%BC%9A%E9%80%9A%E8%BF%87%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E6%9D%A5%E9%83%A8%E7%BD%B2-%E5%8F%AA%E5%81%9A%E4%BB%8B%E7%BB%8D"><span class="nav-number">2.5.2.</span> <span class="nav-text">部署方式2：通过配置文件来部署(只做介绍)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E8%AE%BF%E9%97%AE-web-%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%96%87%E4%BB%B6-UML-%E6%97%B6%E5%BA%8F%E5%9B%BE"><span class="nav-number">2.6.</span> <span class="nav-text">浏览器访问 web 服务器文件 UML 时序图!!!</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B8%89%E5%A4%A7%E7%BB%84%E4%BB%B6-Servlet"><span class="nav-number">3.</span> <span class="nav-text">三大组件-Servlet</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A6%82%E5%BF%B5"><span class="nav-number">3.1.</span> <span class="nav-text">概念</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%89%8B%E5%8A%A8%E5%BC%80%E5%8F%91Servlet"><span class="nav-number">3.2.</span> <span class="nav-text">手动开发Servlet</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E8%B0%83%E7%94%A8Servlet%E6%B5%81%E7%A8%8B"><span class="nav-number">3.3.</span> <span class="nav-text">浏览器调用Servlet流程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Servlet%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-number">3.4.</span> <span class="nav-text">Servlet生命周期</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96%E9%98%B6%E6%AE%B5"><span class="nav-number">3.4.1.</span> <span class="nav-text">初始化阶段</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%84%E7%90%86%E6%B5%8F%E8%A7%88%E5%99%A8%E8%AF%B7%E6%B1%82%E9%98%B6%E6%AE%B5-service-%E6%96%B9%E6%B3%95"><span class="nav-number">3.4.2.</span> <span class="nav-text">处理浏览器请求阶段(service 方法)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%88%E6%AD%A2%E9%98%B6%E6%AE%B5-destory-%E6%96%B9%E6%B3%95-%E4%BD%93%E7%8E%B0-Servlet-%E5%AE%8C%E6%95%B4%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-number">3.4.3.</span> <span class="nav-text">终止阶段 destory 方法(体现 Servlet 完整的生命周期)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#HttpServlet"><span class="nav-number">3.5.</span> <span class="nav-text">HttpServlet</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Servlet%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%E5%92%8C%E7%BB%86%E8%8A%82"><span class="nav-number">3.6.</span> <span class="nav-text">Servlet注意事项和细节</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Servlet%E6%B3%A8%E8%A7%A3%E6%96%B9%E5%BC%8F"><span class="nav-number">3.7.</span> <span class="nav-text">Servlet注解方式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Servlet-urlPattern-%E9%85%8D%E7%BD%AE"><span class="nav-number">3.8.</span> <span class="nav-text">Servlet urlPattern 配置</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E7%B2%BE%E7%A1%AE%E5%8C%B9%E9%85%8D"><span class="nav-number">3.8.1.</span> <span class="nav-text">1.精确匹配</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E7%9B%AE%E5%BD%95%E5%8C%B9%E9%85%8D"><span class="nav-number">3.8.2.</span> <span class="nav-text">2.目录匹配</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E6%89%A9%E5%B1%95%E5%90%8D%E5%8C%B9%E9%85%8D"><span class="nav-number">3.8.3.</span> <span class="nav-text">3.扩展名匹配</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E4%BB%BB%E6%84%8F%E5%8C%B9%E9%85%8D"><span class="nav-number">3.8.4.</span> <span class="nav-text">4.任意匹配</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%A8%E6%84%8F"><span class="nav-number">3.8.5.</span> <span class="nav-text">注意</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ServletConfig"><span class="nav-number">3.9.</span> <span class="nav-text">ServletConfig</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%8B%E7%BB%8D"><span class="nav-number">3.9.1.</span> <span class="nav-text">介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%9C%E7%94%A8"><span class="nav-number">3.9.2.</span> <span class="nav-text">作用</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ServletContext"><span class="nav-number">3.10.</span> <span class="nav-text">ServletContext</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%8B%E7%BB%8D-1"><span class="nav-number">3.10.1.</span> <span class="nav-text">介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%9C%E7%94%A8-1"><span class="nav-number">3.10.2.</span> <span class="nav-text">作用</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#HttpServletRequest-Servlet"><span class="nav-number">4.</span> <span class="nav-text">HttpServletRequest(Servlet)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%8B%E7%BB%8D-2"><span class="nav-number">4.1.</span> <span class="nav-text">介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="nav-number">4.2.</span> <span class="nav-text">常用方法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%AE%9E%E4%BE%8B"><span class="nav-number">4.3.</span> <span class="nav-text">应用实例</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%E5%92%8C%E7%BB%86%E8%8A%82"><span class="nav-number">4.4.</span> <span class="nav-text">注意事项和细节</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AF%B7%E6%B1%82%E8%BD%AC%E5%8F%91"><span class="nav-number">4.5.</span> <span class="nav-text">请求转发</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81"><span class="nav-number">4.5.1.</span> <span class="nav-text">为什么需要</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%B4%E6%98%8E"><span class="nav-number">4.5.2.</span> <span class="nav-text">说明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9E%E7%8E%B0%E8%AF%B7%E6%B1%82%E8%BD%AC%E5%8F%91"><span class="nav-number">4.5.3.</span> <span class="nav-text">实现请求转发</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="nav-number">4.5.4.</span> <span class="nav-text">注意事项</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#HttpServletResponse-Servlet"><span class="nav-number">5.</span> <span class="nav-text">HttpServletResponse(Servlet)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%8B%E7%BB%8D-3"><span class="nav-number">5.1.</span> <span class="nav-text">介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%90%91%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%BF%94%E5%9B%9E%E6%95%B0%E6%8D%AE%E6%96%B9%E6%B3%95"><span class="nav-number">5.2.</span> <span class="nav-text">向客户端返回数据方法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%90%91%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%BF%94%E5%9B%9E%E6%95%B0%E6%8D%AE%E5%AE%9E%E4%BE%8B"><span class="nav-number">5.3.</span> <span class="nav-text">向客户端返回数据实例</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%E5%92%8C%E7%BB%86%E8%8A%82-1"><span class="nav-number">5.4.</span> <span class="nav-text">注意事项和细节</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AF%B7%E6%B1%82%E9%87%8D%E5%AE%9A%E5%90%91"><span class="nav-number">5.5.</span> <span class="nav-text">请求重定向</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%8B%E7%BB%8D-4"><span class="nav-number">5.5.1.</span> <span class="nav-text">介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%AE%9E%E4%BE%8B-1"><span class="nav-number">5.5.2.</span> <span class="nav-text">应用实例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9-1"><span class="nav-number">5.5.3.</span> <span class="nav-text">注意事项</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#HTTP%E5%8D%8F%E8%AE%AE"><span class="nav-number">6.</span> <span class="nav-text">HTTP协议</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%8B%E7%BB%8D-5"><span class="nav-number">6.1.</span> <span class="nav-text">介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#GET%E8%AF%B7%E6%B1%82"><span class="nav-number">6.2.</span> <span class="nav-text">GET请求</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#POST%E8%AF%B7%E6%B1%82"><span class="nav-number">6.3.</span> <span class="nav-text">POST请求</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#HTTP%E5%93%8D%E5%BA%94%E5%8C%85"><span class="nav-number">6.4.</span> <span class="nav-text">HTTP响应包</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#WEB%E5%B7%A5%E7%A8%8B%E8%B7%AF%E5%BE%84"><span class="nav-number">7.</span> <span class="nav-text">WEB工程路径</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%97%AE%E9%A2%98"><span class="nav-number">7.1.</span> <span class="nav-text">问题</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-index-html"><span class="nav-number">7.1.1.</span> <span class="nav-text">创建 index.html</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="nav-number">7.2.</span> <span class="nav-text">解决方案</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9B%B8%E5%AF%B9%E8%B7%AF%E5%BE%84"><span class="nav-number">7.2.1.</span> <span class="nav-text">相对路径</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#base%E6%A0%87%E7%AD%BE"><span class="nav-number">7.2.2.</span> <span class="nav-text">base标签</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="nav-number">7.2.2.1.</span> <span class="nav-text">基本介绍</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%AE%9E%E4%BE%8B-2"><span class="nav-number">7.2.2.2.</span> <span class="nav-text">应用实例</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-web-a-html"><span class="nav-number">7.2.2.2.1.</span> <span class="nav-text">创建 web\a.html</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-web-d1-d2-b-html"><span class="nav-number">7.2.2.2.2.</span> <span class="nav-text">创建 web\d1\d2\b.html</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-Serlvet03-java"><span class="nav-number">7.2.2.2.3.</span> <span class="nav-text">创建 Serlvet03.java</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%E5%92%8C%E7%BB%86%E8%8A%82-2"><span class="nav-number">7.3.</span> <span class="nav-text">注意事项和细节</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%BB%E7%BB%93"><span class="nav-number">7.4.</span> <span class="nav-text">总结</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BC%9A%E8%AF%9D%E6%8A%80%E6%9C%AF"><span class="nav-number">8.</span> <span class="nav-text">会话技术</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BC%9A%E8%AF%9D"><span class="nav-number">8.1.</span> <span class="nav-text">会话</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%8B%E7%BB%8D-6"><span class="nav-number">8.1.1.</span> <span class="nav-text">介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BC%9A%E8%AF%9D%E7%9A%84%E4%B8%A4%E7%A7%8D%E6%8A%80%E6%9C%AF"><span class="nav-number">8.1.2.</span> <span class="nav-text">会话的两种技术</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Cookie"><span class="nav-number">8.2.</span> <span class="nav-text">Cookie</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%8B%E7%BB%8D-7"><span class="nav-number">8.2.1.</span> <span class="nav-text">介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%9C%E7%94%A8-2"><span class="nav-number">8.2.2.</span> <span class="nav-text">作用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%AE%9E%E4%BE%8B-3"><span class="nav-number">8.2.3.</span> <span class="nav-text">应用实例</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BACookie"><span class="nav-number">8.2.3.1.</span> <span class="nav-text">创建Cookie</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AF%BB%E5%8F%96%E6%8C%87%E5%AE%9ACookie"><span class="nav-number">8.2.3.2.</span> <span class="nav-text">读取指定Cookie</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9Cookie"><span class="nav-number">8.2.3.3.</span> <span class="nav-text">修改Cookie</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Cookie%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-number">8.2.4.</span> <span class="nav-text">Cookie生命周期</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BB%8B%E7%BB%8D-8"><span class="nav-number">8.2.4.1.</span> <span class="nav-text">介绍</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%AE%9E%E4%BE%8B-4"><span class="nav-number">8.2.4.2.</span> <span class="nav-text">应用实例</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Cookie%E6%9C%89%E6%95%88%E8%B7%AF%E5%BE%84"><span class="nav-number">8.2.5.</span> <span class="nav-text">Cookie有效路径</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A7%84%E5%88%99"><span class="nav-number">8.2.5.1.</span> <span class="nav-text">规则</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%AE%9E%E4%BE%8B-5"><span class="nav-number">8.2.5.1.1.</span> <span class="nav-text">应用实例</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%E5%92%8C%E7%BB%86%E8%8A%82-3"><span class="nav-number">8.2.6.</span> <span class="nav-text">注意事项和细节</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Session"><span class="nav-number">8.3.</span> <span class="nav-text">Session</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%8B%E7%BB%8D-9"><span class="nav-number">8.3.1.</span> <span class="nav-text">介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8E%9F%E7%90%86"><span class="nav-number">8.3.2.</span> <span class="nav-text">原理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A6%82%E4%BD%95%E7%90%86%E8%A7%A3Session"><span class="nav-number">8.3.3.</span> <span class="nav-text">如何理解Session</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Session%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0%E6%9C%BA%E5%88%B6"><span class="nav-number">8.3.4.</span> <span class="nav-text">Session底层实现机制</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="nav-number">8.3.4.1.</span> <span class="nav-text">代码实现</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Session%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-number">8.3.5.</span> <span class="nav-text">Session生命周期</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BB%8B%E7%BB%8D-10"><span class="nav-number">8.3.5.1.</span> <span class="nav-text">介绍</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%AE%9E%E4%BE%8B-6"><span class="nav-number">8.3.5.2.</span> <span class="nav-text">应用实例</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%B8%B2%E6%9F%93%E6%8A%80%E6%9C%AF-JSP-%E4%BC%9A%E4%BD%BF%E7%94%A8"><span class="nav-number">9.</span> <span class="nav-text">服务器渲染技术-JSP[会使用]</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%8B%E7%BB%8D-11"><span class="nav-number">9.1.</span> <span class="nav-text">介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%A5%E9%97%A8"><span class="nav-number">9.2.</span> <span class="nav-text">入门</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BF%90%E8%A1%8C%E5%8E%9F%E7%90%86"><span class="nav-number">9.3.</span> <span class="nav-text">运行原理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8page%E6%8C%87%E4%BB%A4"><span class="nav-number">9.4.</span> <span class="nav-text">常用page指令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JSP%E5%B8%B8%E7%94%A8%E4%B8%89%E7%A7%8D%E8%84%9A%E6%9C%AC"><span class="nav-number">9.5.</span> <span class="nav-text">JSP常用三种脚本</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A3%B0%E6%98%8E%E8%84%9A%E6%9C%AC%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="nav-number">9.5.1.</span> <span class="nav-text">声明脚本基本语法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%84%9A%E6%9C%AC%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="nav-number">9.5.2.</span> <span class="nav-text">表达式脚本基本语法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%A3%E7%A0%81%E8%84%9A%E6%9C%AC%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="nav-number">9.5.3.</span> <span class="nav-text">代码脚本基本语法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JSP%E5%86%85%E7%BD%AE%E5%AF%B9%E8%B1%A1"><span class="nav-number">9.6.</span> <span class="nav-text">JSP内置对象</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%8B%E7%BB%8D-12"><span class="nav-number">9.6.1.</span> <span class="nav-text">介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B9%9D%E5%A4%A7%E5%86%85%E7%BD%AE%E5%AF%B9%E8%B1%A1"><span class="nav-number">9.6.2.</span> <span class="nav-text">九大内置对象</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JSP%E5%9F%9F%E5%AF%B9%E8%B1%A1"><span class="nav-number">9.7.</span> <span class="nav-text">JSP域对象</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#JSP%E5%9B%9B%E5%A4%A7%E5%9F%9F%E5%AF%B9%E8%B1%A1"><span class="nav-number">9.7.1.</span> <span class="nav-text">JSP四大域对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%AE%9E%E4%BE%8B-7"><span class="nav-number">9.7.2.</span> <span class="nav-text">应用实例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%E5%92%8C%E7%BB%86%E8%8A%82-4"><span class="nav-number">9.7.3.</span> <span class="nav-text">注意事项和细节</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JSP%E8%AF%B7%E6%B1%82%E8%BD%AC%E5%8F%91%E6%A0%87%E7%AD%BE"><span class="nav-number">9.8.</span> <span class="nav-text">JSP请求转发标签</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#EL%E8%A1%A8%E8%BE%BE%E5%BC%8F-JSP"><span class="nav-number">10.</span> <span class="nav-text">EL表达式(JSP)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%8B%E7%BB%8D-13"><span class="nav-number">10.1.</span> <span class="nav-text">介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8"><span class="nav-number">10.2.</span> <span class="nav-text">快速入门</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#EL%E5%B8%B8%E7%94%A8%E8%BE%93%E5%87%BA%E5%BD%A2%E5%BC%8F"><span class="nav-number">10.3.</span> <span class="nav-text">EL常用输出形式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#EL%E8%BF%90%E7%AE%97%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="nav-number">10.4.</span> <span class="nav-text">EL运算操作符</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B3%E7%B3%BB%E8%BF%90%E7%AE%97"><span class="nav-number">10.4.1.</span> <span class="nav-text">关系运算</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97"><span class="nav-number">10.4.2.</span> <span class="nav-text">逻辑运算</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AE%97%E6%9C%AF%E8%BF%90%E7%AE%97"><span class="nav-number">10.4.3.</span> <span class="nav-text">算术运算</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#EL%E7%9A%84empty%E8%BF%90%E7%AE%97"><span class="nav-number">10.5.</span> <span class="nav-text">EL的empty运算</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#EL%E4%B8%89%E5%85%83%E8%BF%90%E7%AE%97"><span class="nav-number">10.6.</span> <span class="nav-text">EL三元运算</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#EL%E7%9A%8411%E9%9A%90%E5%90%AB%E5%AF%B9%E8%B1%A1"><span class="nav-number">10.7.</span> <span class="nav-text">EL的11隐含对象</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#EL%E8%8E%B7%E5%8F%96%E5%9B%9B%E4%B8%AA%E5%9F%9F%E6%95%B0%E6%8D%AE"><span class="nav-number">10.7.1.</span> <span class="nav-text">EL获取四个域数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#pageContext%E5%AF%B9%E8%B1%A1"><span class="nav-number">10.7.2.</span> <span class="nav-text">pageContext对象</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#JSTL-JSP"><span class="nav-number">11.</span> <span class="nav-text">JSTL(JSP)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%8B%E7%BB%8D-14"><span class="nav-number">11.1.</span> <span class="nav-text">介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8-1"><span class="nav-number">11.2.</span> <span class="nav-text">快速入门</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Core%E6%A0%B8%E5%BF%83%E5%BA%93"><span class="nav-number">11.3.</span> <span class="nav-text">Core核心库</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#lt-c-set-x2F-gt"><span class="nav-number">11.3.1.</span> <span class="nav-text">&lt;c:set &#x2F;&gt;</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#lt-c-if-x2F-gt"><span class="nav-number">11.3.2.</span> <span class="nav-text">&lt;c:if &#x2F;&gt;</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#lt-c-choose-gt-lt-c-when-gt-lt-c-otherwise-gt-%E6%A0%87%E7%AD%BE"><span class="nav-number">11.3.3.</span> <span class="nav-text">&lt;c:choose&gt; &lt;c:when&gt; &lt;c:otherwise&gt;标签</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#lt-c-forEach-x2F-gt"><span class="nav-number">11.3.4.</span> <span class="nav-text">&lt;c:forEach &#x2F;&gt;</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B8%89%E5%A4%A7%E7%BB%84%E4%BB%B6-Listener%E7%9B%91%E5%90%AC%E5%99%A8"><span class="nav-number">12.</span> <span class="nav-text">三大组件-Listener监听器</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%8B%E7%BB%8D-15"><span class="nav-number">12.1.</span> <span class="nav-text">介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ServletContextListener-%E7%9B%91%E5%90%AC%E5%99%A8"><span class="nav-number">12.2.</span> <span class="nav-text">ServletContextListener 监听器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%9C%E7%94%A8-3"><span class="nav-number">12.2.1.</span> <span class="nav-text">作用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9B%B8%E5%85%B3%E6%96%B9%E6%B3%95"><span class="nav-number">12.2.2.</span> <span class="nav-text">相关方法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ServletContextAttributeListener-%E7%9B%91%E5%90%AC%E5%99%A8"><span class="nav-number">12.3.</span> <span class="nav-text">ServletContextAttributeListener 监听器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%9C%E7%94%A8-4"><span class="nav-number">12.3.1.</span> <span class="nav-text">作用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9B%B8%E5%85%B3%E6%96%B9%E6%B3%95-1"><span class="nav-number">12.3.2.</span> <span class="nav-text">相关方法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%B6%E4%BB%96%E7%9B%91%E5%90%AC%E5%99%A8-%E4%BD%BF%E7%94%A8%E8%BE%83%E5%B0%91"><span class="nav-number">12.4.</span> <span class="nav-text">其他监听器-使用较少</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#HttpSessionListener-%E7%9B%91%E5%90%AC%E5%99%A8"><span class="nav-number">12.4.1.</span> <span class="nav-text">HttpSessionListener 监听器</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%9C%E7%94%A8-5"><span class="nav-number">12.4.1.1.</span> <span class="nav-text">作用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%9B%B8%E5%85%B3%E6%96%B9%E6%B3%95-2"><span class="nav-number">12.4.1.2.</span> <span class="nav-text">相关方法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HttpSessionAttributeListener-%E7%9B%91%E5%90%AC%E5%99%A8"><span class="nav-number">12.4.2.</span> <span class="nav-text">HttpSessionAttributeListener 监听器</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%9C%E7%94%A8-6"><span class="nav-number">12.4.2.1.</span> <span class="nav-text">作用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%9B%B8%E5%85%B3%E6%96%B9%E6%B3%95-3"><span class="nav-number">12.4.2.2.</span> <span class="nav-text">相关方法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ServletRequestListener-%E7%9B%91%E5%90%AC%E5%99%A8"><span class="nav-number">12.4.3.</span> <span class="nav-text">ServletRequestListener 监听器</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%9C%E7%94%A8-7"><span class="nav-number">12.4.3.1.</span> <span class="nav-text">作用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%9B%B8%E5%85%B3%E6%96%B9%E6%B3%95-4"><span class="nav-number">12.4.3.2.</span> <span class="nav-text">相关方法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ServletRequestAttributeListener-%E7%9B%91%E5%90%AC%E5%99%A8"><span class="nav-number">12.4.4.</span> <span class="nav-text">ServletRequestAttributeListener 监听器</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%9C%E7%94%A8-8"><span class="nav-number">12.4.4.1.</span> <span class="nav-text">作用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%9B%B8%E5%85%B3%E6%96%B9%E6%B3%95-5"><span class="nav-number">12.4.4.2.</span> <span class="nav-text">相关方法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HttpSessionBindingListener-%E6%84%9F%E7%9F%A5%E7%9B%91%E5%90%AC%E5%99%A8"><span class="nav-number">12.4.5.</span> <span class="nav-text">HttpSessionBindingListener 感知监听器</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%9C%E7%94%A8-9"><span class="nav-number">12.4.5.1.</span> <span class="nav-text">作用</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HttpSessionActivationListener-%E6%84%9F%E7%9F%A5%E7%9B%91%E5%90%AC%E5%99%A8"><span class="nav-number">12.4.6.</span> <span class="nav-text">HttpSessionActivationListener 感知监听器</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%9C%E7%94%A8-10"><span class="nav-number">12.4.6.1.</span> <span class="nav-text">作用</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B8%89%E5%A4%A7%E7%BB%84%E4%BB%B6-Filter%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="nav-number">13.</span> <span class="nav-text">三大组件-Filter过滤器</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%8B%E7%BB%8D-16"><span class="nav-number">13.1.</span> <span class="nav-text">介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86"><span class="nav-number">13.2.</span> <span class="nav-text">基本原理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8-2"><span class="nav-number">13.3.</span> <span class="nav-text">快速入门</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#url-pattern"><span class="nav-number">13.4.</span> <span class="nav-text">url-pattern</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Filter%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-number">13.5.</span> <span class="nav-text">Filter生命周期</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#FilterConfig"><span class="nav-number">13.6.</span> <span class="nav-text">FilterConfig</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%8B%E7%BB%8D-17"><span class="nav-number">13.6.1.</span> <span class="nav-text">介绍</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#FilterChain"><span class="nav-number">13.7.</span> <span class="nav-text">FilterChain</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%8B%E7%BB%8D-18"><span class="nav-number">13.7.1.</span> <span class="nav-text">介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%AE%9E%E4%BE%8B-8"><span class="nav-number">13.7.2.</span> <span class="nav-text">应用实例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%E5%92%8C%E7%BB%86%E8%8A%82-5"><span class="nav-number">13.7.3.</span> <span class="nav-text">注意事项和细节</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Json"><span class="nav-number">14.</span> <span class="nav-text">Json</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%8B%E7%BB%8D-19"><span class="nav-number">14.1.</span> <span class="nav-text">介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8-3"><span class="nav-number">14.2.</span> <span class="nav-text">快速入门</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Json%E5%AF%B9%E8%B1%A1%E5%92%8C%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%AF%B9%E8%B1%A1%E8%BD%AC%E6%8D%A2"><span class="nav-number">14.3.</span> <span class="nav-text">Json对象和字符串对象转换</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%AE%9E%E4%BE%8B-9"><span class="nav-number">14.3.1.</span> <span class="nav-text">应用实例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%E5%92%8C%E7%BB%86%E8%8A%82-6"><span class="nav-number">14.3.2.</span> <span class="nav-text">注意事项和细节</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Json%E5%9C%A8Java%E4%B8%AD%E4%BD%BF%E7%94%A8"><span class="nav-number">14.4.</span> <span class="nav-text">Json在Java中使用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%B4%E6%98%8E-1"><span class="nav-number">14.4.1.</span> <span class="nav-text">说明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="nav-number">14.4.2.</span> <span class="nav-text">应用场景</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%AE%9E%E4%BE%8B-10"><span class="nav-number">14.4.3.</span> <span class="nav-text">应用实例</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Ajax"><span class="nav-number">15.</span> <span class="nav-text">Ajax</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%8B%E7%BB%8D-20"><span class="nav-number">15.1.</span> <span class="nav-text">介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF-1"><span class="nav-number">15.2.</span> <span class="nav-text">应用场景</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8E%9F%E7%90%86%E7%A4%BA%E6%84%8F%E5%9B%BE"><span class="nav-number">15.3.</span> <span class="nav-text">原理示意图</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BC%A0%E7%BB%9Fweb%E6%95%B0%E6%8D%AE%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F"><span class="nav-number">15.3.1.</span> <span class="nav-text">传统web数据通信方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Ajax%E5%8E%9F%E7%90%86%E7%A4%BA%E6%84%8F%E5%9B%BE"><span class="nav-number">15.3.2.</span> <span class="nav-text">Ajax原理示意图</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JavaScript%E5%8E%9F%E7%94%9FAjax%E8%AF%B7%E6%B1%82"><span class="nav-number">15.4.</span> <span class="nav-text">JavaScript原生Ajax请求</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%AE%9E%E4%BE%8B-%E9%AA%8C%E8%AF%81%E7%94%A8%E6%88%B7%E5%90%8D%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8"><span class="nav-number">15.4.1.</span> <span class="nav-text">应用实例-验证用户名是否存在</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JQuery%E4%B8%AD%E7%9A%84Ajax"><span class="nav-number">15.5.</span> <span class="nav-text">JQuery中的Ajax</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ajax-%E5%87%BD%E6%95%B0"><span class="nav-number">15.5.1.</span> <span class="nav-text">$.ajax 函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#get%E5%87%BD%E6%95%B0%E5%92%8C-post%E5%87%BD%E6%95%B0"><span class="nav-number">15.5.2.</span> <span class="nav-text">$.get函数和$.post函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#getJSON"><span class="nav-number">15.5.3.</span> <span class="nav-text">$.getJSON</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%AE%9E%E4%BE%8B-11"><span class="nav-number">15.5.4.</span> <span class="nav-text">应用实例</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%BA%BF%E7%A8%8B%E6%95%B0%E6%8D%AE%E5%85%B1%E4%BA%AB%E5%92%8C%E5%AE%89%E5%85%A8-ThreadLocal"><span class="nav-number">16.</span> <span class="nav-text">*线程数据共享和安全-ThreadLocal</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%8B%E7%BB%8D-21"><span class="nav-number">16.1.</span> <span class="nav-text">介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8-4"><span class="nav-number">16.2.</span> <span class="nav-text">快速入门</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90"><span class="nav-number">16.3.</span> <span class="nav-text">原理分析</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD"><span class="nav-number">17.</span> <span class="nav-text">*文件上传下载</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%8B%E7%BB%8D-22"><span class="nav-number">17.1.</span> <span class="nav-text">介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="nav-number">17.2.</span> <span class="nav-text">文件上传</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86-1"><span class="nav-number">17.2.1.</span> <span class="nav-text">基本原理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%AE%9E%E4%BE%8B-12"><span class="nav-number">17.2.2.</span> <span class="nav-text">应用实例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%E5%92%8C%E7%BB%86%E8%8A%82-7"><span class="nav-number">17.2.3.</span> <span class="nav-text">注意事项和细节</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD"><span class="nav-number">17.3.</span> <span class="nav-text">文件下载</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86-2"><span class="nav-number">17.3.1.</span> <span class="nav-text">基本原理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%AE%9E%E4%BE%8B-13"><span class="nav-number">17.3.2.</span> <span class="nav-text">应用实例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%E5%92%8C%E7%BB%86%E8%8A%82-8"><span class="nav-number">17.3.3.</span> <span class="nav-text">注意事项和细节</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="LiAng"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">LiAng</p>
  <div class="site-description" itemprop="description">永远相信美好的事情即将发生</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">4</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/Will-Liang" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Will-Liang" rel="noopener" target="_blank"><i class="github fa-fw"></i>GitHub</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://baidu.com/" title="https:&#x2F;&#x2F;baidu.com" rel="noopener" target="_blank">百度</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2022-07 – 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">LiAng</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">博客全站共91.3k字</span>
</div>



    <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

    <span id="busuanzi_container_site_pv">总访问量<span id="busuanzi_value_site_pv"></span>次</span>
    <span class="post-meta-divider">|</span>
    <span id="busuanzi_container_site_uv">总访客数<span id="busuanzi_value_site_uv"></span>人</span>
    <span class="post-meta-divider">|</span>
<!-- 不蒜子计数初始值纠正 -->
<script>
$(document).ready(function() {

    var int = setInterval(fixCount, 50);  // 50ms周期检测函数
    var countOffset = 20000;  // 初始化首次数据

    function fixCount() {            
       if (document.getElementById("busuanzi_container_site_pv").style.display != "none")
        {
            $("#busuanzi_value_site_pv").html(parseInt($("#busuanzi_value_site_pv").html()) + countOffset); 
            clearInterval(int);
        }                  
        if ($("#busuanzi_container_site_pv").css("display") != "none")
        {
            $("#busuanzi_value_site_uv").html(parseInt($("#busuanzi_value_site_uv").html()) + countOffset); // 加上初始数据 
            clearInterval(int); // 停止检测
        }  
    }
       	
});
</script> 

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  
  <script color='0,0,255' opacity='0.5' zIndex='-1' count='99' src="/lib/canvas-nest/canvas-nest.min.js"></script>
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

  

</body>
</html>
