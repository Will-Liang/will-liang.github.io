<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/kouzhaopng">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/kouzhao.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"manual","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="第一章 SpringMVC介绍官方文档spring-framework-5.3.8&#x2F;docs&#x2F;reference&#x2F;html&#x2F;web.html#spring-web        基本介绍SpringMVC特点&amp;概述 SpringMVC 从易用性，效率上比曾经流行的 Struts2 更好。 SpringMVC 是 WEB 层框架【SpringMVC 接">
<meta property="og:type" content="article">
<meta property="og:title" content="SpringMVC">
<meta property="og:url" content="http://example.com/2022/07/25/SpringMVC/index.html">
<meta property="og:site_name" content="LiAng的博客">
<meta property="og:description" content="第一章 SpringMVC介绍官方文档spring-framework-5.3.8&#x2F;docs&#x2F;reference&#x2F;html&#x2F;web.html#spring-web        基本介绍SpringMVC特点&amp;概述 SpringMVC 从易用性，效率上比曾经流行的 Struts2 更好。 SpringMVC 是 WEB 层框架【SpringMVC 接">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220620182331103.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220620183341738.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220620183745842.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220620183814971.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220620184527580.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220620184615884.png">
<meta property="og:image" content="d:/Study/VIP/主流框架/SpringMVC/笔记/SpringMVC.assets/image-20220620191532449.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220620191628655.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220620191748456.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220620184811815.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220620184903607.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220620192003886.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220620192641514.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220620193248970.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220620193103651.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220620203855416.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220621080118715.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220621082459365.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220621083132142.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220621083332444.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220621084623897.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220621085801222.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220621090120193.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220621090838564.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220621091630947.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220621092013647.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220621092836872.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220621093342178.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220621093919919.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220621095148756.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220621102456439.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220621103525087.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220621103927711.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220621103709471.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220621103726419.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220621103759996.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220621103818945.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220621104247353.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220621105958505.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220621111955373.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220621112248148.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220621112357141.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220621152738067.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220621160008428.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220621160725212.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220621160902016.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220621162038057.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220621162607460.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220621163111118.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220621163433296.png">
<meta property="og:image" content="d:/Study/VIP/主流框架/SpringMVC/笔记/SpringMVC.assets/image-20220621165820820.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220621165826808.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220621171536842.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220621172406884.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220621173156933.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220621174415573.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220621175012264.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220621181931476.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220621184217237.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220621211730490.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220623143852629.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220623152355818.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220623152817691.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220623152931917.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220623154041920.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220623154241317.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220623160336952.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220623160426633.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220623160608163.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220623162718650.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220623163635598.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220623164847936.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220623165358312.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220623171718897.png">
<meta property="og:image" content="d:/Study/VIP/主流框架/SpringMVC/笔记/SpringMVC.assets/image-20220623171755053.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220623181404116.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220623181341912.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220623181404116.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220623182038508.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220623182038508.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220623183216896.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220623191235635.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220623204737241.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220623205026575.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220623205612112.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220623205802211.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220623210056739.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220623210418843.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220623215603668.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220623215656530.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220624083147842.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220624090032242.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220624090435830.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220624091237209.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220624091311397.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220624091333021.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220624091829564.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220624095645166.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220624100114969.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220624100416764.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220624104006379.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220624105223984.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220624105631857.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220624110453453.png">
<meta property="og:image" content="d:/Study/VIP/主流框架/SpringMVC/笔记/SpringMVC.assets/image-20220624110511466.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220624112739428.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220624113543168.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220624113826165.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220624114954360.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220624113826165.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220624115612570.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220624115855116.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220624115955444.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220624145916157.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220624113826165.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220624151402883.png">
<meta property="og:image" content="http://example.com/images/SpringMVC.assets/image-20220624151915869.png">
<meta property="article:published_time" content="2022-07-25T09:37:06.000Z">
<meta property="article:modified_time" content="2022-07-25T09:45:34.567Z">
<meta property="article:author" content="LiAng">
<meta property="article:tag" content="Java">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/images/SpringMVC.assets/image-20220620182331103.png">

<link rel="canonical" href="http://example.com/2022/07/25/SpringMVC/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>SpringMVC | LiAng的博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/rss2.xml" title="LiAng的博客" type="application/rss+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>
      <a target="_blank" rel="noopener" href="https://github.com/fengye97" class="github-corner" aria-label="View source on GitHub">

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">LiAng的博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/07/25/SpringMVC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="LiAng">
      <meta itemprop="description" content="永远相信美好的事情即将发生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LiAng的博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          SpringMVC
        </h1>

        <div class="post-meta">
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-07-25 17:37:06 / 修改时间：17:45:34" itemprop="dateCreated datePublished" datetime="2022-07-25T17:37:06+08:00">2022-07-25</time>
            </span>

          
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="第一章-SpringMVC介绍"><a href="#第一章-SpringMVC介绍" class="headerlink" title="第一章 SpringMVC介绍"></a>第一章 SpringMVC介绍</h1><h2 id="官方文档"><a href="#官方文档" class="headerlink" title="官方文档"></a>官方文档</h2><p>spring-framework-5.3.8&#x2F;docs&#x2F;reference&#x2F;html&#x2F;web.html#spring-web</p>
<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220620182331103.png"> 
</div> 

<h2 id="基本介绍"><a href="#基本介绍" class="headerlink" title="基本介绍"></a>基本介绍</h2><h3 id="SpringMVC特点-amp-概述"><a href="#SpringMVC特点-amp-概述" class="headerlink" title="SpringMVC特点&amp;概述"></a>SpringMVC特点&amp;概述</h3><ol>
<li>SpringMVC 从易用性，效率上比曾经流行的 Struts2 更好。</li>
<li>SpringMVC 是 WEB 层框架【SpringMVC 接管了 Web 层组件，比如控制器、视图、视图解析、返回给用户的数据格式，同时支持 MVC 的开发模式&#x2F;开发架构】。</li>
<li>SpringMVC 通过注解，让 POJO 成为控制器，不需要继承类或者实现接口 。</li>
<li>SpringMVC 采用低耦合的组件设计方式，具有更好扩展和灵活性。</li>
<li>支持 REST 格式的 URL 请求。</li>
<li>SpringMVC 是基于 Spring 的，也就是 SpringMVC 是在 Spring 基础上的。SpringMVC 的核心包 spring-webmvc-xx.jar 和 spring-web-xx.jar</li>
</ol>
<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220620183341738.png"> 
</div> 

<h3 id="Spring-SpringMVC-SpringBoot-的关系"><a href="#Spring-SpringMVC-SpringBoot-的关系" class="headerlink" title="Spring SpringMVC SpringBoot 的关系"></a>Spring SpringMVC SpringBoot 的关系</h3><ol>
<li>Spring MVC 只是 Spring 处理 WEB 层请求的一个模块&#x2F;组件，Spring MVC 的基石是 Servlet[Java WEB] 。</li>
<li>Spring Boot 是为了简化开发者的使用，推出的封神框架(约定优于配置，简化了 Spring 的配置流程)，SpringBoot 包含很多组件&#x2F;框架，Spring就是最核心的内容之一，也包含 Spring MVC 。</li>
<li>他们的关系大概是：Spring Boot &gt; Spring &gt; Spring MVC</li>
</ol>
<h2 id="快速入门"><a href="#快速入门" class="headerlink" title="快速入门"></a>快速入门</h2><h3 id="需求说明"><a href="#需求说明" class="headerlink" title="需求说明"></a>需求说明</h3><div align="center"> 
<img src="\images\SpringMVC.assets\image-20220620183745842.png"> 
</div> 

<h3 id="登录流程分析"><a href="#登录流程分析" class="headerlink" title="登录流程分析"></a>登录流程分析</h3><div align="center"> 
<img src="\images\SpringMVC.assets\image-20220620183814971.png"> 
</div> 

<h3 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h3><h4 id="1-创建-springmvc-web-工程并配置-tomcat"><a href="#1-创建-springmvc-web-工程并配置-tomcat" class="headerlink" title="1.创建 springmvc web 工程并配置 tomcat"></a>1.创建 springmvc web 工程并配置 tomcat</h4><div align="center"> 
<img src="\images\SpringMVC.assets\image-20220620184527580.png"> 
</div> 

<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220620184615884.png"> 
</div> 

<p><img src="D:\Study\VIP\主流框架\SpringMVC\笔记\SpringMVC.assets\image-20220620191532449.png" alt="image-20220620191532449" style="zoom: 67%;" /><img src="\images\SpringMVC.assets\image-20220620191628655.png" alt="image-20220620191628655" style="zoom: 67%;" /></p>
<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220620191748456.png"> 
</div> 

<h4 id="2-导入-SpringMVC-开发需要的-jar-包"><a href="#2-导入-SpringMVC-开发需要的-jar-包" class="headerlink" title="2. 导入 SpringMVC 开发需要的 jar 包"></a>2. 导入 SpringMVC 开发需要的 jar 包</h4><div align="center"> 
<img src="\images\SpringMVC.assets\image-20220620184811815.png"> 
</div> 

<h4 id="3-创建-src-x2F-applicationContext-mvc-xml-文件-就是-spring-的容器文件-，文件名自己定"><a href="#3-创建-src-x2F-applicationContext-mvc-xml-文件-就是-spring-的容器文件-，文件名自己定" class="headerlink" title="3. 创建 src&#x2F;applicationContext-mvc.xml 文件(就是 spring 的容器文件)，文件名自己定"></a>3. 创建 src&#x2F;applicationContext-mvc.xml 文件(就是 spring 的容器文件)，文件名自己定</h4><div align="center"> 
<img src="\images\SpringMVC.assets\image-20220620184903607.png"> 
</div> 

<h4 id="4-配置-WEB-INF-x2F-web-xml"><a href="#4-配置-WEB-INF-x2F-web-xml" class="headerlink" title="4. 配置 WEB-INF&#x2F;web.xml"></a>4. 配置 WEB-INF&#x2F;web.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--配置前端控制器/中央控制器/分发控制器</span></span><br><span class="line"><span class="comment">        用户的请求都会经过它的处理</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springDispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--配置属性 contextConfigLocation，指定DispatcherServlet去操作的spring配置文件--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:applicationContext-mvc.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--在web项目启动时，就自动加载DispatcherServlet--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springDispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">            1.这里我们配置的url-pattern是 / ，表示用户的请求都经过 DispatcherServlet</span></span><br><span class="line"><span class="comment">            2.这样配置也支持 rest 风格的url请求</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="5-创建-web-x2F-login-jsp"><a href="#5-创建-web-x2F-login-jsp" class="headerlink" title="5.创建 web&#x2F;login.jsp"></a>5.创建 web&#x2F;login.jsp</h4><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;登录&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h3&gt;登录页面&lt;/h3&gt;</span><br><span class="line">&lt;%--后面再填写action</span><br><span class="line">    <span class="number">1.</span> action=<span class="string">&quot;login&quot;</span> 表示的url 是 http:<span class="comment">//localhost:8080/springmvc/login</span></span><br><span class="line">    <span class="number">2.</span> action=<span class="string">&quot;/login&quot;</span> 表示的url 是 http:<span class="comment">//localhost:8080/login</span></span><br><span class="line">--%&gt;</span><br><span class="line"></span><br><span class="line">&lt;form action=<span class="string">&quot;login&quot;</span>&gt;</span><br><span class="line">    u:&lt;input name=<span class="string">&quot;username&quot;</span> type=<span class="string">&quot;text&quot;</span>&gt; &lt;br/&gt;</span><br><span class="line">    p:&lt;input name=<span class="string">&quot;password&quot;</span> type=<span class="string">&quot;password&quot;</span>&gt;&lt;br/&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;登录&quot;</span>&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h4 id="6-创建-com-lzw-web-UserServlet-java"><a href="#6-创建-com-lzw-web-UserServlet-java" class="headerlink" title="6.创建 com\lzw\web\UserServlet.java"></a>6.创建 com\lzw\web\UserServlet.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.web;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> LiAng</span></span><br><span class="line"><span class="comment"> * 1. 如果我们使用了SpringMVC，在一个类上标识<span class="doctag">@Controller</span></span></span><br><span class="line"><span class="comment"> * 2. 表示将该类视为一个控制器，注入到控制器</span></span><br><span class="line"><span class="comment"> * 3. 比原生的Servlet开发要简化很多</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//编写方法，响应用户的请求</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 1. login() 方法是用于响应用户的登录请求</span></span><br><span class="line"><span class="comment">     * 2. <span class="doctag">@RequestMapping</span>(value = &quot;/login&quot;) 类似我们以前在原生的Servlet</span></span><br><span class="line"><span class="comment">     *   配置 url-pattern, 就是给方法配置一个url映射</span></span><br><span class="line"><span class="comment">     * 3. 即当用户在浏览器输入 http://localhost:8080/web工程路径/login 就能够访问到login()</span></span><br><span class="line"><span class="comment">     * 4. return &quot;login_ok&quot;; 表示返回结果给视图解析器(InternalResourceViewResolver)</span></span><br><span class="line"><span class="comment">     *   , 视图解析器会根据配置，来决定跳转到哪个页面</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     *     &lt;bean class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     *         &lt;property name=&quot;prefix&quot; value=&quot;/WEB-INF/pages/&quot;/&gt;</span></span><br><span class="line"><span class="comment">     *         &lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot;/&gt;</span></span><br><span class="line"><span class="comment">     *     &lt;/bean&gt;</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     *     根据上面的配置 return &quot;login_ok&quot;; 就是转发到 /WEB-INF/pages/login_ok.jsp</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/login&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">login</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;login ok......&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;login_ok&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="7-创建web-WEB-INF-pages-login-ok-jsp"><a href="#7-创建web-WEB-INF-pages-login-ok-jsp" class="headerlink" title="7.创建web\WEB-INF\pages\login_ok.jsp"></a>7.创建web\WEB-INF\pages\login_ok.jsp</h4><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;登录成功&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h1&gt;恭喜 登录成功!&lt;/h1&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h4 id="8-配置-applicationContext-mvc-xml"><a href="#8-配置-applicationContext-mvc-xml" class="headerlink" title="8.配置 applicationContext-mvc.xml"></a>8.配置 applicationContext-mvc.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--配置要自动扫描的包--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.lzw.web&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--配置视图解析器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--配置属性 suffix 和 prefix--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/pages/&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="9-登录测试"><a href="#9-登录测试" class="headerlink" title="9.登录测试"></a>9.登录测试</h4><div align="center"> 
<img src="\images\SpringMVC.assets\image-20220620192003886.png"> 
</div> 

<h3 id="注意事项和细节说明"><a href="#注意事项和细节说明" class="headerlink" title="注意事项和细节说明"></a>注意事项和细节说明</h3><ol>
<li>重点学习如何搭建一个 springmvc 项目，初步理解 springmvc 工作流程 </li>
<li>这里的 UserServlet 需要注解成@Controller ，我们称为一个 Handler 处理器 </li>
<li>UserServlet 指定 url 时，还可以这样</li>
</ol>
<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220620192641514.png"> 
</div> 

<ol start="4">
<li>关 于 SpringMVC 的 DispatcherServlet 的 配 置 文 件 ， 如 果 不 在 web.xml 指 定 applicationContext-mvc.xml, 默认在 &#x2F;WEB-INF&#x2F;springDispatcherServlet-servlet.xml 找这 个配置文件【简单看下 DispatcherServlet 的源码】。(推荐使用, 我们做下修改 ， 并完成测 试)</li>
</ol>
<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220620193248970.png"> 
</div> 

<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220620193103651.png"> 
</div> 

<h2 id="SpringMVC执行流程"><a href="#SpringMVC执行流程" class="headerlink" title="SpringMVC执行流程"></a>SpringMVC执行流程</h2><div align="center"> 
<img src="\images\SpringMVC.assets\image-20220620203855416.png"> 
</div> 

<hr>


<h1 id="第二章-RequestMapping"><a href="#第二章-RequestMapping" class="headerlink" title="第二章 RequestMapping"></a>第二章 RequestMapping</h1><h2 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h2><p><strong>@RequestMapping 注解</strong>可以指定控制器&#x2F;处理器的某个方法的请求的 url，RequestMapping : 请求映射</p>
<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220621080118715.png"> 
</div> 

<h2 id="RequestMapping-注解其它使用方式"><a href="#RequestMapping-注解其它使用方式" class="headerlink" title="@RequestMapping 注解其它使用方式"></a>@RequestMapping 注解其它使用方式</h2><h3 id="RequestMapping-可以修饰方法和类"><a href="#RequestMapping-可以修饰方法和类" class="headerlink" title="@RequestMapping 可以修饰方法和类"></a>@RequestMapping 可以修饰方法和类</h3><h4 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h4><p>​		@RequestMapping 注解可以修饰方法，还可以修饰类，当同时修饰类和方法时， 请求的 url 就是组合 <strong>&#x2F;类请求值&#x2F;方法请求值</strong>。</p>
<h4 id="应用实例"><a href="#应用实例" class="headerlink" title="应用实例"></a>应用实例</h4><h5 id="创建-UserHandler-java"><a href="#创建-UserHandler-java" class="headerlink" title="创建 UserHandler.java"></a>创建 UserHandler.java</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.web;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMethod;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> LiAng</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/user&quot;)</span></span><br><span class="line"><span class="meta">@Controller</span> <span class="comment">//UserHandler就是一个处理器/控制器</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserHandler</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 1. method=RequestMethod.POST: 表示请求 buy 目标方法必须是 post</span></span><br><span class="line"><span class="comment">     * 2. RequestMethod 四个常用选项 POST, GET, PUT, DELETE</span></span><br><span class="line"><span class="comment">     * 3. SpringMVC 控制器默认支持 GET 和 POST 两种方式</span></span><br><span class="line"><span class="comment">     * 4. buy() 方法请求的url：http://localhost:8080/工程路径/user/buy</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/buy&quot;, method = RequestMethod.POST)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">buy</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;购买商品&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="创建-web-WEB-INF-pages-success-jsp"><a href="#创建-web-WEB-INF-pages-success-jsp" class="headerlink" title="创建 web\WEB-INF\pages\success.jsp"></a>创建 web\WEB-INF\pages\success.jsp</h5><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h1&gt;操作成功！&lt;/h1&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="创建-web-request"><a href="#创建-web-request" class="headerlink" title="创建 web\request"></a>创建 web\request</h5><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;购买商品&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;购买商品&lt;/h1&gt;</span><br><span class="line">&lt;%--</span><br><span class="line">    action=<span class="string">&quot;user/buy&quot;</span> 对应url：http:<span class="comment">//localhost:8080/工程路径/user/buy</span></span><br><span class="line">--%&gt;</span><br><span class="line">&lt;form action=<span class="string">&quot;user/buy&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    购买人:&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    够买量:&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;nums&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;购买&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="完成测试"><a href="#完成测试" class="headerlink" title="完成测试"></a>完成测试</h4><div align="center"> 
<img src="\images\SpringMVC.assets\image-20220621082459365.png"> 
</div> 



<h3 id="RequestMapping-可以指定请求方式"><a href="#RequestMapping-可以指定请求方式" class="headerlink" title="@RequestMapping 可以指定请求方式"></a>@RequestMapping 可以指定请求方式</h3><h4 id="说明-1"><a href="#说明-1" class="headerlink" title="说明"></a>说明</h4><p>​		@RequestMapping 还可以指定请求的方式(post&#x2F;get&#x2F;put&#x2F;delete..)，请求的方式需要和指定的一样，否则报错。</p>
<p>​		SpringMVC 控制器默认支持GET和POST两种方式，也就是你不指定 method，可以接收 GET 和 POST 请求。</p>
<h4 id="应用实例-1"><a href="#应用实例-1" class="headerlink" title="应用实例"></a>应用实例</h4><div align="center"> 
<img src="\images\SpringMVC.assets\image-20220621083132142.png"> 
</div> 

<p>当明确指定了 method，则需要按指定方式请求，否则会报错，比如：</p>
<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220621083332444.png"> 
</div> 



<h3 id="RequestMapping-可指定-params-和-headers-支持简单表达式"><a href="#RequestMapping-可指定-params-和-headers-支持简单表达式" class="headerlink" title="@RequestMapping 可指定 params 和 headers 支持简单表达式"></a>@RequestMapping 可指定 params 和 headers 支持简单表达式</h3><h4 id="说明-2"><a href="#说明-2" class="headerlink" title="说明"></a>说明</h4><ol>
<li>param1：表示请求必须包含名为 param1 的请求参数 </li>
<li>!&#x3D;param1：表示请求不能包含名为 param1 的请求参数 </li>
<li>param1 !&#x3D; value1：表示请求包含名为 param1 的请求参数，但其值不能为 value1 </li>
<li>{“param1&#x3D;value1”, “param2”}：请求必须包含名为 param1 和 param2 的两个请求参数， 且 param1 参数的值必须为 value1</li>
</ol>
<h4 id="应用实例-2"><a href="#应用实例-2" class="headerlink" title="应用实例"></a>应用实例</h4><h5 id="修改-UserHandler-java"><a href="#修改-UserHandler-java" class="headerlink" title="修改 UserHandler.java"></a>修改 UserHandler.java</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.web;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMethod;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> LiAng</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/user&quot;)</span></span><br><span class="line"><span class="meta">@Controller</span> <span class="comment">//UserHandler就是一个处理器/控制器</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserHandler</span> &#123;</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 1. params=&quot;bookId&quot; 表示请求该目标方法时，必须给一个 bookId参数，值没有限定</span></span><br><span class="line"><span class="comment">     * 2. search(String bookId)：表示请求目标方法时，携带的 bookId=100，就会将请求携带的 bookId对应的</span></span><br><span class="line"><span class="comment">     *    值100 赋给 String bookId</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/find&quot;, params = &quot;bookId&quot;, method = RequestMethod.GET)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">search</span><span class="params">(String bookId)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;查询书籍 bookId= &quot;</span> + bookId);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="修改-request-jsp"><a href="#修改-request-jsp" class="headerlink" title="修改 request.jsp"></a>修改 request.jsp</h5><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;购买商品&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;购买商品&lt;/h1&gt;</span><br><span class="line">&lt;%--</span><br><span class="line">    action=<span class="string">&quot;user/buy&quot;</span> 对应url：http:<span class="comment">//localhost:8080/工程路径/user/buy</span></span><br><span class="line">--%&gt;</span><br><span class="line">&lt;form action=<span class="string">&quot;user/buy&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    购买人:&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    够买量:&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;nums&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;购买&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;hr&gt;&lt;h1&gt;演示 params 的使用&lt;/h1&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;user/find?bookId=100&quot;</span>&gt;查询书籍&lt;/a&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h4 id="完成测试-1"><a href="#完成测试-1" class="headerlink" title="完成测试"></a>完成测试</h4><div align="center"> 
<img src="\images\SpringMVC.assets\image-20220621084623897.png"> 
</div> 

<h4 id="小细节说明"><a href="#小细节说明" class="headerlink" title="小细节说明"></a>小细节说明</h4><h5 id="需要有-bookId-参数，并且值为-100，否则报错"><a href="#需要有-bookId-参数，并且值为-100，否则报错" class="headerlink" title="需要有 bookId 参数，并且值为 100，否则报错"></a>需要有 bookId 参数，并且值为 100，否则报错</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.web;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMethod;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> LiAng</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/user&quot;)</span></span><br><span class="line"><span class="meta">@Controller</span> <span class="comment">//UserHandler就是一个处理器/控制器</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserHandler</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * 1. params=&quot;bookId&quot; 表示请求该目标方法时，必须给一个 bookId参数，值没有限定</span></span><br><span class="line"><span class="comment">     * 2. search(String bookId)：表示请求目标方法时，携带的 bookId=100，就会将请求携带的 bookId对应的</span></span><br><span class="line"><span class="comment">     *    值100 赋给 String bookId</span></span><br><span class="line"><span class="comment">     * 3. params = &quot;bookId=100&quot; 表示必须给一个bookId参数, 而且值必须是100</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/find&quot;, params = &quot;bookId=100&quot;, method = RequestMethod.GET)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">search</span><span class="params">(String bookId)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;查询书籍 bookId= &quot;</span> + bookId);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220621085801222.png"> 
</div> 

<h5 id="需要有-bookId-参数，并且值不为-100，否则报错"><a href="#需要有-bookId-参数，并且值不为-100，否则报错" class="headerlink" title="需要有 bookId 参数，并且值不为 100，否则报错"></a>需要有 bookId 参数，并且值不为 100，否则报错</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.web;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMethod;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> LiAng</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/user&quot;)</span></span><br><span class="line"><span class="meta">@Controller</span> <span class="comment">//UserHandler就是一个处理器/控制器</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserHandler</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * 1. params=&quot;bookId&quot; 表示请求该目标方法时，必须给一个 bookId参数，值没有限定</span></span><br><span class="line"><span class="comment">     * 2. search(String bookId)：表示请求目标方法时，携带的 bookId=100，就会将请求携带的 bookId对应的</span></span><br><span class="line"><span class="comment">     *    值100 赋给 String bookId</span></span><br><span class="line"><span class="comment">     * 3. params = &quot;bookId!=100&quot; 表示必须给一个bookId参数, 而且值必须不为100</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/find&quot;, params = &quot;bookId!=100&quot;, method = RequestMethod.GET)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">search</span><span class="params">(String bookId)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;查询书籍 bookId= &quot;</span> + bookId);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220621090120193.png"> 
</div> 



<h3 id="RequestMapping-支持-Ant-风格资源地址"><a href="#RequestMapping-支持-Ant-风格资源地址" class="headerlink" title="@RequestMapping 支持 Ant 风格资源地址"></a>@RequestMapping 支持 Ant 风格资源地址</h3><h4 id="说明-3"><a href="#说明-3" class="headerlink" title="说明"></a>说明</h4><ol>
<li>?：匹配文件名中的一个字符 </li>
<li>*：匹配文件名中的任意字符 </li>
<li>**：匹配多层路径</li>
<li>Ant 风格的 url 地址举例</li>
</ol>
<p>​	&#x2F;user&#x2F;*&#x2F;createUser：匹配 &#x2F;user&#x2F;aaa&#x2F;createUser、&#x2F;user&#x2F;bbb&#x2F;createUser 等 URL</p>
<p>​	&#x2F;user&#x2F;**&#x2F;createUser：匹配 &#x2F;user&#x2F;createUser、&#x2F;user&#x2F;aaa&#x2F;bbb&#x2F;createUser 等 URL</p>
<p>​	&#x2F;user&#x2F;createUser??：匹配 &#x2F;user&#x2F;createUseraa、&#x2F;user&#x2F;createUserbb 等 URL</p>
<h4 id="应用实例-3"><a href="#应用实例-3" class="headerlink" title="应用实例"></a>应用实例</h4><h5 id="修改-UserHandler-java-1"><a href="#修改-UserHandler-java-1" class="headerlink" title="修改 UserHandler.java"></a>修改 UserHandler.java</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.web;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMethod;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> LiAng</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/user&quot;)</span></span><br><span class="line"><span class="meta">@Controller</span> <span class="comment">//UserHandler就是一个处理器/控制器</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserHandler</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 要求: 可以配置  /user/message/aa, /user/message/aa/bb/cc</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@RequestMapping</span>(value = &quot;/message/**&quot;) /** 可以匹配多层路径</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/message/**&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">im</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;发送消息&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="修改-request-jsp-1"><a href="#修改-request-jsp-1" class="headerlink" title="修改 request.jsp"></a>修改 request.jsp</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span><span class="tag">&lt;<span class="name">h1</span>&gt;</span>演示 Ant 风格的请求资源方式 <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;user/message/aa&quot;</span>&gt;</span>发送消息 1<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;user/message/aa/bb/cc&quot;</span>&gt;</span>发送消息 2<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="完成测试-2"><a href="#完成测试-2" class="headerlink" title="完成测试"></a>完成测试</h4><div align="center"> 
<img src="\images\SpringMVC.assets\image-20220621090838564.png"> 
</div> 



<h3 id="RequestMapping-可配合-PathVariable-映射-URL-绑定的占位符"><a href="#RequestMapping-可配合-PathVariable-映射-URL-绑定的占位符" class="headerlink" title="@RequestMapping 可配合 @PathVariable 映射 URL 绑定的占位符"></a>@RequestMapping 可配合 @PathVariable 映射 URL 绑定的占位符</h3><h4 id="说明-4"><a href="#说明-4" class="headerlink" title="说明"></a>说明</h4><ol>
<li>@RequestMapping 还可以配合 @PathVariable 映射 URL 绑定的占位符。 </li>
<li>这样就不需要在 url 地址上带参数名了，更加的简洁明了。</li>
</ol>
<p>比如：我们的前端页面是 这样的，kristina 和 300 是参数值</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span><span class="tag">&lt;<span class="name">h1</span>&gt;</span>占位符的演示<span class="tag">&lt;/<span class="name">h1</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;user/reg/kristina/300&quot;</span>&gt;</span>占位符的演示<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="应用实例-4"><a href="#应用实例-4" class="headerlink" title="应用实例"></a>应用实例</h4><h5 id="修改-UserHandler-java-2"><a href="#修改-UserHandler-java-2" class="headerlink" title="修改 UserHandler.java"></a>修改 UserHandler.java</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//要求： 我们希望目标方法获取到 username 和 userid, value=&quot;/xx/&#123;username&#125;&quot; - @PathVariable(&quot;username&quot;)..</span></span><br><span class="line">   <span class="comment">//前端页面: &lt;a href=&quot;user/reg/kristina/300&quot;&gt;占位符的演示&lt;/a&gt;</span></span><br><span class="line">   <span class="comment">//(value = &quot;/reg/&#123;username&#125;/&#123;userid&#125;&quot;): 表示kristina-&gt;&#123;username&#125; 300=&gt;&#123;userid&#125;</span></span><br><span class="line">  <span class="meta">@RequestMapping(value = &quot;/reg/&#123;username&#125;/&#123;userid&#125;&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">register</span><span class="params">(<span class="meta">@PathVariable(&quot;username&quot;)</span> String name, <span class="meta">@PathVariable(&quot;userid&quot;)</span> String id)</span> &#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;接收到参数--&quot;</span> + <span class="string">&quot;username= &quot;</span> + name + <span class="string">&quot;--&quot;</span> + <span class="string">&quot;usreid= &quot;</span> + id);</span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<h5 id="修改-request-jsp-2"><a href="#修改-request-jsp-2" class="headerlink" title="修改 request.jsp"></a>修改 request.jsp</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span><span class="tag">&lt;<span class="name">h1</span>&gt;</span>占位符的演示<span class="tag">&lt;/<span class="name">h1</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;user/reg/kristina/300&quot;</span>&gt;</span>占位符的演示<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="完成测试-3"><a href="#完成测试-3" class="headerlink" title="完成测试"></a>完成测试</h4><div align="center"> 
<img src="\images\SpringMVC.assets\image-20220621091630947.png"> 
</div> 

<h3 id="注意事项和细节"><a href="#注意事项和细节" class="headerlink" title="注意事项和细节"></a>注意事项和细节</h3><p><strong>1.映射的 URL，不能重复，否则发布项目时会报错</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/hi&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">hi</span><span class="params">()</span> &#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;hi&quot;</span>);</span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@RequestMapping(value = &quot;/hi&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">hi2</span><span class="params">()</span> &#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;hi&quot;</span>);</span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220621092013647.png"> 
</div> 

<p><strong>2.各种请求的简写形式</strong></p>
<p>@RequestMapping(value &#x3D; “&#x2F;buy”,method &#x3D; RequestMethod.POST) 等价 @PostMapping(value &#x3D; “&#x2F;buy”) </p>
<p>简写方式一览: @GetMapping @PostMapping @PutMapping @DeleteMapping</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//@RequestMapping(value = &quot;/buy&quot;, method = RequestMethod.POST)</span></span><br><span class="line">   <span class="meta">@PostMapping(value = &quot;/buy&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">buy</span><span class="params">()</span> &#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;购买商品&quot;</span>);</span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">   &#125;	</span><br></pre></td></tr></table></figure>

<p><strong>3.如果我们确定表单或者超链接会提交某个字段数据比如(email)，要求提交的参数名和目标方法的参数名保持一致*，否则是null</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * hello3(String email)： 如果我们的请求参数有 email=xx, 就会将传递的值,赋给String email</span></span><br><span class="line"><span class="comment">    * ,要求名称保持一致, 如果不一致，那么接收不到数据, 而是null</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> email</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="meta">@GetMapping(value = &quot;/hello3&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">hello3</span><span class="params">(String email)</span> &#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;hello3 &quot;</span> + email);</span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220621092836872.png"> 
</div> 

<h3 id="作业"><a href="#作业" class="headerlink" title="作业"></a>作业</h3><p>​		编写一个表单，以 Post 提交 Computer 信息，后端编写 ComputerHandler，可以接收到信息。</p>
<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220621093342178.png"> 
</div> 

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>电脑信息<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;computer/info&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    品牌:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;brand&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    价格:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;price&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    数量:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;nums&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.web;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PostMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> LiAng</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/computer&quot;)</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ComputerHandler</span> &#123;</span><br><span class="line">    <span class="comment">//这里一定要注意，info方法的形参名需要和请求的参数名一致</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/info&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">info</span><span class="params">(String brand, String price, String nums)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;电脑信息 brand = &quot;</span> + brand + <span class="string">&quot;,price = &quot;</span> + price + <span class="string">&quot;,nums = &quot;</span> + nums);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220621093919919.png"> 
</div> 

<hr>


<h1 id="第三章-Postman接口测试工具"><a href="#第三章-Postman接口测试工具" class="headerlink" title="第三章 Postman接口测试工具"></a>第三章 Postman接口测试工具</h1><h2 id="Postman介绍"><a href="#Postman介绍" class="headerlink" title="Postman介绍"></a>Postman介绍</h2><ol>
<li>Postman 是一款功能超级强大的用于发送 HTTP 请求的 测试工具 </li>
<li>做 WEB 页面开发和测试的人员常用工具 </li>
<li>创建和发送任何的 HTTP 请求(Get&#x2F;Post&#x2F;Put&#x2F;Delete…)</li>
</ol>
<p>官方网站：<a target="_blank" rel="noopener" href="https://www.postman.com/">https://www.postman.com/</a></p>
<p>文档：<a target="_blank" rel="noopener" href="https://learning.postman.com/docs/getting-started/introduction/">https://learning.postman.com/docs/getting-started/introduction/</a></p>
<h2 id="Postman下载和安装"><a href="#Postman下载和安装" class="headerlink" title="Postman下载和安装"></a>Postman下载和安装</h2><h3 id="下载地址"><a href="#下载地址" class="headerlink" title="下载地址"></a>下载地址</h3><p><a target="_blank" rel="noopener" href="https://www.postman.com/downloads/">https://www.postman.com/downloads/</a></p>
<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220621095148756.png"> 
</div> 

<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>双击即可安装(非常简单)，Postman 不会让你选择安装路径，会直接安装，一般安装在系统盘</p>
<h3 id="设置"><a href="#设置" class="headerlink" title="设置"></a>设置</h3><h4 id="字体设置"><a href="#字体设置" class="headerlink" title="字体设置"></a>字体设置</h4><p>File–Settings</p>
<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220621102456439.png"> 
</div> 

<h4 id="快捷键"><a href="#快捷键" class="headerlink" title="快捷键"></a>快捷键</h4><p>‘Ctrl’ + ‘+’；’Ctrl’ + ‘-‘</p>
<h2 id="Postman快速入门"><a href="#Postman快速入门" class="headerlink" title="Postman快速入门"></a>Postman快速入门</h2><h3 id="需求说明-1"><a href="#需求说明-1" class="headerlink" title="需求说明"></a>需求说明</h3><p>​		使用 Postman 向 <a target="_blank" rel="noopener" href="http://www.baidu.com/">http://www.baidu.com</a> 发出 get 请求，得到返回的 html 格式数据。</p>
<h3 id="创建-Http-Request"><a href="#创建-Http-Request" class="headerlink" title="创建 Http Request"></a>创建 Http Request</h3><p>如果你已经创建过，会直接进入 Workspace，这里灵活处理即可</p>
<p>File–New</p>
<img src="\images\SpringMVC.assets\image-20220621103525087.png" alt="image-20220621103525087" style="zoom:80%;" />

<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220621103927711.png"> 
</div> 

<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220621103709471.png"> 
</div> 

<img src="\images\SpringMVC.assets\image-20220621103726419.png" alt="image-20220621103726419" style="zoom:80%;" />

<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220621103759996.png"> 
</div> 

<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220621103818945.png"> 
</div> 

<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220621104247353.png"> 
</div> 

<h2 id="Postman完成Controller层测试"><a href="#Postman完成Controller层测试" class="headerlink" title="Postman完成Controller层测试"></a>Postman完成Controller层测试</h2><p>​		使用 Postman，完成对前面编写的 UserHandler 方法的请求。</p>
<h3 id="1-完成请求"><a href="#1-完成请求" class="headerlink" title="1.完成请求"></a>1.完成请求</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/user&quot;)</span></span><br><span class="line"><span class="meta">@Controller</span> <span class="comment">//UserHandler就是一个处理器/控制器</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserHandler</span> &#123;</span><br><span class="line">    <span class="meta">@PostMapping(value = &quot;/buy&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">buy</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;购买商品&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>测试步骤</strong></p>
<ol>
<li>确定请求的地址 url <a target="_blank" rel="noopener" href="http://localhost:8080/springmvc/user/buy">http://localhost:8080/springmvc/user/buy</a> </li>
<li>请求的方式 -Post </li>
<li>确定请求的参数&#x2F;数据 - 无 </li>
<li>确定 Headers 有没有特殊的指定</li>
</ol>
<h3 id="2-完成请求"><a href="#2-完成请求" class="headerlink" title="2.完成请求"></a>2.完成请求</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/user&quot;)</span></span><br><span class="line"><span class="meta">@Controller</span> <span class="comment">//UserHandler就是一个处理器/控制器</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserHandler</span> &#123;</span><br><span class="line">   <span class="meta">@RequestMapping(value = &quot;/find&quot;, params = &quot;bookId=100&quot;, method = RequestMethod.GET)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">search</span><span class="params">(String bookId)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;查询书籍 bookId= &quot;</span> + bookId);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;	</span><br></pre></td></tr></table></figure>

<p><strong>测试步骤</strong></p>
<ol>
<li>确定请求的地址 url <a target="_blank" rel="noopener" href="http://localhost:8080/springmvc/user/find">http://localhost:8080/springmvc/user/find</a> </li>
<li>请求的方式 -Get </li>
<li>确定请求的参数&#x2F;数据 - bookId&#x3D;100</li>
<li>确定 Headers 有没有特殊的指定 - 无</li>
</ol>
<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220621105958505.png"> 
</div> 

<h3 id="3-完成请求"><a href="#3-完成请求" class="headerlink" title="3.完成请求"></a>3.完成请求</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/user&quot;)</span></span><br><span class="line"><span class="meta">@Controller</span> <span class="comment">//UserHandler就是一个处理器/控制器</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserHandler</span> &#123;</span><br><span class="line">   <span class="meta">@RequestMapping(value = &quot;/message/**&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">im</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;发送消息&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;	</span><br></pre></td></tr></table></figure>

<p><strong>测试步骤</strong></p>
<ol>
<li>确定请求的地址 url <a target="_blank" rel="noopener" href="http://localhost:8080/springmvc/user/message/aa/bb/cc">http://localhost:8080/springmvc/user/message/aa/bb/cc</a> </li>
<li>请求的方式 -Get&#x2F;Post</li>
<li>确定请求的参数&#x2F;数据 - 无</li>
<li>确定 Headers 有没有特殊的指定 - 无</li>
</ol>
<h3 id="4-完成请求"><a href="#4-完成请求" class="headerlink" title="4.完成请求"></a>4.完成请求</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/user&quot;)</span></span><br><span class="line"><span class="meta">@Controller</span> <span class="comment">//UserHandler就是一个处理器/控制器</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserHandler</span> &#123;</span><br><span class="line">   <span class="meta">@RequestMapping(value = &quot;/reg/&#123;username&#125;/&#123;userid&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">register</span><span class="params">(<span class="meta">@PathVariable(&quot;username&quot;)</span> String name, <span class="meta">@PathVariable(&quot;userid&quot;)</span> String id)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;接收到参数--&quot;</span> + <span class="string">&quot;username= &quot;</span> + name + <span class="string">&quot;--&quot;</span> + <span class="string">&quot;usreid= &quot;</span> + id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;	</span><br></pre></td></tr></table></figure>

<p><strong>测试步骤</strong></p>
<ol>
<li>确定请求的地址 url <a target="_blank" rel="noopener" href="http://localhost:8080/springmvc/user/reg/lzw/100">http://localhost:8080/springmvc/user/reg/lzw/100</a></li>
<li>请求的方式 -Get&#x2F;Post</li>
<li>确定请求的参数&#x2F;数据 - 无</li>
<li>确定 Headers 有没有特殊的指定 - 无</li>
</ol>
<h3 id="5-完成请求"><a href="#5-完成请求" class="headerlink" title="5.完成请求"></a>5.完成请求</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/user&quot;)</span></span><br><span class="line"><span class="meta">@Controller</span> <span class="comment">//UserHandler就是一个处理器/控制器</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserHandler</span> &#123;</span><br><span class="line">   <span class="meta">@GetMapping(value = &quot;/hello3&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello3</span><span class="params">(String email)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;hello3 &quot;</span> + email);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;	</span><br></pre></td></tr></table></figure>

<p><strong>测试步骤</strong></p>
<ol>
<li>确定请求的地址 url <a target="_blank" rel="noopener" href="http://localhost:8080/springmvc/user/hello3">http://localhost:8080/springmvc/user/hello3</a></li>
<li>请求的方式 -Get</li>
<li>确定请求的参数&#x2F;数据 - email&#x3D;<a href="mailto:&#49;&#x32;&#x33;&#x40;&#49;&#x32;&#51;&#46;&#99;&#111;&#x6d;">&#49;&#x32;&#x33;&#x40;&#49;&#x32;&#51;&#46;&#99;&#111;&#x6d;</a></li>
<li>确定 Headers 有没有特殊的指定 - 无</li>
</ol>
<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220621111955373.png"> 
</div> 

<h2 id="其他说明"><a href="#其他说明" class="headerlink" title="其他说明"></a>其他说明</h2><p>在 Headers 选项页，增加 Content-Type appliction&#x2F;json</p>
<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220621112248148.png"> 
</div> 

<p>因为是 Post 请求，在 Body 选项页填写 Json 数据</p>
<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220621112357141.png"> 
</div> 

<hr>


<h1 id="第四章-Rest-优雅的url请求风格"><a href="#第四章-Rest-优雅的url请求风格" class="headerlink" title="第四章 Rest-优雅的url请求风格"></a>第四章 Rest-优雅的url请求风格</h1><h2 id="基本介绍-1"><a href="#基本介绍-1" class="headerlink" title="基本介绍"></a>基本介绍</h2><ol>
<li><p>REST：即 Representational State Transfer。(资源)表现层状态转化。是目前流行的请求方式。它结构清晰，很多网站采用。</p>
</li>
<li><p>HTTP 协议里面，四个表示操作方式的动词：GET、POST、PUT、DELETE。它们分别对应 四种基本操作：GET 用来获取资源，POST 用来新建资源，PUT 用来更新资源，DELETE 用来删除资源。</p>
</li>
<li><p>实例</p>
<p>传统的请求方法：</p>
<p>getBook?id&#x3D;1 GET； delete?id&#x3D;1 GET； update POST； add POST</p>
</li>
<li><p>传统的 url 是通过参数来说明 crud 的类型，rest 是通过 get&#x2F;post&#x2F;put&#x2F;delete 来说明 crud 的类型。</p>
</li>
</ol>
<h2 id="REST的核心过滤器"><a href="#REST的核心过滤器" class="headerlink" title="REST的核心过滤器"></a>REST的核心过滤器</h2><ol>
<li>当前的浏览器只支持 post&#x2F;get 请求，因此为了得到 put&#x2F;delete 的请求方式需要使用 Spring 提供的 HiddenHttpMethodFilter 过滤器进行转换。</li>
<li>HiddenHttpMethodFilter：浏览器 form 表单只支持 GET 与 POST 请求，而 DELETE、PUT 等 method 并不支持，Spring 添加了一个过滤器，可以将这些请求转换为标准的 http 方法，使得支持 GET、POST、PUT 与 DELETE 请求 。</li>
<li>HiddenHttpMethodFilter 能对 post 请求方式进行转换，因此我们需要特别的注意这一点 。</li>
<li>这个过滤器需要在 web.xml 中配置。</li>
</ol>
<h2 id="Rest-风格的-url-完成增删改查"><a href="#Rest-风格的-url-完成增删改查" class="headerlink" title="Rest 风格的 url-完成增删改查"></a>Rest 风格的 url-完成增删改查</h2><h3 id="代码演示"><a href="#代码演示" class="headerlink" title="代码演示"></a>代码演示</h3><h4 id="修改-web-xml-添加-HiddenHttpMethodFilter"><a href="#修改-web-xml-添加-HiddenHttpMethodFilter" class="headerlink" title="修改 web.xml 添加 HiddenHttpMethodFilter"></a>修改 web.xml 添加 HiddenHttpMethodFilter</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        1. 作用是把以 post 方式提交的delete和put请求进行转换</span></span><br><span class="line"><span class="comment">        2. 配置url-pattern 是 /* 表示请求都经过 hiddenHttpMethodFilter过滤</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>hiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>hiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--配置前端控制器/中央控制器/分发控制器</span></span><br><span class="line"><span class="comment">        用户的请求都会经过它的处理</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springDispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--配置属性 contextConfigLocation，指定DispatcherServlet去操作的spring配置文件--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;init-param&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--    &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--    &lt;param-value&gt;classpath:WEB-INF/applicationContext-mvc.xml&lt;/param-value&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;/init-param&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--在web项目启动时，就自动加载DispatcherServlet--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springDispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">            1.这里我们配置的url-pattern是 / ，表示用户的请求都经过 DispatcherServlet</span></span><br><span class="line"><span class="comment">            2.这样配置也支持 rest 风格的url请求</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="修改-springDispatcherServlet-servlet-xml"><a href="#修改-springDispatcherServlet-servlet-xml" class="headerlink" title="修改 springDispatcherServlet-servlet.xml"></a>修改 springDispatcherServlet-servlet.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:mvc</span>=<span class="string">&quot;http://www.springframework.org/schema/mvc&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--配置要自动扫描的包--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.lzw.web&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--配置视图解析器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--配置属性 suffix 和 prefix--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/pages/&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--加入两个常规配置--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--支持SpringMVC的高级功能，别入JSR303校验，映射动态请求--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span>&gt;</span><span class="tag">&lt;/<span class="name">mvc:annotation-driven</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--将SpringMVC不能处理的请求，交给tomcat处理，比如css，js--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="创建-web-rest-jsp"><a href="#创建-web-rest-jsp" class="headerlink" title="创建 web\rest.jsp"></a>创建 web\rest.jsp</h4><p>引入jQuery</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h3&gt;Rest风格的crud操作案例&lt;/h3&gt;</span><br><span class="line">    &lt;br&gt;&lt;hr&gt;</span><br><span class="line">    &lt;h3&gt;rest风格的url 查询书籍[get]&lt;/h3&gt;</span><br><span class="line">    &lt;a href=<span class="string">&quot;user/book/200&quot;</span>&gt;点击查询书籍&lt;/a&gt;</span><br><span class="line">    &lt;br&gt;&lt;hr&gt;</span><br><span class="line">    &lt;h3&gt;rest风格的url 添加书籍[post]&lt;/h3&gt;</span><br><span class="line">    &lt;form action=<span class="string">&quot;user/book&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">        name:&lt;input name=<span class="string">&quot;bookName&quot;</span> type=<span class="string">&quot;text&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;添加书籍&quot;</span>&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">    &lt;br&gt;&lt;hr&gt;</span><br><span class="line">    &lt;h3&gt;rest风格的url, 删除一本书&lt;/h3&gt;</span><br><span class="line">   </span><br><span class="line">    &lt;a href=<span class="string">&quot;user/book/600&quot;</span> id=<span class="string">&quot;deleteBook&quot;</span>&gt;删除指定id的书&lt;/a&gt;</span><br><span class="line">    &lt;form action=<span class="string">&quot;&quot;</span> method=<span class="string">&quot;post&quot;</span> id=<span class="string">&quot;hiddenForm&quot;</span>&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;hidden&quot;</span> name=<span class="string">&quot;_method&quot;</span>/&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">    &lt;br&gt;&lt;hr&gt;</span><br><span class="line">    &lt;h3&gt;rest风格的url 修改书籍[put]~&lt;/h3&gt;</span><br><span class="line">    &lt;form action=<span class="string">&quot;user/book/666&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;hidden&quot;</span> name=<span class="string">&quot;_method&quot;</span> value=<span class="string">&quot;PUT&quot;</span>&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;修改书籍~&quot;</span>&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h4 id="创建-BookHandler-java"><a href="#创建-BookHandler-java" class="headerlink" title="创建 BookHandler.java"></a>创建 BookHandler.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.web.rest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PathVariable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMethod;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> LiAng</span></span><br><span class="line"><span class="comment"> * 处理 rest 风格的请求-增删改查</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookHandler</span> &#123;</span><br><span class="line">    <span class="comment">//查询[GET]</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/book/&#123;id&#125;&quot;, method = RequestMethod.GET)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getBook</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> String id)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;查询书籍 id = &quot;</span> + id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="完成GET测试"><a href="#完成GET测试" class="headerlink" title="完成GET测试"></a>完成GET测试</h4><h4 id="修改-BookHandler-java"><a href="#修改-BookHandler-java" class="headerlink" title="修改 BookHandler.java"></a>修改 BookHandler.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//添加[POST]</span></span><br><span class="line">   <span class="meta">@PostMapping(value = &quot;/book&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">addBook</span><span class="params">(String bookName)</span> &#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;添加书籍 bookName== &quot;</span> + bookName);</span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<h4 id="完成POST测试"><a href="#完成POST测试" class="headerlink" title="完成POST测试"></a>完成POST测试</h4><p>（前端表单中输入中文，后端接收到的是乱码，后面处理）</p>
<h4 id="修改-BookHandler-java-1"><a href="#修改-BookHandler-java-1" class="headerlink" title="修改 BookHandler.java"></a>修改 BookHandler.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//删除[DELETE]</span></span><br><span class="line">   <span class="meta">@RequestMapping(value = &quot;/book/&#123;id&#125;&quot;, method = RequestMethod.DELETE)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">delBook</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> String id)</span> &#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;删除书籍 id= &quot;</span> + id);</span><br><span class="line">       <span class="comment">//return &quot;success&quot;; //[如果 这样返 回会报错 JSPs only permit GET POST or HEAD]</span></span><br><span class="line">       </span><br><span class="line">       <span class="comment">//1. redirect:/user/success 重定向</span></span><br><span class="line">       <span class="comment">//2. 会被解析成 /springmvc/user/success</span></span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;redirect:/user/success&quot;</span>; <span class="comment">//重定向到一个没有指定 method 的 Handler 方 法</span></span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/success&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">successGenecal</span><span class="params">()</span> &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>; <span class="comment">//由该方法 转发到 success.jsp 页面</span></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<h4 id="修改-rest-jsp"><a href="#修改-rest-jsp" class="headerlink" title="修改 rest.jsp"></a>修改 rest.jsp</h4><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">    &lt;script type=<span class="string">&quot;text/javascript&quot;</span> src=<span class="string">&quot;script/jquery-3.6.0.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">        $(function()&#123;</span><br><span class="line"></span><br><span class="line">            $(<span class="string">&quot;#deleteBook&quot;</span>).click(function()&#123;</span><br><span class="line">                <span class="comment">// alert(&quot;点击。。&quot;);</span></span><br><span class="line">                <span class="comment">//自己定义个提交行为</span></span><br><span class="line">                $(<span class="string">&quot;#hiddenForm&quot;</span>).attr(<span class="string">&quot;action&quot;</span>, <span class="built_in">this</span>.href);</span><br><span class="line">                $(<span class="string">&quot;:hidden&quot;</span>).val(<span class="string">&quot;DELETE&quot;</span>);</span><br><span class="line">                $(<span class="string">&quot;#hiddenForm&quot;</span>).submit();</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;<span class="comment">//改变超链接的行为，不再提交</span></span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h3&gt;Rest风格的crud操作案例&lt;/h3&gt;</span><br><span class="line">    &lt;br&gt;&lt;hr&gt;</span><br><span class="line">    &lt;h3&gt;rest风格的url 查询书籍[get]&lt;/h3&gt;</span><br><span class="line">    &lt;a href=<span class="string">&quot;user/book/200&quot;</span>&gt;点击查询书籍&lt;/a&gt;</span><br><span class="line">    &lt;br&gt;&lt;hr&gt;</span><br><span class="line">    &lt;h3&gt;rest风格的url 添加书籍[post]&lt;/h3&gt;</span><br><span class="line">    &lt;form action=<span class="string">&quot;user/book&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">        name:&lt;input name=<span class="string">&quot;bookName&quot;</span> type=<span class="string">&quot;text&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;添加书籍&quot;</span>&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">    &lt;br&gt;&lt;hr&gt;</span><br><span class="line">    &lt;h3&gt;rest风格的url, 删除一本书&lt;/h3&gt;</span><br><span class="line">    &lt;%--</span><br><span class="line">    <span class="number">1.</span> 默认情况下 &lt;a href=<span class="string">&quot;user/book/600&quot;</span>&gt;删除指定id的书&lt;/a&gt; 是get</span><br><span class="line">    <span class="number">2.</span> 怎么样将 get 请求转成 springmvc 可以识别的 delete 就要考虑HiddenHttpMethodFilter机制</span><br><span class="line">       <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">DEFAULT_METHOD_PARAM</span> <span class="operator">=</span> <span class="string">&quot;_method&quot;</span>;</span><br><span class="line">       ---------------------------------------------------</span><br><span class="line">       <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> List&lt;String&gt; ALLOWED_METHODS =</span><br><span class="line">                Collections.unmodifiableList(Arrays.asList(HttpMethod.PUT.name(),</span><br><span class="line">                        HttpMethod.DELETE.name(), HttpMethod.PATCH.name()));</span><br><span class="line">      ---------------------------------------------------</span><br><span class="line">       <span class="keyword">if</span> (<span class="string">&quot;POST&quot;</span>.equals(request.getMethod()) &amp;&amp; request.getAttribute(WebUtils.ERROR_EXCEPTION_ATTRIBUTE) == <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">paramValue</span> <span class="operator">=</span> request.getParameter(<span class="built_in">this</span>.methodParam);</span><br><span class="line">                <span class="keyword">if</span> (StringUtils.hasLength(paramValue)) &#123;</span><br><span class="line">                    <span class="type">String</span> <span class="variable">method</span> <span class="operator">=</span> paramValue.toUpperCase(Locale.ENGLISH);</span><br><span class="line">                    <span class="keyword">if</span> (ALLOWED_METHODS.contains(method)) &#123;</span><br><span class="line">                        requestToUse = <span class="keyword">new</span> <span class="title class_">HttpMethodRequestWrapper</span>(request, method);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">    <span class="number">3.</span> 上面代码可以看到 HiddenHttpMethodFilter 过滤器可以对以Post方式提交的delete,put,patch进行转换成springmvc</span><br><span class="line">       识别的 RequestMethod.DELETE / RequestMethod.PUT /...</span><br><span class="line">    <span class="number">4.</span> 我们需要将 get &lt;a href=<span class="string">&quot;user/book/600&quot;</span>&gt;删除指定id的书&lt;/a&gt; 以post方式提交给后端handler, 这样过滤器还会生效</span><br><span class="line">    <span class="number">5.</span> 我们可以用jquery来处理-引入jquery</span><br><span class="line">    --%&gt;</span><br><span class="line">    &lt;a href=<span class="string">&quot;user/book/600&quot;</span> id=<span class="string">&quot;deleteBook&quot;</span>&gt;删除指定id的书&lt;/a&gt;</span><br><span class="line">    &lt;form action=<span class="string">&quot;&quot;</span> method=<span class="string">&quot;post&quot;</span> id=<span class="string">&quot;hiddenForm&quot;</span>&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;hidden&quot;</span> name=<span class="string">&quot;_method&quot;</span>/&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">    &lt;br&gt;&lt;hr&gt;</span><br><span class="line">    &lt;h3&gt;rest风格的url 修改书籍[put]~&lt;/h3&gt;</span><br><span class="line">    &lt;form action=<span class="string">&quot;user/book/666&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;hidden&quot;</span> name=<span class="string">&quot;_method&quot;</span> value=<span class="string">&quot;PUT&quot;</span>&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;修改书籍~&quot;</span>&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h4 id="完成DELETE测试"><a href="#完成DELETE测试" class="headerlink" title="完成DELETE测试"></a>完成DELETE测试</h4><h4 id="修改-BookHandler-java-2"><a href="#修改-BookHandler-java-2" class="headerlink" title="修改 BookHandler.java"></a>修改 BookHandler.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//修改[PUT]</span></span><br><span class="line">   <span class="meta">@PutMapping(value = &quot;/book/&#123;id&#125;&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">updateBook</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> String id)</span> &#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;修改书籍 id=&quot;</span> + id);</span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;redirect:/user/success&quot;</span>; <span class="comment">//重定向到一个没有指定 method 的 Handler 方法</span></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<h4 id="完成PUT测试"><a href="#完成PUT测试" class="headerlink" title="完成PUT测试"></a>完成PUT测试</h4><h3 id="注意事项和细节说明-1"><a href="#注意事项和细节说明-1" class="headerlink" title="注意事项和细节说明"></a>注意事项和细节说明</h3><p>1、HiddenHttpMethodFilter，在将 post 转成 delete &#x2F; put 请求时，是按_method 参数名来读取的 </p>
<p>2、如果 web 项目是运行在 Tomcat 8 及以上，会发现被过滤成 DELETE 和 PUT 请求，到达控制器时能顺利执行，但是返回时（forward）会报 HTTP 405 的错误提示：消息 JSP 只允许 GET、POST 或 HEAD。（不用纠结，了解即可）</p>
<p>（1）解决方式 1：使用 Tomcat7 </p>
<p>（2）解决方式 2：将请求转发（forward）改为请求重定向（redirect）:重定向到一个 Handler， 由 Handler 转发到页面</p>
<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220621152738067.png"> 
</div> 

<hr>


<h1 id="第五章-SpringMVC映射请求数据"><a href="#第五章-SpringMVC映射请求数据" class="headerlink" title="第五章 SpringMVC映射请求数据"></a>第五章 SpringMVC映射请求数据</h1><h2 id="获取参数值"><a href="#获取参数值" class="headerlink" title="获取参数值"></a>获取参数值</h2><h3 id="说明-5"><a href="#说明-5" class="headerlink" title="说明"></a>说明</h3><p>​		开发中，如何获取到 <a target="_blank" rel="noopener" href="http://xxx/url?%E5%8F%82%E6%95%B0%E5%90%8D=%E5%8F%82%E6%95%B0%E5%80%BC&amp;%E5%8F%82%E6%95%B0%E5%90%8D=%E5%8F%82%E6%95%B0%E5%80%BC">http://xxx/url?参数名=参数值&amp;参数名=参数值</a></p>
<h3 id="应用实例-5"><a href="#应用实例-5" class="headerlink" title="应用实例"></a>应用实例</h3><h4 id="创建-VoteHandler-java"><a href="#创建-VoteHandler-java" class="headerlink" title="创建 VoteHandler.java"></a>创建 VoteHandler.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.web.requestparam;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> LiAng</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/vote&quot;)</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">VoteHandler</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@RequestParam</span>(value = &quot;name&quot;, required = false)</span></span><br><span class="line"><span class="comment">     * 1. 获取到超链接传递的数据</span></span><br><span class="line"><span class="comment">     * 2. <span class="doctag">@RequestParam</span> 表示会接收提交的参数</span></span><br><span class="line"><span class="comment">     * 3. value=&quot;name&quot; 表示提交的参数名是name</span></span><br><span class="line"><span class="comment">     * 4. required=false 表示该参数可以没有, 默认是true,表示必须有这个参数</span></span><br><span class="line"><span class="comment">     * 5. 当我们使用了<span class="doctag">@RequestParam</span>(value=&quot;name&quot;, required=false)后就请求的参数名和方法的形参名可以不一致</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/vote01&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">test01</span><span class="params">(<span class="meta">@RequestParam(value = &quot;name&quot;, required = false)</span> String username)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;得到的 username= &quot;</span> + username); <span class="comment">//返回到一个结果</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="创建-request-parameter-jsp"><a href="#创建-request-parameter-jsp" class="headerlink" title="创建 request_parameter.jsp"></a>创建 request_parameter.jsp</h4><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;测试 request parameter&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h2&gt;获取到超链接参数值&lt;/h2&gt;</span><br><span class="line">&lt;hr/&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;vote/vote01?name=lzw&quot;</span>&gt;获取超链接的参数&lt;/a&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220621160008428.png"> 
</div> 



<h2 id="获取http请求消息头"><a href="#获取http请求消息头" class="headerlink" title="获取http请求消息头"></a>获取http请求消息头</h2><p>使用较少</p>
<h3 id="应用实例-6"><a href="#应用实例-6" class="headerlink" title="应用实例"></a>应用实例</h3><h4 id="修改-VoteHandler-java"><a href="#修改-VoteHandler-java" class="headerlink" title="修改 VoteHandler.java"></a>修改 VoteHandler.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 需求: 获取http请求头信息, 获取到Accept-Encoding 和 Host</span></span><br><span class="line"><span class="comment">    * 这里涉及到前面的http协议</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@RequestHeader</span>(&quot;Http请求头字段&quot;)</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="meta">@RequestMapping(value = &quot;/vote02&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">test02</span><span class="params">(<span class="meta">@RequestHeader(&quot;Accept-encoding&quot;)</span> String ae, <span class="meta">@RequestHeader(&quot;Host&quot;)</span> String host)</span>&#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;Accept-Encoding= &quot;</span> + ae);</span><br><span class="line">       System.out.println(<span class="string">&quot;Host= &quot;</span> + host);</span><br><span class="line">       <span class="comment">//返回到一个结果</span></span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<h4 id="修改-request-parameter-jsp"><a href="#修改-request-parameter-jsp" class="headerlink" title="修改 request_parameter.jsp"></a>修改 request_parameter.jsp</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>获取到消息头<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;vote/vote02&quot;</span>&gt;</span>获取 http 消息头信息<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220621160725212.png"> 
</div> 



<h2 id="获取-javabean-形式的数据"><a href="#获取-javabean-形式的数据" class="headerlink" title="获取 javabean 形式的数据"></a>获取 javabean 形式的数据</h2><h3 id="说明-6"><a href="#说明-6" class="headerlink" title="说明"></a>说明</h3><p>​		开发中，如何获取到 javaben 的数据，就是以前的 entity&#x2F;pojo 对象数据</p>
<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220621160902016.png"> 
</div> 

<h3 id="应用实例-7"><a href="#应用实例-7" class="headerlink" title="应用实例"></a>应用实例</h3><h4 id="创建-Pet-java"><a href="#创建-Pet-java" class="headerlink" title="创建 Pet.java"></a>创建 Pet.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.web.requestparam.entity;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> LiAng</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Pet</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Pet&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="创建-Master-java"><a href="#创建-Master-java" class="headerlink" title="创建 Master.java"></a>创建 Master.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.web.requestparam.entity;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> LiAng</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Master</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Pet pet;<span class="comment">//对象的属性是另外一个对象[涉及到级联]</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Pet <span class="title function_">getPet</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> pet;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPet</span><span class="params">(Pet pet)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.pet = pet;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Master&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, pet=&quot;</span> + pet +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="修改-VoteHandler-java-1"><a href="#修改-VoteHandler-java-1" class="headerlink" title="修改 VoteHandler.java"></a>修改 VoteHandler.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 演示如果获取到提交数据-&gt;封装成java对象</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * 1. 方法的形参用对应的类型来指定即可, SpringMVC会自动的进行封装</span></span><br><span class="line"><span class="comment">     * 2. 如果自动的完成封装, 要求提交的数据，参数名和对象的字段名保持一致</span></span><br><span class="line"><span class="comment">     * 3. 如果属性是对象，这里就是仍然是通过 字段名.字段名 比如Master [pet]</span></span><br><span class="line"><span class="comment">     * , 即提交的数据 参数名 是 pet.id pet.name， 这就是级联操作</span></span><br><span class="line"><span class="comment">     * 4. 如果提交的数据 的参数名和对象的字段名不匹配，则对象的属性值就是null</span></span><br><span class="line"><span class="comment">     * 5. 怎么就封装成功[底层仍然是反射+注解..]</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/vote03&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">test03</span><span class="params">(Master master)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;master=&quot;</span> + master);</span><br><span class="line">        <span class="comment">//返回结果</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h4 id="修改-request-parameter-jsp-1"><a href="#修改-request-parameter-jsp-1" class="headerlink" title="修改 request_parameter.jsp"></a>修改 request_parameter.jsp</h4><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;hr&gt;</span><br><span class="line">&lt;h1&gt;添加主人信息&lt;/h1&gt;</span><br><span class="line">&lt;!-- <span class="number">1.</span> 这里的字段名称和对象的属性名保持一致,级联添加属性也是一样保持名字对应关系</span><br><span class="line">     <span class="number">2.</span> 如果只是添加主人信息，则去掉宠物号和宠物名输入框即可 ,pet 为 <span class="literal">null</span>--&gt;</span><br><span class="line">&lt;form action=<span class="string">&quot;vote/vote03&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    主人号:&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;id&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    主人名:&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;name&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    宠物号:&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;pet.id&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    宠物名:&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;pet.name&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;添加主人和宠物&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>

<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220621162038057.png"> 
</div> 

<h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><ol>
<li>支持级联数据获取。</li>
<li>表单的控件名称 name 需要和 javabean 对象字段对应，否则就是 null。</li>
</ol>
<h2 id="获取-servlet-api"><a href="#获取-servlet-api" class="headerlink" title="获取 servlet api"></a>获取 servlet api</h2><h3 id="说明-7"><a href="#说明-7" class="headerlink" title="说明"></a>说明</h3><ol>
<li>开发中，我们可能需要使用到原生的 servlet api ，看看如何获取 </li>
<li>使用 servlet api，需要引入 tomcat&#x2F;lib 下的 servlet-api.jar</li>
</ol>
<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220621162607460.png"> 
</div> 

<h3 id="应用实例-8"><a href="#应用实例-8" class="headerlink" title="应用实例"></a>应用实例</h3><h4 id="修改-VoteHandler-java-2"><a href="#修改-VoteHandler-java-2" class="headerlink" title="修改 VoteHandler.java"></a>修改 VoteHandler.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 使用servlet api, 来获取提交的数据</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="meta">@RequestMapping(value = &quot;/vote04&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">test04</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> &#123;</span><br><span class="line">       <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">       <span class="type">String</span> <span class="variable">pwd</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;pwd&quot;</span>);</span><br><span class="line">       System.out.println(<span class="string">&quot;username= &quot;</span> + username);</span><br><span class="line">       System.out.println(<span class="string">&quot;pwd= &quot;</span> + pwd);</span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<h4 id="修改-request-parameter-jsp-2"><a href="#修改-request-parameter-jsp-2" class="headerlink" title="修改 request_parameter.jsp"></a>修改 request_parameter.jsp</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>获取 servlet api <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;vote/vote04&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    用户名:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    密 码:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;pwd&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;添加主人和宠物&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220621163111118.png"> 
</div> 

<h3 id="注意事项-1"><a href="#注意事项-1" class="headerlink" title="注意事项"></a>注意事项</h3><ol>
<li>除了 HttpServletRequest，HttpServletResponse 其它对象也可以这样的形式获取。</li>
<li>HttpSession，java.security.Principal，InputStream，OutputStream，Reader，Writer。</li>
<li>其中一些对象也可以通过 HttpServletRequest &#x2F; HttpServletResponse 对象获取，比如 Session 对象，既可以通过参数传入，也以通过 request.getSession() 获取，效果一样，推荐使用参数形式传入，更加简单明了。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 使用servlet api, 来获取提交的数据</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="meta">@RequestMapping(value = &quot;/vote04&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">test04</span><span class="params">(HttpServletRequest request, HttpServletResponse response, HttpSession hs)</span> &#123;</span><br><span class="line">       <span class="comment">//获取到session</span></span><br><span class="line">       <span class="comment">//servlet原生的方式</span></span><br><span class="line">       <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> request.getSession();</span><br><span class="line">       System.out.println(<span class="string">&quot;session=&quot;</span> + session);</span><br><span class="line">       <span class="comment">//注意:通过参数传入的 hs 和 通request.getSession() 得到的对象是</span></span><br><span class="line">       <span class="comment">//同一个</span></span><br><span class="line">       System.out.println(<span class="string">&quot;hs= &quot;</span> + hs);</span><br><span class="line"></span><br><span class="line">       <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">       <span class="type">String</span> <span class="variable">pwd</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;pwd&quot;</span>);</span><br><span class="line">       System.out.println(<span class="string">&quot;username= &quot;</span> + username);</span><br><span class="line">       System.out.println(<span class="string">&quot;pwd= &quot;</span> + pwd);</span><br><span class="line"></span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220621163433296.png"> 
</div> 

<hr>


<h1 id="第六章-模型数据"><a href="#第六章-模型数据" class="headerlink" title="第六章 模型数据"></a>第六章 模型数据</h1><h2 id="模型数据处理-数据放入Request域"><a href="#模型数据处理-数据放入Request域" class="headerlink" title="模型数据处理-数据放入Request域"></a>模型数据处理-数据放入Request域</h2><h3 id="说明-8"><a href="#说明-8" class="headerlink" title="说明"></a>说明</h3><p>​		开发中，控制器&#x2F;处理器中获取的数据如何放入 request 域，然后在前端(VUE&#x2F;JSP&#x2F;…)取出显示。</p>
<p><img src="D:\Study\VIP\主流框架\SpringMVC\笔记\SpringMVC.assets\image-20220621165820820.png" alt="image-20220621165820820" style="zoom:80%;" /><img src="\images\SpringMVC.assets\image-20220621165826808.png" alt="image-20220621165826808" style="zoom:80%;" /></p>
<h3 id="通过-HttpServletRequest-放入-request-域"><a href="#通过-HttpServletRequest-放入-request-域" class="headerlink" title="通过 HttpServletRequest 放入 request 域"></a>通过 HttpServletRequest 放入 request 域</h3><h4 id="创建-web-model-data-jsp"><a href="#创建-web-model-data-jsp" class="headerlink" title="创建 web\model_data.jsp"></a>创建 web\model_data.jsp</h4><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;添加主人信息&lt;/h1&gt;</span><br><span class="line">&lt;form action=<span class="string">&quot;vote/vote05&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    主人号:&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;id&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    主人名:&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;name&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    宠物号:&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;pet.id&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    宠物名:&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;pet.name&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;添加主人和宠物&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="修改-VoteHandler-java-3"><a href="#修改-VoteHandler-java-3" class="headerlink" title="修改 VoteHandler.java"></a>修改 VoteHandler.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 1. 演示将提交的数据-&gt;springmvc封装到java对象-&gt;springmvc 会自动的将其放入到request域</span></span><br><span class="line"><span class="comment">    * 2. 这样我们就可以在跳转到的页面取出数据.</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="meta">@RequestMapping(value = &quot;/vote05&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">test05</span><span class="params">(Master master, HttpServletRequest request)</span> &#123;</span><br><span class="line">       <span class="comment">//1. springmvc会自动把获取的model模型，放入到request域中，名字就是master</span></span><br><span class="line">       <span class="comment">//2. 也可以手动将master放入到request</span></span><br><span class="line">       request.setAttribute(<span class="string">&quot;address&quot;</span>, <span class="string">&quot;beijing&quot;</span>);</span><br><span class="line">       <span class="comment">//3. 如果我们希望修改master的属性值</span></span><br><span class="line">       master.setName(<span class="string">&quot;nono&quot;</span>);</span><br><span class="line">       <span class="comment">//4. 分析一下springmvc默认存放对象到request域中,属性名是</span></span><br><span class="line">       <span class="comment">//   request域 (&quot;master&quot;, master) 属性名是类名/类型名 首字母小写</span></span><br><span class="line">       <span class="comment">//返回到一个结果</span></span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;vote_ok&quot;</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<h4 id="创建-web-WEB-INF-vote-ok-jsp"><a href="#创建-web-WEB-INF-vote-ok-jsp" class="headerlink" title="创建 web\WEB-INF\vote_ok.jsp"></a>创建 web\WEB-INF\vote_ok.jsp</h4><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;获取的的数据显示页面&lt;/h1&gt;</span><br><span class="line">&lt;hr&gt;</span><br><span class="line">取出 request 域的数据 &lt;br&gt;</span><br><span class="line">address: $&#123;address&#125;&lt;br&gt;</span><br><span class="line">主人名字= $&#123;requestScope.master.name&#125;</span><br><span class="line">主人信息= $&#123;requestScope.master&#125;</span><br><span class="line">宠物名字= $&#123;requestScope.master.pet.name&#125;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<img src="\images\SpringMVC.assets\image-20220621171536842.png" alt="image-20220621171536842" style="zoom:50%;" />



<h3 id="通过请求的方法参数-Map-lt-String-Object-gt-放入-request-域"><a href="#通过请求的方法参数-Map-lt-String-Object-gt-放入-request-域" class="headerlink" title="通过请求的方法参数 Map&lt;String,Object&gt; 放入 request 域"></a>通过请求的方法参数 Map&lt;String,Object&gt; 放入 request 域</h3><h4 id="修改-model-data-jsp"><a href="#修改-model-data-jsp" class="headerlink" title="修改 model_data.jsp"></a>修改 model_data.jsp</h4><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;br/&gt;</span><br><span class="line">&lt;hr/&gt;</span><br><span class="line">&lt;h1&gt;添加主人信息[测试 Map ]&lt;/h1&gt;</span><br><span class="line">&lt;form action=<span class="string">&quot;vote/vote06&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    主人号:&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;id&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    主人名:&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;name&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    宠物号:&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;pet.id&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    宠物名:&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;pet.name&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;添加主人和宠物&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>

<h4 id="修改-VoteHandler-java-4"><a href="#修改-VoteHandler-java-4" class="headerlink" title="修改 VoteHandler.java"></a>修改 VoteHandler.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 演示通过Map&lt;String,Object&gt; 设置数据到request域</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="meta">@RequestMapping(value = &quot;/vote06&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">test06</span><span class="params">(Master master, Map&lt;String, Object&gt; map)</span> &#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;------test06-----&quot;</span>);</span><br><span class="line">       <span class="comment">//1. 需求是通过map对象，添加属性到request中</span></span><br><span class="line">       <span class="comment">//2. 原理分析：springmvc会遍历map，然后将map的k-v, 存放到request域</span></span><br><span class="line">       map.put(<span class="string">&quot;address&quot;</span>,<span class="string">&quot;zhengzhou&quot;</span>);</span><br><span class="line"></span><br><span class="line">       <span class="comment">//map.put(&quot;master&quot;, null);  //页面取不出来 master了</span></span><br><span class="line">       <span class="comment">//返回到一个结果</span></span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;vote_ok&quot;</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220621172406884.png"> 
</div> 



<h3 id="通过返回-ModelAndView-对象-实现-request-域数据"><a href="#通过返回-ModelAndView-对象-实现-request-域数据" class="headerlink" title="通过返回 ModelAndView 对象 实现 request 域数据"></a>通过返回 ModelAndView 对象 实现 request 域数据</h3><h4 id="修改-model-data-jsp-1"><a href="#修改-model-data-jsp-1" class="headerlink" title="修改 model_data.jsp"></a>修改 model_data.jsp</h4><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;br/&gt;</span><br><span class="line">&lt;hr/&gt;</span><br><span class="line">&lt;h1&gt;添加主人信息[测试 ModelAndView]&lt;/h1&gt;</span><br><span class="line">&lt;form action=<span class="string">&quot;vote/vote06&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    主人号:&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;id&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    主人名:&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;name&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    宠物号:&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;pet.id&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    宠物名:&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;pet.name&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;添加主人和宠物&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>

<h4 id="修改-VoteHandler-java-5"><a href="#修改-VoteHandler-java-5" class="headerlink" title="修改 VoteHandler.java"></a>修改 VoteHandler.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 演示通过返回ModelAndView对象，将数据放入到request域</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="meta">@RequestMapping(value = &quot;/vote07&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> ModelAndView <span class="title function_">test07</span><span class="params">(Master master)</span> &#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;----test07----&quot;</span>);</span><br><span class="line">       <span class="type">ModelAndView</span> <span class="variable">modelAndView</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">       <span class="comment">//放入属性到modelAndView对象</span></span><br><span class="line">       modelAndView.addObject(<span class="string">&quot;address&quot;</span>,<span class="string">&quot;shanghai&quot;</span>);</span><br><span class="line">       <span class="comment">//modelAndView.addObject(&quot;master&quot;, null);</span></span><br><span class="line">       <span class="comment">//可以把从数据库得到的数据-&gt;对象-》放入modelAndView[Service-dao-db]</span></span><br><span class="line">       <span class="comment">//这里指定跳转的视图名称</span></span><br><span class="line">       modelAndView.setViewName(<span class="string">&quot;vote_ok&quot;</span>);</span><br><span class="line">       <span class="comment">//返回结果</span></span><br><span class="line">       <span class="keyword">return</span> modelAndView;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220621173156933.png"> 
</div> 

<h4 id="注意事项-2"><a href="#注意事项-2" class="headerlink" title="注意事项"></a>注意事项</h4><ol>
<li>从本质看，请求响应的方法 return “xx”，是返回了一个字符串，其实本质是返回了一个 ModelAndView 对象，只是默认被封装起来的。</li>
<li>ModelAndView 即可以包含 model 数据，也可以包含视图信息。</li>
<li>ModelAndView 对象的 addObject 方法可以添加 key-val 数据，默认在 request 域中。</li>
<li>ModelAndView 对象 setView 方法可以指定视图名称。</li>
</ol>
<h2 id="模型数据处理-数据放入-Session域"><a href="#模型数据处理-数据放入-Session域" class="headerlink" title="模型数据处理-数据放入 Session域"></a>模型数据处理-数据放入 Session域</h2><h3 id="说明-9"><a href="#说明-9" class="headerlink" title="说明"></a>说明</h3><p>​		开发中，控制器&#x2F;处理器中获取的数据如何放入 session 域，然后在前端(VUE&#x2F;JSP&#x2F;…)取出显示。</p>
<h3 id="应用实例-9"><a href="#应用实例-9" class="headerlink" title="应用实例"></a>应用实例</h3><h4 id="修改-model-data-jsp-2"><a href="#修改-model-data-jsp-2" class="headerlink" title="修改 model_data.jsp"></a>修改 model_data.jsp</h4><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;br/&gt;</span><br><span class="line">&lt;hr/&gt;</span><br><span class="line">&lt;h1&gt;添加主人信息[测试 Session]&lt;/h1&gt;</span><br><span class="line">&lt;form action=<span class="string">&quot;vote/vote08&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    主人号:&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;id&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    主人名:&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;name&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    宠物号:&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;pet.id&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    宠物名:&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;pet.name&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;添加主人和宠物&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>

<h4 id="修改-VoteHandler-java-6"><a href="#修改-VoteHandler-java-6" class="headerlink" title="修改 VoteHandler.java"></a>修改 VoteHandler.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 演示如何将数据设置到session域中</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="meta">@RequestMapping(value = &quot;/vote08&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">test08</span><span class="params">(Master master, HttpSession httpSession)</span> &#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;----test08----&quot;</span>);</span><br><span class="line">       <span class="comment">//master对象是默认放在request域</span></span><br><span class="line">       <span class="comment">//我们将master对象放入到session域</span></span><br><span class="line">       httpSession.setAttribute(<span class="string">&quot;master&quot;</span>,master);</span><br><span class="line">       httpSession.setAttribute(<span class="string">&quot;attribute&quot;</span>, <span class="string">&quot;guangzhou&quot;</span>);</span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;vote_ok&quot;</span>;<span class="comment">//请求转发</span></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<h4 id="修改-vote-ok-jsp"><a href="#修改-vote-ok-jsp" class="headerlink" title="修改 vote_ok.jsp"></a>修改 vote_ok.jsp</h4><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;hr&gt;</span><br><span class="line">取出 session 域的数据 &lt;br&gt;</span><br><span class="line">address: $&#123;sessionScope.address&#125;&lt;br&gt;</span><br><span class="line">主人名字= $&#123;sessionScope.master.name &#125;</span><br><span class="line">主人信息= $&#123;sessionScope.master&#125;</span><br></pre></td></tr></table></figure>

<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220621174415573.png"> 
</div> 

<h2 id="ModelAttribute-实现-prepare-方法"><a href="#ModelAttribute-实现-prepare-方法" class="headerlink" title="@ModelAttribute 实现 prepare 方法"></a>@ModelAttribute 实现 prepare 方法</h2><h3 id="说明-10"><a href="#说明-10" class="headerlink" title="说明"></a>说明</h3><p>​		开发中，有时需要使用某个前置方法(比如 prepareXxx()，方法名由程序员定)给目标方法准备一个模型对象。</p>
<ol>
<li>@ModelAttribute 注解可以实现 这样的需求。</li>
<li>在某个方法上，增加了@ModelAttribute 注解后。</li>
<li>那么在调用该 Handler 的任何一个方法时，都会先调用这个方法。</li>
</ol>
<h3 id="应用实例-10"><a href="#应用实例-10" class="headerlink" title="应用实例"></a>应用实例</h3><h4 id="修改-VoteHandler-java-7"><a href="#修改-VoteHandler-java-7" class="headerlink" title="修改 VoteHandler.java"></a>修改 VoteHandler.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 1. 当Handler的方法被标识 <span class="doctag">@ModelAttribute</span>,就视为一个前置方法</span></span><br><span class="line"><span class="comment">    * 2. 当调用该Handler的其它的方法时，都会先执行该前置方法</span></span><br><span class="line"><span class="comment">    * 3. 类似我们前面Spring中AOP的前置通知[底层是AOP机制]</span></span><br><span class="line"><span class="comment">    * 4. prepareModel前置方法，会切入到其它方法前执行..</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="meta">@ModelAttribute</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">prepareModel</span><span class="params">()</span>&#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;prepareModel()-----完成准备工作-----&quot;</span>);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220621175012264.png"> 
</div> 

<h3 id="ModelAttribute-最佳实践"><a href="#ModelAttribute-最佳实践" class="headerlink" title="@ModelAttribute 最佳实践"></a>@ModelAttribute 最佳实践</h3><ol>
<li>在修改前，在前置方法中从数据库查出这个用户。</li>
<li>在修改方法(目标方法)中，可以使用前置方法从数据库查询的用户。</li>
<li>如果表单中对用户的某个属性修改了，则以新的数据为准，如果没有修改，则以数据库的信息为准，比如：用户的某个属性不能修改，就保持原来的值。</li>
</ol>
<hr>


<h1 id="第七章-视图和视图解析器"><a href="#第七章-视图和视图解析器" class="headerlink" title="第七章 视图和视图解析器"></a>第七章 视图和视图解析器</h1><h2 id="基本介绍-2"><a href="#基本介绍-2" class="headerlink" title="基本介绍"></a>基本介绍</h2><ol>
<li>在 springMVC 中的目标方法最终返回都是一个视图(有各种视图)。</li>
<li>返回的视图都会由一个视图解析器来处理 (视图解析器有很多种)。</li>
</ol>
<h2 id="自定义视图"><a href="#自定义视图" class="headerlink" title="自定义视图"></a>自定义视图</h2><h3 id="为什么需要自定义视图"><a href="#为什么需要自定义视图" class="headerlink" title="为什么需要自定义视图"></a>为什么需要自定义视图</h3><ol>
<li><p>在默认情况下，我们都是返回默认的视图, 然后这个返回的视图交由 SpringMVC 的 InternalResourceViewResolver 视图处理器来处理的。</p>
<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220621181931476.png"> 
</div> 
</li>
<li><p>在实际开发中，我们有时需要自定义视图，这样可以满足更多更复杂的需求。</p>
</li>
</ol>
<h3 id="代码实现-1"><a href="#代码实现-1" class="headerlink" title="代码实现"></a>代码实现</h3><h4 id="配置-springDispatcherServlet-servlet-xml"><a href="#配置-springDispatcherServlet-servlet-xml" class="headerlink" title="配置 springDispatcherServlet-servlet.xml"></a>配置 springDispatcherServlet-servlet.xml</h4><p>增加自定义视图解析器</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">       1. 配置自定义视图解析器BeanNameViewResolver</span></span><br><span class="line"><span class="comment">       2. BeanNameViewResolver可以去解析我们自定义的视图</span></span><br><span class="line"><span class="comment">       3. 配置 属性 order, 表示视图解析器执行的顺序, 值越小, 优先级越高</span></span><br><span class="line"><span class="comment">       4. 属性 order 的默认值是最低优先级 ，值为 Integer.MAX_VALUE</span></span><br><span class="line"><span class="comment">          int LOWEST_PRECEDENCE = 2147483647</span></span><br><span class="line"><span class="comment">   --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.BeanNameViewResolver&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;order&quot;</span> <span class="attr">value</span>=<span class="string">&quot;99&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="创建-MyView-java"><a href="#创建-MyView-java" class="headerlink" title="创建 MyView.java"></a>创建 MyView.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.web.viewsolver;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.view.AbstractView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> LiAng</span></span><br><span class="line"><span class="comment"> * 1. MyView继承了AbstractView, 就可以作为一个视图使用</span></span><br><span class="line"><span class="comment"> * 2. <span class="doctag">@Component</span>(value = &quot;lzwView&quot;),该视图会注入到容器中, 名字/id是 lzwView</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component(value = &quot;lzwView&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyView</span> <span class="keyword">extends</span> <span class="title class_">AbstractView</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">renderMergedOutputModel</span><span class="params">(Map&lt;String, Object&gt; model, HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">//完成视图渲染</span></span><br><span class="line">        <span class="comment">//并且可以确定我们要跳转的页面 [请求转发] /WEB-INF/pages/my_view.jsp</span></span><br><span class="line">        System.out.println(<span class="string">&quot;进入到自己的视图..&quot;</span>);</span><br><span class="line">        <span class="comment">//1. 下面就是进行请求转发到 /WEB-INF/pages/my_view.jsp</span></span><br><span class="line">        <span class="comment">//2. /WEB-INF/pages/my_view.jsp 会被springmvc解析成</span></span><br><span class="line">        <span class="comment">//   /springmvc/WEB-INF/pages/my_view.jsp</span></span><br><span class="line">        request.getRequestDispatcher(<span class="string">&quot;/WEB-INF/pages/my_view.jsp&quot;</span>).forward(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="创建-GoodsHandler-java"><a href="#创建-GoodsHandler-java" class="headerlink" title="创建 GoodsHandler.java"></a>创建 GoodsHandler.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.web.viewsolver;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> LiAng</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/goods&quot;)</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GoodsHandler</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/buy&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">buy</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;-----buy()-----&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;lzwView&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="创建-web-view-jsp"><a href="#创建-web-view-jsp" class="headerlink" title="创建 web\view.jsp"></a>创建 web\view.jsp</h4><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;my_view页面&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;进入到my_view页面&lt;/h1&gt;</span><br><span class="line">&lt;p&gt;从自定义视图来的。。&lt;/p&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="完成测试-4"><a href="#完成测试-4" class="headerlink" title="完成测试"></a>完成测试</h3><div align="center"> 
<img src="\images\SpringMVC.assets\image-20220621184217237.png"> 
</div> 

<h3 id="自定义视图工作流程小结"><a href="#自定义视图工作流程小结" class="headerlink" title="自定义视图工作流程小结"></a>自定义视图工作流程小结</h3><ol>
<li>自定义视图：创建一个 View 的 bean，该 bean 需要继承自 AbstractView，并实现 renderMergedOutputModel 方法。</li>
<li>并把自定义 View 加入到 IOC 容器中。</li>
<li>自定义视图的视图处理器，使用 BeanNameViewResolver， 这个视图处理器也需要配置 到 IOC 容器。</li>
<li>BeanNameViewResolver 的调用优先级需要设置一下，设置 order 比 Integer.MAX_VAL 小的值，以确保其在 InternalResourceViewResolver 之前被调用。</li>
</ol>
<h3 id="自定义视图-工作流程"><a href="#自定义视图-工作流程" class="headerlink" title="自定义视图-工作流程"></a>自定义视图-工作流程</h3><ol>
<li>SpringMVC 调用目标方法，返回自定义 View 在 IOC 容器中的 id 。</li>
<li>SpringMVC 调用 BeanNameViewResolver 解析视图：从 IOC 容器中获取 返回 id 值对应的 bean，即自定义的 View 的对象。</li>
<li>SpringMVC 调用自定义视图的 renderMergedOutputModel 方法渲染视图 。</li>
<li>如果在 SpringMVC 调用目标方法，返回自定义 View 在 IOC 容器中的 id，不存在，则仍然按照默认的视图处理器机制处理。</li>
</ol>
<h2 id="目标方法直接指定转发或重定向"><a href="#目标方法直接指定转发或重定向" class="headerlink" title="目标方法直接指定转发或重定向"></a>目标方法直接指定转发或重定向</h2><h3 id="使用实例"><a href="#使用实例" class="headerlink" title="使用实例"></a>使用实例</h3><p>​		目标方法中指定转发或者重定向。	</p>
<ol>
<li>默认返回的方式是请求转发，然后用视图处理器进行处理，比如在目标方法中这样写：</li>
</ol>
<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220621211730490.png"> 
</div> 

<ol start="2">
<li>也可以在目标方法直接指定重定向或转发的 url 地址。</li>
<li>如果指定重定向，不能定向到 &#x2F;WEB-INF 目录中。</li>
</ol>
<h3 id="代码实现-2"><a href="#代码实现-2" class="headerlink" title="代码实现"></a>代码实现</h3><h4 id="修改-GoodsHandler-java"><a href="#修改-GoodsHandler-java" class="headerlink" title="修改 GoodsHandler.java"></a>修改 GoodsHandler.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 演示直接指定要请求转发的或者是重定向的页面</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="meta">@RequestMapping(value = &quot;/order&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">order</span><span class="params">()</span>&#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;-----order()-----&quot;</span>);</span><br><span class="line">       <span class="comment">//请求转发到 /WEB-INF/pages/my_view.jsp</span></span><br><span class="line">       <span class="comment">//下面的 /WEB-INF/pages/my_view.jsp 被解析成 /springmvc/WEB-INF/pages/my_view.jsp</span></span><br><span class="line">       <span class="comment">//return &quot;forward:/WEB-INF/pages/my_view.jsp&quot;;</span></span><br><span class="line">       <span class="comment">//return &quot;forward:/aa/bb/ok.jsp&quot;;</span></span><br><span class="line"></span><br><span class="line">       <span class="comment">//直接指定要重定向的页面</span></span><br><span class="line">       <span class="comment">//1. 对于重定向来说，不能重定向到 /WEB-INF/ 目录下</span></span><br><span class="line">       <span class="comment">//2. redirect 关键字，表示进行重定向</span></span><br><span class="line">       <span class="comment">//3. /login.jsp 在服务器解析 /springmvc/login.jsp</span></span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;redirect:/login.jsp&quot;</span>;</span><br><span class="line"></span><br><span class="line">       <span class="comment">// /WEB-INF/pages/my_view.jsp 被解析 /springmvc/WEB-INF/pages/my_view.jsp</span></span><br><span class="line">       <span class="comment">//return &quot;redirect:/WEB-INF/pages/my_view.jsp&quot;;</span></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<h4 id="修改-view-jsp"><a href="#修改-view-jsp" class="headerlink" title="修改 view.jsp"></a>修改 view.jsp</h4><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=<span class="string">&quot;goods/order&quot;</span>&gt;测试在目标方法中指定请求转发或者重定向到页面&lt;/a&gt;</span><br></pre></td></tr></table></figure>

<h3 id="完成测试-5"><a href="#完成测试-5" class="headerlink" title="完成测试"></a>完成测试</h3><h2 id="作业-1"><a href="#作业-1" class="headerlink" title="作业"></a>作业</h2><p>完成一个简单的用户登录案例</p>
<ol>
<li>编写登录页面 login.jsp </li>
<li>LoginHandler [doLogin 方法]，如果用户输入用户名是 lzw，密码 123 就可以登录成功</li>
<li>创建 JavaBean：User.java </li>
<li>表单提交数据到 doLogin 方法，以 User 对象形式接收</li>
<li>登录成功到页面 login_ok.jsp 并显示登录欢迎信息 </li>
<li>登录失败，到页面 login_error.jsp, 并给出重新登录的超链接</li>
</ol>
<h3 id="代码实现-3"><a href="#代码实现-3" class="headerlink" title="代码实现"></a>代码实现</h3><h4 id="创建-login-jsp"><a href="#创建-login-jsp" class="headerlink" title="创建 login.jsp"></a>创建 login.jsp</h4><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;登录&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h3&gt;登录页面&lt;/h3&gt;</span><br><span class="line">&lt;form action=<span class="string">&quot;&lt;%=request.getContextPath()%&gt;/login/doLogin method=&quot;</span>post<span class="string">&quot;&gt;</span></span><br><span class="line"><span class="string">    u:&lt;input name=&quot;</span>username<span class="string">&quot; type=&quot;</span>text<span class="string">&quot;&gt; &lt;br/&gt;</span></span><br><span class="line"><span class="string">    p:&lt;input name=&quot;</span>password<span class="string">&quot; type=&quot;</span>password<span class="string">&quot;&gt;&lt;br/&gt;</span></span><br><span class="line"><span class="string">    &lt;input type=&quot;</span>submit<span class="string">&quot; value=&quot;</span>登录<span class="string">&quot;&gt;</span></span><br><span class="line"><span class="string">&lt;/form&gt;</span></span><br><span class="line"><span class="string">&lt;/body&gt;</span></span><br><span class="line"><span class="string">&lt;/html&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="创建-User-java"><a href="#创建-User-java" class="headerlink" title="创建 User.java"></a>创建 User.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.web.homework.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getUsername</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUsername</span><span class="params">(String username)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getPassword</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPassword</span><span class="params">(String password)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;User&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;username=&#x27;&quot;</span> + username + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, password=&#x27;&quot;</span> + password + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="创建-LoginHandler-java"><a href="#创建-LoginHandler-java" class="headerlink" title="创建 LoginHandler.java"></a>创建 LoginHandler.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.web.homework;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.lzw.web.homework.entity.User;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/login&quot;)</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginHandler</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/doLogin&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">doLogin</span><span class="params">(User user)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;lzw&quot;</span>.equals(user.getUsername()) &amp;&amp; <span class="string">&quot;123&quot;</span>.equals(user.getPassword()))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;forward:/WEB-INF/pages/homework/login_ok&quot;</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;forward:/WEB-INF/pages/homework/login_ok&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="创建-login-ok-jsp"><a href="#创建-login-ok-jsp" class="headerlink" title="创建 login_ok.jsp"></a>创建 login_ok.jsp</h4><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;登录成功&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h1&gt;恭喜 登录成功!&lt;/h1&gt;</span><br><span class="line">    &lt;h2&gt;欢迎$&#123;requestScope.user.username&#125;&lt;/h2&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h4 id="创建-login-error-jsp"><a href="#创建-login-error-jsp" class="headerlink" title="创建 login_error.jsp"></a>创建 login_error.jsp</h4><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;登录失败&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h1&gt;登录失败&lt;/h1&gt;</span><br><span class="line">    &lt;%--</span><br><span class="line">        <span class="number">1.</span> 这里考察 web工程路径知识点</span><br><span class="line">        <span class="number">2.</span> &lt;%=request.getContextPath()%&gt;/homework/login.jsp</span><br><span class="line">        解析成 /springmvc/homework/login.jsp</span><br><span class="line">        <span class="number">3.</span> 浏览器会解析 第一个 / 为 http:<span class="comment">//localhost:8080/</span></span><br><span class="line">    --%&gt;</span><br><span class="line">    &lt;a href=<span class="string">&quot;&lt;%=request.getContextPath()%&gt;/homework/login.jsp&quot;</span>&gt;重新登录&lt;/a&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<hr>

<h1 id="第八章-数据格式化"><a href="#第八章-数据格式化" class="headerlink" title="第八章 数据格式化"></a>第八章 数据格式化</h1><h2 id="基本介绍-3"><a href="#基本介绍-3" class="headerlink" title="基本介绍"></a>基本介绍</h2><p>​		<strong>基本数据类型可以和字符串之间自动完成转换，比如：</strong></p>
<p>​		<strong>Spring MVC 上下文中内建了很多转换器，可完成大多数 Java 类型的转换工作。【这里只列出部分】</strong></p>
<p>​		ConversionService converters &#x3D; java.lang.Boolean -&gt; java.lang.String : org.springframework.core.convert.support.ObjectToStringConverter@f874ca </p>
<p>​		java.lang.Character -&gt; java.lang.Number : CharacterToNumberFactory@f004c9 </p>
<p>​		java.lang.Character -&gt; java.lang.String : ObjectToStringConverter@68a961 </p>
<p>​		java.lang.Enum -&gt; java.lang.String : EnumToStringConverter@12f060a</p>
<p>​		java.lang.Number -&gt; java.lang.Character : NumberToCharacterConverter@1482ac5 </p>
<p>​		java.lang.Number -&gt; java.lang.Number : NumberToNumberConverterFactory@126c6f </p>
<p>​		java.lang.Number -&gt; java.lang.String : ObjectToStringConverter@14888e8 </p>
<p>​		java.lang.String -&gt; java.lang.Boolean : StringToBooleanConverter@1ca6626 </p>
<p>​		java.lang.String -&gt; java.lang.Character : StringToCharacterConverter@1143800 </p>
<p>​		java.lang.String -&gt; java.lang.Enum : StringToEnumConverterFactory@1bba86e </p>
<p>​		java.lang.String -&gt; java.lang.Number : StringToNumberConverterFactory@18d2c12 </p>
<p>​		java.lang.String -&gt; java.util.Locale : StringToLocaleConverter@3598e1 </p>
<p>​		java.lang.String -&gt; java.util.Properties : StringToPropertiesConverter@c90828 </p>
<p>​		java.lang.String -&gt; java.util.UUID : StringToUUIDConverter@a42f23 </p>
<p>​		java.util.Locale -&gt; java.lang.String : ObjectToStringConverter@c7e20a </p>
<p>​		java.util.Properties -&gt; java.lang.String : PropertiesToStringConverter@367a7f </p>
<p>​		java.util.UUID -&gt; java.lang.String : ObjectToStringConverter@112b07f</p>
<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220623143852629.png"> 
</div> 

<h2 id="基本数据类型和字符串自动转换"><a href="#基本数据类型和字符串自动转换" class="headerlink" title="基本数据类型和字符串自动转换"></a>基本数据类型和字符串自动转换</h2><h3 id="应用实例-11"><a href="#应用实例-11" class="headerlink" title="应用实例"></a>应用实例</h3><h4 id="创建Monster类"><a href="#创建Monster类" class="headerlink" title="创建Monster类"></a>创建Monster类</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.web.datavalid.entity;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> LiAng</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Monster</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Monster</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Monster</span><span class="params">(Integer id, String email, Integer age, String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">        <span class="built_in">this</span>.email = email;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getEmail</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> email;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setEmail</span><span class="params">(String email)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.email = email;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(Integer age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Monster&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, email=&#x27;&quot;</span> + email + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="创建-web-x2F-data-valid-jsp"><a href="#创建-web-x2F-data-valid-jsp" class="headerlink" title="创建 web&#x2F;data_valid.jsp"></a>创建 web&#x2F;data_valid.jsp</h4><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;SpringMVC[数据格式/验证等]&lt;/h1&gt;</span><br><span class="line">&lt;hr&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;&lt;%=request.getContextPath()%&gt;/addMonsterUI&quot;</span>&gt;添加妖怪&lt;/a&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h4 id="创建-MonsterHandler-java"><a href="#创建-MonsterHandler-java" class="headerlink" title="创建 MonsterHandler.java"></a>创建 MonsterHandler.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.web.datavalid;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.lzw.web.datavalid.entity.Monster;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Scope;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> LiAng</span></span><br><span class="line"><span class="comment"> * MonsterHandler 处理器响应用户提交数据</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Scope</span>(value = &quot;prototype&quot;) 表示每次请求MonsterHandler会生成一个新的对象</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@Scope(value = &quot;prototype&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MonsterHandler</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 显示添加monster的界面</span></span><br><span class="line"><span class="comment">     * 1. 这里Map&lt;String, Object&gt; map</span></span><br><span class="line"><span class="comment">     * 2. 当我们向map添加的数据时，会默认存放到request域</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> map</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/addMonsterUI&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">addMonsterUI</span><span class="params">(Map&lt;String, Object&gt; map)</span> &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         1. 这里的表单，我们使用springMVC的标签来完成</span></span><br><span class="line"><span class="comment">         2. SpringMVC 表单标签在显示之前必须在 request 中有一个 bean, 该 bean 的属性和表单标签的字段要对应!</span></span><br><span class="line"><span class="comment">         request 中的 key 为: form 标签的 modelAttrite 属性值， 比如这里的monsters</span></span><br><span class="line"><span class="comment">         3. SpringMVC 的 form:form 标签的 action 属性值中的 / 不代表 WEB 应用的根目录.</span></span><br><span class="line"><span class="comment">         4. &lt;form:form action=&quot;?&quot; method=&quot;POST&quot; modelAttribute=&quot;monster&quot;&gt;</span></span><br><span class="line"><span class="comment">         //这里需要给request增加一个 monster，因为jsp 页面 的modelAttribute=&quot;monster&quot;需要</span></span><br><span class="line"><span class="comment">         //这时是springMVC的内部的检测机制  即使是一个空的也需要，否则报错.</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="comment">//如果你跳转的页面使用springmvc标签</span></span><br><span class="line">        <span class="comment">//就需要准备一个对象，放入request域中，这个对象的属性名 monster, 对于</span></span><br><span class="line">        <span class="comment">//springmvc表单标签的 modelAttribute=&quot;monster&quot;</span></span><br><span class="line">        map.put(<span class="string">&quot;monster&quot;</span>,<span class="keyword">new</span> <span class="title class_">Monster</span>());</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;datavalid/monster_addUI&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="创建-web-x2F-WEB-INF-x2F-pages-x2F-datavalid-x2F-monster-addUI-jsp"><a href="#创建-web-x2F-WEB-INF-x2F-pages-x2F-datavalid-x2F-monster-addUI-jsp" class="headerlink" title="创建 web&#x2F;WEB-INF&#x2F;pages&#x2F;datavalid&#x2F;monster_addUI.jsp"></a>创建 web&#x2F;WEB-INF&#x2F;pages&#x2F;datavalid&#x2F;monster_addUI.jsp</h4><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">&quot;form&quot;</span> uri=<span class="string">&quot;http://www.springframework.org/tags/form&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h3&gt;添加妖怪&lt;/h3&gt;</span><br><span class="line">&lt;!-- 这里的表单，我们使用springMVC的标签来完成</span><br><span class="line">特别说明几点:</span><br><span class="line">    <span class="number">1.</span> SpringMVC 表单标签在显示之前必须在 request 中有一个 bean, 该 bean 的属性和表单标签的字段要对应!</span><br><span class="line">    request 中的 key 为: form 标签的 modelAttribute 属性值， 比如这里的monsters</span><br><span class="line">    <span class="number">2.</span> SpringMVC 的 form:form 标签的 action 属性值中的 / 不代表 WEB 应用的根目录.</span><br><span class="line">    <span class="number">3.</span> 这里使用springmvc的标签的主要的目的是方便提示信息回显</span><br><span class="line">--&gt;</span><br><span class="line">&lt;form:form action=<span class="string">&quot;save&quot;</span> method=<span class="string">&quot;post&quot;</span> modelAttribute=<span class="string">&quot;monster&quot;</span>&gt;</span><br><span class="line">    妖怪名字: &lt;form:input path=<span class="string">&quot;name&quot;</span>/&gt;&lt;br&gt;&lt;br&gt;</span><br><span class="line">    妖怪年龄~: &lt;form:input path=<span class="string">&quot;age&quot;</span>/&gt;&lt;br&gt;&lt;br&gt;</span><br><span class="line">    电子邮件: &lt;form:input path=<span class="string">&quot;email&quot;</span>/&gt;&lt;br&gt;&lt;br&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;添加妖怪&quot;</span>/&gt;</span><br><span class="line">&lt;/form:form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h4 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h4><div align="center"> 
<img src="\images\SpringMVC.assets\image-20220623152355818.png"> 
</div> 

<h4 id="创建-web-x2F-WEB-INF-x2F-pages-x2F-datavalid-x2F-success-jsp"><a href="#创建-web-x2F-WEB-INF-x2F-pages-x2F-datavalid-x2F-success-jsp" class="headerlink" title="创建 web&#x2F;WEB-INF&#x2F;pages&#x2F;datavalid&#x2F;success.jsp"></a>创建 web&#x2F;WEB-INF&#x2F;pages&#x2F;datavalid&#x2F;success.jsp</h4><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;添加成功&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;添加成功！！！&lt;/h1&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h4 id="修改-MonsterHandler-java"><a href="#修改-MonsterHandler-java" class="headerlink" title="修改 MonsterHandler.java"></a>修改 MonsterHandler.java</h4><p>添加方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 编写方法,处理添加妖怪</span></span><br><span class="line"><span class="comment">    * 1. springmvc可以将提交的数据，按照参数名和对象的属性名匹配</span></span><br><span class="line"><span class="comment">    * 2. 直接封装到对象中</span></span><br><span class="line"><span class="comment">    * String =&gt; Integer</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> monster</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="meta">@RequestMapping(value = &quot;/save&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">save</span><span class="params">(Monster monster)</span>&#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;----monster---&quot;</span> + monster);</span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;datavalid/success&quot;</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<h3 id="完成测试-6"><a href="#完成测试-6" class="headerlink" title="完成测试"></a>完成测试</h3><ol>
<li>如果age 输入的是 数字，则通过, 说明SpringMVC可以将提交的字符串 数字，比如”28”，转成 Integer&#x2F;int。</li>
<li>如果不是数字，则给出 400 的页面。</li>
</ol>
<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220623152817691.png"> 
</div> 

<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220623152931917.png"> 
</div> 



<h2 id="特殊数据类型和字符串间的转换"><a href="#特殊数据类型和字符串间的转换" class="headerlink" title="特殊数据类型和字符串间的转换"></a>特殊数据类型和字符串间的转换</h2><h3 id="应用实例-12"><a href="#应用实例-12" class="headerlink" title="应用实例"></a>应用实例</h3><ol>
<li>特殊数据类型和字符串之间的转换使用注解(比如日期，规定格式的小数比如货币形式等) </li>
<li>对于日期和货币可以使用 @DateTimeFormat 和 @NumberFormat 注解，把这两个注解标记在字段上即可</li>
</ol>
<h4 id="修改-Monster-java"><a href="#修改-Monster-java" class="headerlink" title="修改 Monster.java"></a>修改 Monster.java</h4><p>增加字段</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)</span></span><br><span class="line">   <span class="keyword">private</span> Date birthday;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@NumberFormat(pattern = &quot;###,###.##&quot;)</span></span><br><span class="line">   <span class="keyword">private</span> Float salary;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> Date <span class="title function_">getBirthday</span><span class="params">()</span> &#123;</span><br><span class="line">       <span class="keyword">return</span> birthday;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBirthday</span><span class="params">(Date birthday)</span> &#123;</span><br><span class="line">       <span class="built_in">this</span>.birthday = birthday;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> Float <span class="title function_">getSalary</span><span class="params">()</span> &#123;</span><br><span class="line">       <span class="keyword">return</span> salary;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSalary</span><span class="params">(Float salary)</span> &#123;</span><br><span class="line">       <span class="built_in">this</span>.salary = salary;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Monster</span><span class="params">(Integer id, String email, Integer age, String name, Date birthday, Float salary)</span> &#123;</span><br><span class="line">       <span class="built_in">this</span>.id = id;</span><br><span class="line">       <span class="built_in">this</span>.email = email;</span><br><span class="line">       <span class="built_in">this</span>.age = age;</span><br><span class="line">       <span class="built_in">this</span>.name = name;</span><br><span class="line">       <span class="built_in">this</span>.birthday = birthday;</span><br><span class="line">       <span class="built_in">this</span>.salary = salary;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;Monster&#123;&quot;</span> +</span><br><span class="line">               <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">               <span class="string">&quot;, email=&#x27;&quot;</span> + email + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">               <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">               <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">               <span class="string">&quot;, birthday=&quot;</span> + birthday +</span><br><span class="line">               <span class="string">&quot;, salary=&quot;</span> + salary +</span><br><span class="line">               <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<h4 id="修改-web-x2F-WEB-INF-x2F-pages-x2F-datavalid-x2F-monster-addUI-jsp"><a href="#修改-web-x2F-WEB-INF-x2F-pages-x2F-datavalid-x2F-monster-addUI-jsp" class="headerlink" title="修改 web&#x2F;WEB-INF&#x2F;pages&#x2F;datavalid&#x2F;monster_addUI.jsp"></a>修改 web&#x2F;WEB-INF&#x2F;pages&#x2F;datavalid&#x2F;monster_addUI.jsp</h4><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;form:form action=<span class="string">&quot;save&quot;</span> method=<span class="string">&quot;post&quot;</span> modelAttribute=<span class="string">&quot;monster&quot;</span>&gt;</span><br><span class="line">    妖怪名字: &lt;form:input path=<span class="string">&quot;name&quot;</span>/&gt;&lt;br&gt;&lt;br&gt;</span><br><span class="line">    妖怪年龄~: &lt;form:input path=<span class="string">&quot;age&quot;</span>/&gt;&lt;br&gt;&lt;br&gt;</span><br><span class="line">    电子邮件: &lt;form:input path=<span class="string">&quot;email&quot;</span>/&gt;&lt;br&gt;&lt;br&gt;</span><br><span class="line">    妖怪生日: &lt;form:input path=<span class="string">&quot;birthday&quot;</span>/&gt;要求以<span class="string">&quot;9999-11-11&quot;</span>的形式&lt;br&gt;&lt;br&gt;</span><br><span class="line">    妖怪薪水: &lt;form:input path=<span class="string">&quot;salary&quot;</span>/&gt;要求以<span class="string">&quot;123,890.12&quot;</span>的形式&lt;br&gt;&lt;br&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;添加妖怪&quot;</span>/&gt;</span><br><span class="line">&lt;/form:form&gt;</span><br></pre></td></tr></table></figure>

<h3 id="完成测试-7"><a href="#完成测试-7" class="headerlink" title="完成测试"></a>完成测试</h3><div align="center"> 
<img src="\images\SpringMVC.assets\image-20220623154041920.png"> 
</div> 

<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220623154241317.png"> 
</div> 

<hr>


<h1 id="第九章-验证以及国际化"><a href="#第九章-验证以及国际化" class="headerlink" title="第九章 验证以及国际化"></a>第九章 验证以及国际化</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><ol>
<li>对输入的数据(比如表单数据)，进行必要的验证，并给出相应的提示信息。</li>
<li>对于验证表单数据，SpringMVC 提供了很多实用的注解，这些注解由 JSR 303 验证框架提供。</li>
</ol>
<h3 id="JSR-303-验证框架"><a href="#JSR-303-验证框架" class="headerlink" title="JSR 303 验证框架"></a>JSR 303 验证框架</h3><ol>
<li>JSR 303 是 Java 为 Bean 数据合法性校验提供的标准框架，它已经包含在 JavaEE 中。</li>
<li>JSR 303 通过在 Bean 属性上标注类似于 @NotNull、@Max 等标准的注解指定校验规则， 并通过标准的验证接口对 Bean 进行验证。</li>
<li>JSR 303 提供的基本验证注解有：</li>
</ol>
<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220623160336952.png"> 
</div> 

<h3 id="Hibernate-Validator-扩展注解"><a href="#Hibernate-Validator-扩展注解" class="headerlink" title="Hibernate Validator 扩展注解"></a>Hibernate Validator 扩展注解</h3><ol>
<li>Hibernate Validator 和 Hibernate 没有关系，只是 JSR 303 实现的一个扩展。</li>
<li>Hibernate Validator 是 JSR 303 的一个参考实现，除支持所有标准的校验注解外，它还支持以下的扩展注解:</li>
</ol>
<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220623160426633.png"> 
</div> 

<h2 id="应用实例-13"><a href="#应用实例-13" class="headerlink" title="应用实例"></a>应用实例</h2><h3 id="引入验证和国际化相关的-jar-包"><a href="#引入验证和国际化相关的-jar-包" class="headerlink" title="引入验证和国际化相关的 jar 包"></a>引入验证和国际化相关的 jar 包</h3><div align="center"> 
<img src="\images\SpringMVC.assets\image-20220623160608163.png"> 
</div> 

<h3 id="修改-Monster-java-1"><a href="#修改-Monster-java-1" class="headerlink" title="修改 Monster.java"></a>修改 Monster.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//@Range(min = 1,max = 100)</span></span><br><span class="line">   <span class="comment">//表示接收的age值，在 1-100之间</span></span><br><span class="line">   <span class="meta">@Range(min = 1, max = 100)</span></span><br><span class="line">   <span class="keyword">private</span> Integer age;</span><br><span class="line">   <span class="comment">//@NotEmpty 表示name不能为空</span></span><br><span class="line">   <span class="comment">//Asserts that the annotated string, collection, map or array is not &#123;@code null&#125; or empty.</span></span><br><span class="line">   <span class="meta">@NotEmpty</span></span><br><span class="line">   <span class="keyword">private</span> String name;</span><br></pre></td></tr></table></figure>

<h3 id="修改-MonsterHandler-java-1"><a href="#修改-MonsterHandler-java-1" class="headerlink" title="修改 MonsterHandler.java"></a>修改 MonsterHandler.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 编写方法,处理添加妖怪</span></span><br><span class="line"><span class="comment">    * 1. springmvc可以将提交的数据，按照参数名和对象的属性名匹配</span></span><br><span class="line"><span class="comment">    * 2. 直接封装到对象中</span></span><br><span class="line"><span class="comment">    * String =&gt; Integer</span></span><br><span class="line"><span class="comment">    * 3. <span class="doctag">@Valid</span> Monster monster :表示对monster接收的数据进行校验</span></span><br><span class="line"><span class="comment">    * 4. Errors errors 表示如果校验出现错误，将校验的错误信息保存 errors</span></span><br><span class="line"><span class="comment">    * 5. Map&lt;String, Object&gt; map  表示如果校验出现错误, 将校验的错误信息保存 map 同时保存monster对象</span></span><br><span class="line"><span class="comment">    * 6. 校验发生的时机： 在springmvc底层，反射调用目标方法时，会接收到http请求的数据，然后根据注解来进行验证</span></span><br><span class="line"><span class="comment">    * , 在验证过程中，如果出现了错误，就把错误信息填充errors 和 map</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> monster</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="meta">@RequestMapping(value = &quot;/save&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">save</span><span class="params">(<span class="meta">@Valid</span> Monster monster, Errors errors, Map&lt;String, Object&gt; map)</span>&#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;----monster---&quot;</span> + monster);</span><br><span class="line">       <span class="comment">//我们为了看到验证的情况,我们输出map 和 errors</span></span><br><span class="line">       System.out.println(<span class="string">&quot;===== map ======&quot;</span>);</span><br><span class="line">       <span class="keyword">for</span> (Map.Entry&lt;String, Object&gt; entry : map.entrySet()) &#123;</span><br><span class="line">           System.out.println(<span class="string">&quot;key= &quot;</span> + entry.getKey() + <span class="string">&quot; value=&quot;</span> + entry.getValue());</span><br><span class="line">       &#125;</span><br><span class="line">       System.out.println(<span class="string">&quot;===== errors ======&quot;</span>);</span><br><span class="line">       <span class="keyword">if</span> (errors.hasErrors()) &#123;<span class="comment">//判断是否有错误</span></span><br><span class="line">           List&lt;ObjectError&gt; allErrors = errors.getAllErrors();</span><br><span class="line">           <span class="keyword">for</span> (ObjectError error : allErrors) &#123;</span><br><span class="line">               System.out.println(<span class="string">&quot;error=&quot;</span> + error);</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="keyword">return</span> <span class="string">&quot;datavalid/monster_addUI&quot;</span>;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;datavalid/success&quot;</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<h3 id="修改-web-x2F-WEB-INF-x2F-pages-x2F-datavalid-x2F-monster-addUI-jsp-1"><a href="#修改-web-x2F-WEB-INF-x2F-pages-x2F-datavalid-x2F-monster-addUI-jsp-1" class="headerlink" title="修改 web&#x2F;WEB-INF&#x2F;pages&#x2F;datavalid&#x2F;monster_addUI.jsp"></a>修改 web&#x2F;WEB-INF&#x2F;pages&#x2F;datavalid&#x2F;monster_addUI.jsp</h3><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">&quot;form&quot;</span> uri=<span class="string">&quot;http://www.springframework.org/tags/form&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h3&gt;添加妖怪&lt;/h3&gt;</span><br><span class="line">&lt;form:form action=<span class="string">&quot;save&quot;</span> method=<span class="string">&quot;post&quot;</span> modelAttribute=<span class="string">&quot;monster&quot;</span>&gt;</span><br><span class="line">    妖怪名字: &lt;form:input path=<span class="string">&quot;name&quot;</span>/&gt; &lt;form:errors path=<span class="string">&quot;name&quot;</span>/&gt; &lt;br&gt;&lt;br&gt;</span><br><span class="line">    妖怪年龄~: &lt;form:input path=<span class="string">&quot;age&quot;</span>/&gt; &lt;form:errors path=<span class="string">&quot;age&quot;</span>/&gt; &lt;br&gt;&lt;br&gt;</span><br><span class="line">    电子邮件: &lt;form:input path=<span class="string">&quot;email&quot;</span>/&gt; &lt;form:errors path=<span class="string">&quot;email&quot;</span>/&gt;  &lt;br&gt;&lt;br&gt;</span><br><span class="line">    妖怪生日: &lt;form:input path=<span class="string">&quot;birthday&quot;</span>/&gt; &lt;form:errors path=<span class="string">&quot;birthday&quot;</span>/&gt; 要求以<span class="string">&quot;9999-11-11&quot;</span>的形式&lt;br&gt;&lt;br&gt;</span><br><span class="line">    妖怪薪水: &lt;form:input path=<span class="string">&quot;salary&quot;</span>/&gt; &lt;form:errors path=<span class="string">&quot;salary&quot;</span>/&gt; 要求以<span class="string">&quot;123,890.12&quot;</span>的形式&lt;br&gt;&lt;br&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;添加妖怪&quot;</span>/&gt;</span><br><span class="line">&lt;/form:form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="测试-1"><a href="#测试-1" class="headerlink" title="测试"></a>测试</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">===== map ======</span><br><span class="line">key= monster value=Monster&#123;id=null, email=&#x27;jack@sohu.com&#x27;, age=101, name=&#x27;&#x27;, birthday=null, salary=null&#125;</span><br><span class="line">key= org.springframework.validation.BindingResult.monster value=org.springframework.validation.BeanPropertyBindingResult: 4 errors</span><br><span class="line">Field error in object &#x27;monster&#x27; on field &#x27;birthday&#x27;: rejected value [20001-15]; codes [typeMismatch.monster.birthday,typeMismatch.birthday,typeMismatch.java.util.Date,typeMismatch]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [monster.birthday,birthday]; arguments []; default message [birthday]]; default message [Failed to convert property value of type &#x27;java.lang.String&#x27; to required type &#x27;java.util.Date&#x27; for property &#x27;birthday&#x27;; nested exception is org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [@org.springframework.format.annotation.DateTimeFormat java.util.Date] for value &#x27;20001-15&#x27;; nested exception is java.lang.IllegalArgumentException: Parse attempt failed for value [20001-15]]</span><br><span class="line">Field error in object &#x27;monster&#x27; on field &#x27;salary&#x27;: rejected value [999x,999]; codes [typeMismatch.monster.salary,typeMismatch.salary,typeMismatch.java.lang.Float,typeMismatch]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [monster.salary,salary]; arguments []; default message [salary]]; default message [Failed to convert property value of type &#x27;java.lang.String&#x27; to required type &#x27;java.lang.Float&#x27; for property &#x27;salary&#x27;; nested exception is java.lang.NumberFormatException: For input string: &quot;999x,999&quot;]</span><br><span class="line">Field error in object &#x27;monster&#x27; on field &#x27;age&#x27;: rejected value [101]; codes [Range.monster.age,Range.age,Range.java.lang.Integer,Range]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [monster.age,age]; arguments []; default message [age],100,1]; default message [需要在1和100之间]</span><br><span class="line">Field error in object &#x27;monster&#x27; on field &#x27;name&#x27;: rejected value []; codes [NotEmpty.monster.name,NotEmpty.name,NotEmpty.java.lang.String,NotEmpty]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [monster.name,name]; arguments []; default message [name]]; default message [不能为空]</span><br><span class="line">===== errors ======</span><br><span class="line">error=Field error in object &#x27;monster&#x27; on field &#x27;birthday&#x27;: rejected value [20001-15]; codes [typeMismatch.monster.birthday,typeMismatch.birthday,typeMismatch.java.util.Date,typeMismatch]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [monster.birthday,birthday]; arguments []; default message [birthday]]; default message [Failed to convert property value of type &#x27;java.lang.String&#x27; to required type &#x27;java.util.Date&#x27; for property &#x27;birthday&#x27;; nested exception is org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [@org.springframework.format.annotation.DateTimeFormat java.util.Date] for value &#x27;20001-15&#x27;; nested exception is java.lang.IllegalArgumentException: Parse attempt failed for value [20001-15]]</span><br><span class="line">error=Field error in object &#x27;monster&#x27; on field &#x27;salary&#x27;: rejected value [999x,999]; codes [typeMismatch.monster.salary,typeMismatch.salary,typeMismatch.java.lang.Float,typeMismatch]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [monster.salary,salary]; arguments []; default message [salary]]; default message [Failed to convert property value of type &#x27;java.lang.String&#x27; to required type &#x27;java.lang.Float&#x27; for property &#x27;salary&#x27;; nested exception is java.lang.NumberFormatException: For input string: &quot;999x,999&quot;]</span><br><span class="line">error=Field error in object &#x27;monster&#x27; on field &#x27;age&#x27;: rejected value [101]; codes [Range.monster.age,Range.age,Range.java.lang.Integer,Range]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [monster.age,age]; arguments []; default message [age],100,1]; default message [需要在1和100之间]</span><br><span class="line">error=Field error in object &#x27;monster&#x27; on field &#x27;name&#x27;: rejected value []; codes [NotEmpty.monster.name,NotEmpty.name,NotEmpty.java.lang.String,NotEmpty]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [monster.name,name]; arguments []; default message [name]]; default message [不能为空]</span><br></pre></td></tr></table></figure>

<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220623162718650.png"> 
</div> 

<p><strong>错误信息太丑了，不是人看的！！</strong></p>
<h3 id="创建-src-i18n-properties"><a href="#创建-src-i18n-properties" class="headerlink" title="创建 src\i18n.properties"></a>创建 src\i18n.properties</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">NotEmpty.monster.name</span>=<span class="string">\u7528\u6237\u540d\u4e0d\u80fd\u4e3a\u7a7a</span></span><br><span class="line"><span class="attr">typeMismatch.monster.age</span>=<span class="string">\u5e74\u9f84\u8981\u6c42\u5728\u0031\u002d\u0031\u0035\u0030\u4e4b\u95f4</span></span><br><span class="line"><span class="attr">typeMismatch.monster.birthday</span>=<span class="string">\u751f\u65e5\u683c\u5f0f\u4e0d\u6b63\u786e</span></span><br><span class="line"><span class="attr">typeMismatch.monster.salary</span>=<span class="string">\u85aa\u6c34\u683c\u5f0f\u4e0d\u6b63\u786e</span></span><br></pre></td></tr></table></figure>

<h3 id="配置国际化文件-springDispatcherServlet-servlet-xml"><a href="#配置国际化文件-springDispatcherServlet-servlet-xml" class="headerlink" title="配置国际化文件 springDispatcherServlet-servlet.xml"></a>配置国际化文件 springDispatcherServlet-servlet.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 配置国际化错误信息的资源处理bean --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;messageSource&quot;</span> <span class="attr">class</span>=</span></span><br><span class="line"><span class="tag">           <span class="string">&quot;org.springframework.context.support.ResourceBundleMessageSource&quot;</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- 配置国际化文件名字</span></span><br><span class="line"><span class="comment">           如果你这样配的话，表示messageSource回到 src/i18nXXX.properties去读取错误信息</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;basename&quot;</span> <span class="attr">value</span>=<span class="string">&quot;i18n&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="完成测试-8"><a href="#完成测试-8" class="headerlink" title="完成测试"></a>完成测试</h3><div align="center"> 
<img src="\images\SpringMVC.assets\image-20220623163635598.png"> 
</div> 

<h3 id="注意事项和细节说明-2"><a href="#注意事项和细节说明-2" class="headerlink" title="注意事项和细节说明"></a>注意事项和细节说明</h3><ol>
<li>在需要验证的 Javabean&#x2F;POJO 的字段上加上相应的验证注解。</li>
<li>目标方法上，在 JavaBean&#x2F;POJO 类型的参数前，添加 @Valid 注解，告知 SpringMVC 该 bean 是需要验证的。</li>
<li>在 @Valid 注解之后，添加一个 Errors 或 BindingResult 类型的参数，可以获取到验证的错误信息。</li>
<li>需要使用 <code>&lt;form:errors path=&quot;email&quot;&gt;&lt;/form:errors&gt;</code> 标签来显示错误消息，这个标签需要写在<code>&lt;form:form&gt; </code>标签内生效。</li>
<li>错误消息的国际化文件 i18n.properties，中文需要是 Unicode 编码，使用工具转码</li>
</ol>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">格式</span>: <span class="string">验证规则.表单 modelAttribute 值.属性名=消息信息</span></span><br><span class="line"><span class="attr">NotEmpty.monster.name</span>=<span class="string">\u540D\u5B57\u4E0D\u80FD\u4E3A\u7A7A</span></span><br><span class="line"><span class="attr">typeMismatch.monster.age</span>=<span class="string">\u7C7B\u578B\u4E0D\u5339\u914D</span></span><br></pre></td></tr></table></figure>

<ol start="6">
<li>注解@NotNull 和 @NotEmpty 的区别说明</li>
</ol>
<p>​		（1）@NotEmpty： Asserts that the annotated string, collection, map or array is not {@code null} or empty.</p>
<p>​		（2）@NotNull：The annotated element must not be {@code null}.  Accepts any type.</p>
<p>​		<strong>如果是字符串验证空，建议使用 @NotEmpty。</strong></p>
<ol start="7">
<li>SpingMVC 验证时，会根据不同的验证错误，返回对应的信息。</li>
</ol>
<h2 id="注解的组合使用"><a href="#注解的组合使用" class="headerlink" title="注解的组合使用"></a>注解的组合使用</h2><h3 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h3><p>age 没有，是空的，提交竟然成功了。</p>
<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220623164847936.png"> 
</div> 

<h3 id="解决问题"><a href="#解决问题" class="headerlink" title="解决问题"></a>解决问题</h3><p>修改 Monster.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> Integer id;</span><br><span class="line">   <span class="comment">//email是string,使用@NotEmpty</span></span><br><span class="line">   <span class="meta">@NotEmpty</span></span><br><span class="line">   <span class="keyword">private</span> String email;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//@Range(min = 1,max = 100)</span></span><br><span class="line">   <span class="comment">//表示接收的age值，在 1-100之间</span></span><br><span class="line">   <span class="meta">@NotNull(message = &quot;age不能为空&quot;)</span></span><br><span class="line">   <span class="meta">@Range(min = 1,max = 100)</span></span><br><span class="line">   <span class="keyword">private</span> Integer age;</span><br><span class="line">   <span class="comment">//@NotEmpty 表示name不能为空</span></span><br><span class="line">   <span class="comment">//Asserts that the annotated string, collection, map or array is not &#123;@code null&#125; or empty.</span></span><br><span class="line">   <span class="meta">@NotEmpty</span></span><br><span class="line">   <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@NotNull(message = &quot;生日不能为空&quot;)</span></span><br><span class="line">   <span class="meta">@DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)</span></span><br><span class="line">   <span class="keyword">private</span> Date birthday;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@NotNull(message = &quot;薪水不能为空&quot;)</span></span><br><span class="line">   <span class="meta">@NumberFormat(pattern = &quot;###,###.##&quot;)</span></span><br><span class="line">   <span class="keyword">private</span> Float salary;</span><br></pre></td></tr></table></figure>

<p>这样就可以解决上述问题。</p>
<h2 id="数据类型转换校验核心类-DataBinder"><a href="#数据类型转换校验核心类-DataBinder" class="headerlink" title="数据类型转换校验核心类-DataBinder"></a>数据类型转换校验核心类-DataBinder</h2><p>图例 Spring MVC 通过反射机制对目标方法进行解析，将请求消息绑定到处理方法的入参中。 </p>
<p>数据绑定的核心部件是 DataBinder，运行机制如下</p>
<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220623165358312.png"> 
</div> 



<h2 id="取消某个属性的绑定"><a href="#取消某个属性的绑定" class="headerlink" title="取消某个属性的绑定"></a>取消某个属性的绑定</h2><h3 id="说明-11"><a href="#说明-11" class="headerlink" title="说明"></a>说明</h3><p>​		在默认情况下，表单提交的数据都会和 pojo 类型的 javabean 属性绑定，如果在开发中，希望取消某个属性的绑定，也就是说，<strong>不希望接收到某个表单对应的属性的值</strong>，则可以通过 @InitBinder 注解取消绑定。</p>
<ol>
<li>编写一个方法, 使用@InitBinder 标识的该方法，可以对 WebDataBinder 对象进行初始化。WebDataBinder 是 DataBinder 的子类，用于完成由表单字段到 JavaBean 属性的绑定。</li>
<li>@InitBinder 方法不能有返回值，它必须声明为 void。</li>
<li>@InitBinder 方法的参数通常是 WebDataBinder。</li>
</ol>
<h3 id="应用实例-14"><a href="#应用实例-14" class="headerlink" title="应用实例"></a>应用实例</h3><h4 id="修改-MonsterHandler-java-2"><a href="#修改-MonsterHandler-java-2" class="headerlink" title="修改 MonsterHandler.java"></a>修改 MonsterHandler.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//取消绑定 monster的name表单提交的值给monster.name属性</span></span><br><span class="line">   <span class="meta">@InitBinder</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initBinder</span><span class="params">(WebDataBinder webDataBinder)</span>&#123;</span><br><span class="line">       <span class="comment">/**</span></span><br><span class="line"><span class="comment">        * 1. 方法上需要标注 <span class="doctag">@InitBinder</span>  springmvc底层会初始化 WebDataBinder</span></span><br><span class="line"><span class="comment">        * 2. 调用 webDataBinder.setDisallowedFields(&quot;name&quot;) 表示取消指定属性的绑定</span></span><br><span class="line"><span class="comment">        *    即：当表单提交字段为 name时， 就不在把接收到的name值，填充到model数据monster的name属性</span></span><br><span class="line"><span class="comment">        * 3. 机制：springmvc 在底层通过反射调用目标方法时, 接收到http请求的参数和值,使用反射+注解技术</span></span><br><span class="line"><span class="comment">        *    取消对指定属性的填充</span></span><br><span class="line"><span class="comment">        * 4. setDisallowedFields支持可变参数，可以填写多个字段</span></span><br><span class="line"><span class="comment">        * 5. 如果我们取消某个属性绑定,验证就没有意义了,应当把验证的注解去掉, name属性会使用默认值null</span></span><br><span class="line"><span class="comment">        *  //<span class="doctag">@NotEmpty</span></span></span><br><span class="line"><span class="comment">        *  private String name;</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">       webDataBinder.setDisallowedFields(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<h4 id="修改-Monster-java-2"><a href="#修改-Monster-java-2" class="headerlink" title="修改 Monster.java"></a>修改 Monster.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//@NotEmpty 表示name不能为空</span></span><br><span class="line">   <span class="comment">//Asserts that the annotated string, collection, map or array is not &#123;@code null&#125; or empty.</span></span><br><span class="line">   <span class="comment">//@NotEmpty</span></span><br><span class="line">   <span class="keyword">private</span> String name;</span><br></pre></td></tr></table></figure>

<h3 id="完成测试-9"><a href="#完成测试-9" class="headerlink" title="完成测试"></a>完成测试</h3><p><img src="\images\SpringMVC.assets\image-20220623171718897.png" alt="image-20220623171718897" style="zoom:67%;" /><img src="D:\Study\VIP\主流框架\SpringMVC\笔记\SpringMVC.assets\image-20220623171755053.png" alt="image-20220623171755053" style="zoom:67%;" /></p>
<h3 id="注意事项和细节说明-3"><a href="#注意事项和细节说明-3" class="headerlink" title="注意事项和细节说明"></a>注意事项和细节说明</h3><ol>
<li>setDisallowedFields() 是可变形参，可以指定多个字段。</li>
<li>当将一个字段&#x2F;属性，设置为 disallowed,就不在接收表单提交的值，那么这个字段&#x2F;属性 的值，就是该对象默认的值 (具体看程序员定义时指定)。</li>
<li>一般来说，如果不接收表单字段提交数据，则该对象字段的验证也就没有意义了。</li>
</ol>
<hr>


<h1 id="第十章-中文乱码处理"><a href="#第十章-中文乱码处理" class="headerlink" title="第十章 中文乱码处理"></a>第十章 中文乱码处理</h1><h2 id="自定义中文乱码过滤器"><a href="#自定义中文乱码过滤器" class="headerlink" title="自定义中文乱码过滤器"></a>自定义中文乱码过滤器</h2><p>当表单提交数据为中文时，会出现乱码，我们来解决一下(提示：先恢复 name 属性的绑定)</p>
<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220623181404116.png"> 
</div> 

<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220623181341912.png"> 
</div> 

<h3 id="创建过滤器-MyCharacterFilter-java"><a href="#创建过滤器-MyCharacterFilter-java" class="headerlink" title="创建过滤器 MyCharacterFilter.java"></a>创建过滤器 MyCharacterFilter.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.web.filter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> LiAng</span></span><br><span class="line"><span class="comment"> * 编写过滤器，处理中文乱码</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyCharacterFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">        <span class="comment">//这里加入对编码的处理</span></span><br><span class="line">        servletRequest.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        <span class="comment">//放行请求，这个规则和前面java web的过滤器一样</span></span><br><span class="line">        filterChain.doFilter(servletRequest, servletResponse);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="修改-web-xml"><a href="#修改-web-xml" class="headerlink" title="修改 web.xml"></a>修改 web.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置处理中文乱码的过滤器</span></span><br><span class="line"><span class="comment">       拦截所有请求，把过滤器配置到web.xml前面</span></span><br><span class="line"><span class="comment">   --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>myCharacterFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>com.lzw.web.filter.MyCharacterFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>myCharacterFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="完成测试-10"><a href="#完成测试-10" class="headerlink" title="完成测试"></a>完成测试</h3><div align="center"> 
<img src="\images\SpringMVC.assets\image-20220623181404116.png"> 
</div> 

<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220623182038508.png"> 
</div> 

<h2 id="Spring-提供的过滤器处理中文"><a href="#Spring-提供的过滤器处理中文" class="headerlink" title="Spring 提供的过滤器处理中文"></a>Spring 提供的过滤器处理中文</h2><h3 id="修改-web-xml-1"><a href="#修改-web-xml-1" class="headerlink" title="修改 web.xml"></a>修改 web.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置处理中文乱码的过滤器</span></span><br><span class="line"><span class="comment">       拦截所有请求，把过滤器配置到web.xml前面</span></span><br><span class="line"><span class="comment">   --&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--&lt;filter&gt;--&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--    &lt;filter-name&gt;myCharacterFilter&lt;/filter-name&gt;--&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--    &lt;filter-class&gt;com.lzw.web.filter.MyCharacterFilter&lt;/filter-class&gt;--&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--&lt;/filter&gt;--&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--&lt;filter-mapping&gt;--&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--    &lt;filter-name&gt;myCharacterFilter&lt;/filter-name&gt;--&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;--&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--&lt;/filter-mapping&gt;--&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!--配置spring提供的过滤器，解决中文乱码问题--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>utf-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="完成测试-11"><a href="#完成测试-11" class="headerlink" title="完成测试"></a>完成测试</h3><div align="center"> 
<img src="\images\SpringMVC.assets\image-20220623182038508.png"> 
</div> 

<hr>


<h1 id="第十一章-处理-json-和-HttpMessageConverter-lt-T-gt"><a href="#第十一章-处理-json-和-HttpMessageConverter-lt-T-gt" class="headerlink" title="第十一章 处理 json 和 HttpMessageConverter&lt;T&gt;"></a>第十一章 处理 json 和 HttpMessageConverter<code>&lt;T&gt;</code></h1><h2 id="处理-JSON-ResponseBody"><a href="#处理-JSON-ResponseBody" class="headerlink" title="处理 JSON-@ResponseBody"></a>处理 JSON-@ResponseBody</h2><p>项目开发中，我们往往需要服务器返回的数据格式是按照 json 来返回的。</p>
<h3 id="引入-jackson-jar"><a href="#引入-jackson-jar" class="headerlink" title="引入 jackson.jar"></a>引入 jackson.jar</h3><div align="center"> 
<img src="\images\SpringMVC.assets\image-20220623183216896.png"> 
</div> 

<h3 id="创建-Dog-java"><a href="#创建-Dog-java" class="headerlink" title="创建 Dog.java"></a>创建 Dog.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.web.json.entity;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> LiAng</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Dog</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Dog</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Dog</span><span class="params">(String name, String address)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.address = address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getAddress</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAddress</span><span class="params">(String address)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.address = address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Dog&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, address=&#x27;&quot;</span> + address + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="创建-JsonHandler-java"><a href="#创建-JsonHandler-java" class="headerlink" title="创建 JsonHandler.java"></a>创建 JsonHandler.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.web.json;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.lzw.web.json.entity.Dog;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JsonHandler</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 1. 目标方法 <span class="doctag">@ResponseBody</span>，表示返回的数据是json格式</span></span><br><span class="line"><span class="comment">     * 2. springmvc底层根据目标方法<span class="doctag">@ResponseBody</span>, 返回指定格式, 根据http请求来进行处理</span></span><br><span class="line"><span class="comment">     * 3. 这里原生的springmvc使用了转换器 HttpMessageConverter</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/json/dog&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> Dog <span class="title function_">getJson</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//返回对象</span></span><br><span class="line">        <span class="comment">//springmvc会根据你的设置，转成json格式数据返回</span></span><br><span class="line">        <span class="type">Dog</span> <span class="variable">dog</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Dog</span>();</span><br><span class="line">        dog.setName(<span class="string">&quot;大黄狗&quot;</span>);</span><br><span class="line">        dog.setAddress(<span class="string">&quot;小新的家&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> dog;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="创建-web-json-jsp"><a href="#创建-web-json-jsp" class="headerlink" title="创建 web\json.jsp"></a>创建 web\json.jsp</h3><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;json提交&lt;/title&gt;</span><br><span class="line">    &lt;!-- 引入jquery --&gt;</span><br><span class="line">    &lt;script type=<span class="string">&quot;text/javascript&quot;</span> src=<span class="string">&quot;script/jquery-3.6.0.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 编写jquery代码和ajax请求 --&gt;</span><br><span class="line">    &lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">        $(function()&#123;</span><br><span class="line">            <span class="comment">//给id=&quot;getJson&quot;绑定点击事件</span></span><br><span class="line">            $(<span class="string">&quot;#getJson&quot;</span>).click(function () &#123;</span><br><span class="line"></span><br><span class="line">                <span class="type">var</span> <span class="variable">url</span> <span class="operator">=</span> <span class="built_in">this</span>.href;</span><br><span class="line">                <span class="type">var</span> <span class="variable">args</span> <span class="operator">=</span> &#123;<span class="string">&quot;time&quot;</span>:<span class="keyword">new</span> <span class="title class_">Date</span>()&#125;;<span class="comment">//这是准备发送的数据，防止页面缓存</span></span><br><span class="line">                $.post(</span><br><span class="line">                    url,</span><br><span class="line">                    args,</span><br><span class="line">                    function (data) &#123;<span class="comment">//data 就是返回的数据,是json格式=&gt;如果是多个json数据，可以遍历</span></span><br><span class="line">                        console.log(<span class="string">&quot;data= &quot;</span>, data);</span><br><span class="line">                        console.log(<span class="string">&quot;dog.name= &quot;</span>, data.name);</span><br><span class="line">                        console.log(<span class="string">&quot;dog.address= &quot;</span>, data.address);</span><br><span class="line">                    &#125;,</span><br><span class="line">                    <span class="string">&quot;json&quot;</span></span><br><span class="line">                );</span><br><span class="line"></span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;)</span><br><span class="line"></span><br><span class="line">        &#125;)</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;请求一个json数据&lt;/h1&gt;</span><br><span class="line">&lt;%--</span><br><span class="line"><span class="number">1.</span>当用户点击超链接时，我们发出一个ajax请求</span><br><span class="line"><span class="number">2.</span> 接收到请求后，我们查看这个数据</span><br><span class="line"><span class="number">3.</span> 使用jquery发出ajax请求知识</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;&lt;%=request.getContextPath()%&gt;/json/dog&quot;</span> id=<span class="string">&quot;getJson&quot;</span>&gt;点击获取json数据&lt;/a&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="完成测试-12"><a href="#完成测试-12" class="headerlink" title="完成测试"></a>完成测试</h3><div align="center"> 
<img src="\images\SpringMVC.assets\image-20220623191235635.png"> 
</div> 

<h2 id="处理-JSON-RequestBody"><a href="#处理-JSON-RequestBody" class="headerlink" title="处理 JSON-@RequestBody"></a>处理 JSON-@RequestBody</h2><ol>
<li>客户端发送 json 字符串数据 </li>
<li>使用 SpringMVC 的 @RequestBody 将客户端提交的 json 数据，封装成 JavaBean 对象 </li>
<li>再把这个 javabean 以 json 对象形式返回</li>
</ol>
<h3 id="创建-User-java-1"><a href="#创建-User-java-1" class="headerlink" title="创建 User.java"></a>创建 User.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.web.json.entity;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> LiAng</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(String userName, Integer age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.userName = userName;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getUserName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUserName</span><span class="params">(String userName)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.userName = userName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(Integer age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;User&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;userName=&#x27;&quot;</span> + userName + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="修改-JsonHandler-java"><a href="#修改-JsonHandler-java" class="headerlink" title="修改 JsonHandler.java"></a>修改 JsonHandler.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 1. <span class="doctag">@RequestBody</span> User user 在形参指定了 <span class="doctag">@RequestBody</span></span></span><br><span class="line"><span class="comment">    * 2. springmvc就会将提交的json字符串数据填充给指定Javabean</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="meta">@RequestMapping(value = &quot;/save2&quot;)</span></span><br><span class="line">   <span class="meta">@ResponseBody</span></span><br><span class="line">   <span class="keyword">public</span> User <span class="title function_">save2</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span>&#123;</span><br><span class="line">       <span class="comment">//将前端传过来的数据，以json的格式响应回浏览器</span></span><br><span class="line">       System.out.println(<span class="string">&quot;user~= &quot;</span> + user);</span><br><span class="line">       <span class="keyword">return</span> user;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<h3 id="修改-json-jsp"><a href="#修改-json-jsp" class="headerlink" title="修改 json.jsp"></a>修改 json.jsp</h3><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;json提交&lt;/title&gt;</span><br><span class="line">    &lt;!-- 引入jquery --&gt;</span><br><span class="line">    &lt;script type=<span class="string">&quot;text/javascript&quot;</span> src=<span class="string">&quot;script/jquery-3.6.0.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 编写jquery代码和ajax请求 --&gt;</span><br><span class="line">    &lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">        $(function()&#123;</span><br><span class="line">            <span class="comment">//给id=&quot;getJson&quot;绑定点击事件</span></span><br><span class="line">            $(<span class="string">&quot;#getJson&quot;</span>).click(function () &#123;</span><br><span class="line"></span><br><span class="line">                <span class="type">var</span> <span class="variable">url</span> <span class="operator">=</span> <span class="built_in">this</span>.href;</span><br><span class="line">                <span class="type">var</span> <span class="variable">args</span> <span class="operator">=</span> &#123;<span class="string">&quot;time&quot;</span>:<span class="keyword">new</span> <span class="title class_">Date</span>()&#125;;<span class="comment">//这是准备发送的数据，防止页面缓存</span></span><br><span class="line">                $.post(</span><br><span class="line">                    url,</span><br><span class="line">                    args,</span><br><span class="line">                    function (data) &#123;<span class="comment">//data 就是返回的数据,是json格式=&gt;如果是多个json数据，可以遍历</span></span><br><span class="line">                        console.log(<span class="string">&quot;data= &quot;</span>, data);</span><br><span class="line">                        console.log(<span class="string">&quot;dog.name= &quot;</span>, data.name);</span><br><span class="line">                        console.log(<span class="string">&quot;dog.address= &quot;</span>, data.address);</span><br><span class="line">                    &#125;,</span><br><span class="line">                    <span class="string">&quot;json&quot;</span></span><br><span class="line">                );</span><br><span class="line"></span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//绑定按钮点击事件, 提交json数据</span></span><br><span class="line">            <span class="comment">//springmvc 可以在后台將json转成對象</span></span><br><span class="line">            $(<span class="string">&quot;button[name=&#x27;butt1&#x27;]&quot;</span>).click(function()&#123;</span><br><span class="line">                <span class="comment">//目标:将userName 和 age 封装成json字符串，发送给目标方法</span></span><br><span class="line">                <span class="type">var</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;/springmvc/save2&quot;</span>;</span><br><span class="line">                <span class="type">var</span> <span class="variable">userName</span> <span class="operator">=</span> $(<span class="string">&quot;#userName&quot;</span>).val();</span><br><span class="line">                <span class="type">var</span> <span class="variable">age</span> <span class="operator">=</span> $(<span class="string">&quot;#age&quot;</span>).val();</span><br><span class="line">                <span class="comment">//将json对象转成json字符串</span></span><br><span class="line">                <span class="type">var</span> <span class="variable">args</span> <span class="operator">=</span> JSON.stringify(&#123;<span class="string">&quot;userName&quot;</span>: userName, <span class="string">&quot;age&quot;</span>: age&#125;)</span><br><span class="line">                $.ajax(&#123;</span><br><span class="line">                    url:url,</span><br><span class="line">                    data:args,</span><br><span class="line">                    type:<span class="string">&quot;POST&quot;</span>,</span><br><span class="line">                    success:function(data)&#123;</span><br><span class="line">                        console.log(<span class="string">&quot;返回的data= &quot;</span>, data);</span><br><span class="line">                    &#125;,</span><br><span class="line">                    <span class="comment">//下面这个contentType参数,是指定发送数据的编码和格式</span></span><br><span class="line">                    contentType:<span class="string">&quot;application/json;charset=utf-8&quot;</span></span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;)</span><br><span class="line"></span><br><span class="line">        &#125;)</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;请求一个json数据&lt;/h1&gt;</span><br><span class="line">&lt;%--</span><br><span class="line"><span class="number">1.</span>当用户点击超链接时，我们发出一个ajax请求</span><br><span class="line"><span class="number">2.</span> 接收到请求后，我们查看这个数据</span><br><span class="line"><span class="number">3.</span> 使用jquery发出ajax请求知识</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;&lt;%=request.getContextPath()%&gt;/json/dog&quot;</span> id=<span class="string">&quot;getJson&quot;</span>&gt;点击获取json数据&lt;/a&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;h1&gt;发出一个 json 数据&lt;/h1&gt;</span><br><span class="line">u:&lt;input id=<span class="string">&quot;userName&quot;</span> type=<span class="string">&quot;text&quot;</span>&gt;&lt;br/&gt;</span><br><span class="line">a:&lt;input id=<span class="string">&quot;age&quot;</span> type=<span class="string">&quot;text&quot;</span>&gt;&lt;br/&gt;</span><br><span class="line">&lt;button name=<span class="string">&quot;butt1&quot;</span>&gt;添加用户&lt;/button&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="完成测试-13"><a href="#完成测试-13" class="headerlink" title="完成测试"></a>完成测试</h3><div align="center"> 
<img src="\images\SpringMVC.assets\image-20220623204737241.png"> 
</div> 

<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220623205026575.png"> 
</div> 

<h2 id="处理JSON-注意事项和细节"><a href="#处理JSON-注意事项和细节" class="headerlink" title="处理JSON-注意事项和细节"></a>处理JSON-注意事项和细节</h2><p><strong>1.目标方法正常返回 JSON 需要的数据，可以是一个对象，也可以是一个集合。</strong></p>
<p>修改 JsonHandler.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//编写方法，以json格式返回多个Dog</span></span><br><span class="line">   <span class="meta">@RequestMapping(value = &quot;/json/dogs&quot;)</span></span><br><span class="line">   <span class="meta">@ResponseBody</span></span><br><span class="line">   <span class="keyword">public</span> List&lt;Dog&gt; <span class="title function_">getJsons</span><span class="params">()</span> &#123;</span><br><span class="line">       List&lt;Dog&gt; dogs = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">       dogs.add(<span class="keyword">new</span> <span class="title class_">Dog</span>(<span class="string">&quot;大黄狗&quot;</span>, <span class="string">&quot;小新的家&quot;</span>));</span><br><span class="line">       dogs.add(<span class="keyword">new</span> <span class="title class_">Dog</span>(<span class="string">&quot;大黄狗2&quot;</span>, <span class="string">&quot;小新2的家&quot;</span>));</span><br><span class="line">       dogs.add(<span class="keyword">new</span> <span class="title class_">Dog</span>(<span class="string">&quot;大黄狗3&quot;</span>, <span class="string">&quot;小新3的家&quot;</span>));</span><br><span class="line">       <span class="keyword">return</span> dogs;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220623205612112.png"> 
</div> 

<p><strong>2.@ResponseBody 可以直接写在 controller 上，这样对所有方法生效</strong></p>
<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220623205802211.png"> 
</div> 

<p><strong>3.@ResponseBody + @Controller 可以直接写成 @RestController</strong></p>
<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220623210056739.png"> 
</div> 

<h2 id="HttpMessageConverter-lt-T-gt"><a href="#HttpMessageConverter-lt-T-gt" class="headerlink" title="HttpMessageConverter&lt;T&gt;"></a>HttpMessageConverter<code>&lt;T&gt;</code></h2><h3 id="说明-12"><a href="#说明-12" class="headerlink" title="说明"></a>说明</h3><p>​		SpringMVC 处理 JSON-底层实现是依靠 HttpMessageConverter<T>来进行转换的。</p>
<h3 id="工作机制"><a href="#工作机制" class="headerlink" title="工作机制"></a>工作机制</h3><div align="center"> 
<img src="\images\SpringMVC.assets\image-20220623210418843.png"> 
</div> 

<p>处理 JSON-底层实现(HttpMessageConverter<code>&lt;T&gt;</code>)</p>
<ol>
<li>使用 HttpMessageConverter<T> 将请求信息转化并绑定到处理方法的入参中，或将响应结果转为对应类型的响应信息，Spring 提供了两种途径：</li>
</ol>
<p>​		（1）使用 @RequestBody &#x2F; @ResponseBody 对目标方法进行标注</p>
<p>​		（2）使用 <code>HttpEntity&lt;T&gt; / ResponseEntity&lt;T&gt;</code> 作为目标方法的入参或返回值</p>
<ol start="2">
<li>当控制器处理方法使用到 @RequestBody&#x2F;@ResponseBody 或 <code>HttpEntity&lt;T&gt;/ResponseEntity&lt;T&gt;</code> 时，Spring 首先根据请求头或响应头的 Accept 属性选择匹配的 HttpMessageConverter，进而根据参数类型或泛型类型的过滤得到匹配的 HttpMessageConverter，若找不到可用的HttpMessageConverter 将报错。</li>
</ol>
<h2 id="文件下载"><a href="#文件下载" class="headerlink" title="文件下载"></a>文件下载</h2><p>​		在 SpringMVC 中，通过返回 <code>ResponseEntity&lt;T&gt;</code>的类型，可以实现文件下载的功能。</p>
<h3 id="修改-JsonHandler-java-1"><a href="#修改-JsonHandler-java-1" class="headerlink" title="修改 JsonHandler.java"></a>修改 JsonHandler.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//响应用户下载文件的请求</span></span><br><span class="line">   <span class="meta">@RequestMapping(value = &quot;/downFile&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> ResponseEntity&lt;<span class="type">byte</span>[]&gt; downFile(HttpSession session) <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">       <span class="comment">//1. 先获取到下载文件的inputStream</span></span><br><span class="line">       <span class="type">InputStream</span> <span class="variable">resourceAsStream</span> <span class="operator">=</span> session.getServletContext().getResourceAsStream(<span class="string">&quot;/img/2.jpg&quot;</span>);</span><br><span class="line"></span><br><span class="line">       <span class="comment">//2. 开辟一个存放文件的byte数组, 这里使用byte[] 是可以支持二进制数据(图片，视频。)</span></span><br><span class="line">       <span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[resourceAsStream.available()];</span><br><span class="line">       <span class="comment">//3. 将下载文件的数据，读入到byte[]</span></span><br><span class="line">       resourceAsStream.read(bytes);</span><br><span class="line"></span><br><span class="line">       <span class="comment">//public ResponseEntity(@Nullable T body, @Nullable MultiValueMap&lt;String, String&gt; headers, HttpStatus status) &#123;&#125;</span></span><br><span class="line">       <span class="comment">//4. 创建返回的HttpStatus</span></span><br><span class="line">       <span class="type">HttpStatus</span> <span class="variable">httpStatus</span> <span class="operator">=</span> HttpStatus.OK;</span><br><span class="line">       <span class="comment">//5. 创建 headers</span></span><br><span class="line">       <span class="type">HttpHeaders</span> <span class="variable">headers</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HttpHeaders</span>();</span><br><span class="line">       <span class="comment">//指定返回的数据，客户端应当以附件形式处理</span></span><br><span class="line">       headers.add(<span class="string">&quot;Content-Disposition&quot;</span>, <span class="string">&quot;attachment;filename=2.jpg&quot;</span>);</span><br><span class="line"></span><br><span class="line">       <span class="comment">//构建一个ResponseEntity 对象1. 的http响应头headers 2. http响应状态 3. 下载的文件数据</span></span><br><span class="line">       ResponseEntity&lt;<span class="type">byte</span>[]&gt; responseEntity = <span class="keyword">new</span> <span class="title class_">ResponseEntity</span>&lt;&gt;(bytes, headers, httpStatus);</span><br><span class="line"></span><br><span class="line">       <span class="keyword">return</span> responseEntity;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<h3 id="修改-json-jsp-1"><a href="#修改-json-jsp-1" class="headerlink" title="修改 json.jsp"></a>修改 json.jsp</h3><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;h1&gt;下载文件的测试 &lt;/h1&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;&lt;%=request.getContextPath()%&gt;/downFile&quot;</span>&gt;点击下载文件&lt;/a&gt;</span><br></pre></td></tr></table></figure>

<p><strong>记得在项目中放上下载的资源</strong></p>
<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220623215603668.png"> 
</div> 

<h3 id="完成测试-14"><a href="#完成测试-14" class="headerlink" title="完成测试"></a>完成测试</h3><div align="center"> 
<img src="\images\SpringMVC.assets\image-20220623215656530.png"> 
</div> 

<hr>


<h1 id="第十二章-SpringMVC上传文件"><a href="#第十二章-SpringMVC上传文件" class="headerlink" title="第十二章 SpringMVC上传文件"></a>第十二章 SpringMVC上传文件</h1><h2 id="基本介绍-4"><a href="#基本介绍-4" class="headerlink" title="基本介绍"></a>基本介绍</h2><ol>
<li>Spring MVC为文件上传提供了直接的支持，这种支持是通过即插即用的 MultipartResolver 实现的 。 Spring 用 Jakarta Commons FileUpload 技术实现了一个 MultipartResolver 实现类：CommonsMultipartResovler。</li>
<li>Spring MVC 上下文中默认没有装配 MultipartResovler，因此默认情况下不能处理文件的 上传工作，如果想使用 Spring 的文件上传功能，需现在上下文中配置 MultipartResolver。</li>
</ol>
<h2 id="应用实例-15"><a href="#应用实例-15" class="headerlink" title="应用实例"></a>应用实例</h2><h3 id="引入-springmvc-文件上传需要的-jar-包"><a href="#引入-springmvc-文件上传需要的-jar-包" class="headerlink" title="引入 springmvc 文件上传需要的 jar 包"></a>引入 springmvc 文件上传需要的 jar 包</h3><div align="center"> 
<img src="\images\SpringMVC.assets\image-20220624083147842.png"> 
</div> 

<h3 id="创建-web-fileUpload-jsp"><a href="#创建-web-fileUpload-jsp" class="headerlink" title="创建 web\fileUpload.jsp"></a>创建 web\fileUpload.jsp</h3><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;文件上传&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;文件上传&lt;/h1&gt;</span><br><span class="line">&lt;form action=<span class="string">&quot;fileUpload&quot;</span> method=<span class="string">&quot;post&quot;</span> enctype=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span><br><span class="line">    文件介绍:&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;introduce&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    选择文件:&lt;input type=<span class="string">&quot;file&quot;</span> name=<span class="string">&quot;file&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;上传文件&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="修改-web-xml-2"><a href="#修改-web-xml-2" class="headerlink" title="修改 web.xml"></a>修改 web.xml</h3><p>配置中文过滤器，前面已经配过</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置spring提供的过滤器，解决中文乱码问题--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>utf-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="修改-springDispatcherServlet-servlet-xml-1"><a href="#修改-springDispatcherServlet-servlet-xml-1" class="headerlink" title="修改 springDispatcherServlet-servlet.xml"></a>修改 springDispatcherServlet-servlet.xml</h3><p>配置文件上传解析器</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置文件上传需要的bean--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;</span> <span class="attr">id</span>=<span class="string">&quot;commonsMultipartResolver&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="创建-FileUploadHandler-java"><a href="#创建-FileUploadHandler-java" class="headerlink" title="创建 FileUploadHandler.java"></a>创建 FileUploadHandler.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.web.fileupload;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.multipart.MultipartFile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> LiAng</span></span><br><span class="line"><span class="comment"> * 处理文件上传的handler</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileUploadHandler</span> &#123;</span><br><span class="line">    <span class="comment">//编写方法，处理文件上传的请求</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/fileUpload&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">fileUpload</span><span class="params">(<span class="meta">@RequestParam(value = &quot;file&quot;)</span> MultipartFile file, HttpServletRequest request)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//接收到提交的文件名</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">originalFilename</span> <span class="operator">=</span> file.getOriginalFilename();</span><br><span class="line">        System.out.println(<span class="string">&quot;上传的文件名是：&quot;</span> + originalFilename);</span><br><span class="line">        <span class="comment">//得到要把上传文件保存到哪个路径[全路径：包括文件名]</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">fileFullPath</span> <span class="operator">=</span> request.getServletContext().getRealPath(<span class="string">&quot;/img/&quot;</span> + originalFilename);</span><br><span class="line">        <span class="comment">//创建文件</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">saveToFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(fileFullPath);</span><br><span class="line">        <span class="comment">//将上传的文件转存到 saveToFile</span></span><br><span class="line">        file.transferTo(saveToFile);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="此时会报错"><a href="#此时会报错" class="headerlink" title="此时会报错"></a>此时会报错</h3><div align="center"> 
<img src="\images\SpringMVC.assets\image-20220624090032242.png"> 
</div> 

<h3 id="修改-springDispatcherServlet-servlet-xml-2"><a href="#修改-springDispatcherServlet-servlet-xml-2" class="headerlink" title="修改 springDispatcherServlet-servlet.xml"></a>修改 springDispatcherServlet-servlet.xml</h3><p>配置文件上传解析器</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置文件上传需要的bean--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;</span> <span class="attr">id</span>=<span class="string">&quot;multipartResolver&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="完成测试-15"><a href="#完成测试-15" class="headerlink" title="完成测试"></a>完成测试</h3><div align="center"> 
<img src="\images\SpringMVC.assets\image-20220624090435830.png"> 
</div> 

<p>Postman测试</p>
<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220624091237209.png"> 
</div> 

<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220624091311397.png"> 
</div> 

<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220624091333021.png"> 
</div> 

<hr>


<h1 id="第十三章-自定义拦截器"><a href="#第十三章-自定义拦截器" class="headerlink" title="第十三章 自定义拦截器"></a>第十三章 自定义拦截器</h1><h2 id="什么是拦截器"><a href="#什么是拦截器" class="headerlink" title="什么是拦截器"></a>什么是拦截器</h2><h3 id="说明-13"><a href="#说明-13" class="headerlink" title="说明"></a>说明</h3><ol>
<li>Spring MVC 也可以使用拦截器对请求进行拦截处理，用户可以自定义拦截器来实现特定的功能。</li>
<li>自定义的拦截器必须实现 HandlerInterceptor 接口。</li>
</ol>
<h3 id="自定义拦截器的三个方法"><a href="#自定义拦截器的三个方法" class="headerlink" title="自定义拦截器的三个方法"></a>自定义拦截器的三个方法</h3><ol>
<li>preHandle()：这个方法在业务处理器处理请求之前被调用，在该方法中对用户请求 request 进行处理。 </li>
<li>postHandle()：这个方法在目标方法处理完请求后执行。</li>
<li>afterCompletion()：这个方法在完全处理完请求后被调用，可以在该方法中进行一些资源 清理的操作。</li>
</ol>
<h2 id="自定义拦截器执行流程分析图"><a href="#自定义拦截器执行流程分析图" class="headerlink" title="自定义拦截器执行流程分析图"></a>自定义拦截器执行流程分析图</h2><div align="center"> 
<img src="\images\SpringMVC.assets\image-20220624091829564.png"> 
</div> 

<ol>
<li>如果 preHandle 方法 返回 false，则不再执行目标方法，可以在此指定返回页面。</li>
<li>postHandle 在目标方法被执行后执行。可以在方法中访问到目标方法返回的 ModelAndView 对象。</li>
<li>若 preHandle 返回 true，则 afterCompletion 方法 在渲染视图之后被执行。</li>
<li>若 preHandle 返回 false，则 afterCompletion 方法不会被调用。</li>
<li>在配置拦截器时，可以指定该拦截器对哪些请求生效，哪些请求不生效。</li>
</ol>
<h2 id="自定义拦截器应用实例"><a href="#自定义拦截器应用实例" class="headerlink" title="自定义拦截器应用实例"></a>自定义拦截器应用实例</h2><h3 id="快速入门-1"><a href="#快速入门-1" class="headerlink" title="快速入门"></a>快速入门</h3><h4 id="创建-MyInterceptor01-java"><a href="#创建-MyInterceptor01-java" class="headerlink" title="创建 MyInterceptor01.java"></a>创建 MyInterceptor01.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.web.interceptor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.HandlerInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ModelAndView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> LiAng</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyInterceptor01</span> <span class="keyword">implements</span> <span class="title class_">HandlerInterceptor</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 1. preHandle() 在目标方法执行前被执行</span></span><br><span class="line"><span class="comment">     * 2. 如果preHandle() 返回false , 不再执行目标方法</span></span><br><span class="line"><span class="comment">     * 3. 该方法可以获取到request, response, handler</span></span><br><span class="line"><span class="comment">     * 4. 这里根据业务，可以进行拦截，并指定跳转到哪个页面</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;--MyInterceptor01--preHandle()--&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 1. 在目标方法执行后，会执行postHandle</span></span><br><span class="line"><span class="comment">     * 2. 该方法可以获取到 目标方法，返回的ModelAndView对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;--MyInterceptor01--postHandle()--&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * afterCompletion() 在视图渲染后被执行, 这里可以进行资源清理工作</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;--MyInterceptor01--afterCompletion()--&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="修改-springDispatcherServlet-servlet-xml-3"><a href="#修改-springDispatcherServlet-servlet-xml-3" class="headerlink" title="修改 springDispatcherServlet-servlet.xml"></a>修改 springDispatcherServlet-servlet.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置自定义拦截器-spring配置文件--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">           1. 第一种配置方式</span></span><br><span class="line"><span class="comment">           2. 使用ref 引用到对应的myInterceptor01</span></span><br><span class="line"><span class="comment">           3. 这种方式，会拦截所有的目标方法</span></span><br><span class="line"><span class="comment">       --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;myInterceptor01&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="创建-FurnHandler-java"><a href="#创建-FurnHandler-java" class="headerlink" title="创建 FurnHandler.java"></a>创建 FurnHandler.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.web.interceptor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> LiAng</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FurnHandler</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/hi&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hi</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;--FurnHandler--hi()--&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/hello&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;--FurnHandler--hello()--&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="创建-web-x2F-interceptor-jsp"><a href="#创建-web-x2F-interceptor-jsp" class="headerlink" title="创建 web&#x2F;interceptor.jsp"></a>创建 web&#x2F;interceptor.jsp</h4><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;测试自定义拦截器&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;测试自定义拦截器&lt;/h1&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;&lt;%=request.getContextPath()%&gt;/hi&quot;</span>&gt;测试自定义拦截器-hi&lt;/a&gt;&lt;br/&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;&lt;%=request.getContextPath()%&gt;/hello&quot;</span>&gt;测试自定义拦截器-hello&lt;/a&gt;&lt;br/&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h4 id="完成测试-16"><a href="#完成测试-16" class="headerlink" title="完成测试"></a>完成测试</h4><div align="center"> 
<img src="\images\SpringMVC.assets\image-20220624095645166.png"> 
</div> 

<h3 id="注意事项和细节说明-4"><a href="#注意事项和细节说明-4" class="headerlink" title="注意事项和细节说明"></a>注意事项和细节说明</h3><ol>
<li>默认配置是都所有的目标方法都进行拦截，也可以指定拦截目标方法，比如只是拦截 hi</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">          1. 第二种配置方式</span></span><br><span class="line"><span class="comment">          2. mvc:mapping path=&quot;/hi&quot; 指定要拦截的路径</span></span><br><span class="line"><span class="comment">          3. ref bean=&quot;myInterceptor01&quot; 指定对哪个拦截器进行配置</span></span><br><span class="line"><span class="comment">       --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">&quot;/hi&quot;</span>/&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;myInterceptor01&quot;</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure>

<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220624100114969.png"> 
</div> 

<ol start="2">
<li>mvc:mapping 支持通配符，同时指定不对哪些目标方法进行拦截</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">          1. 第三种配置方式</span></span><br><span class="line"><span class="comment">          2. mvc:mapping path=&quot;/h*&quot; 通配符方式 表示拦截 /h 打头的路径</span></span><br><span class="line"><span class="comment">          3. mvc:exclude-mapping path=&quot;/hello&quot; /hello不拦截</span></span><br><span class="line"><span class="comment">          4. ref bean=&quot;myInterceptor01&quot; 指定对哪个拦截器配置</span></span><br><span class="line"><span class="comment">       --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">&quot;/h*&quot;</span>/&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">mvc:exclude-mapping</span> <span class="attr">path</span>=<span class="string">&quot;/hello&quot;</span>/&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;myInterceptor01&quot;</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure>

<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220624100416764.png"> 
</div> 

<ol start="3">
<li><p>拦截器需要配置才生效，不配置是不生效的。</p>
</li>
<li><p>如果 preHandler() 方法返回了 false，就不会执行目标方法(前提是你的目标方法被拦截了)，程序员可以在这里根据业务需要指定跳转页面。</p>
</li>
</ol>
<h2 id="多个拦截器"><a href="#多个拦截器" class="headerlink" title="多个拦截器"></a>多个拦截器</h2><h3 id="执行流程"><a href="#执行流程" class="headerlink" title="执行流程"></a>执行流程</h3><div align="center"> 
<img src="\images\SpringMVC.assets\image-20220624104006379.png"> 
</div> 

<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220624105223984.png"> 
</div> 

<h3 id="应用实例1"><a href="#应用实例1" class="headerlink" title="应用实例1"></a>应用实例1</h3><h4 id="创建-MyInterceptor02-java"><a href="#创建-MyInterceptor02-java" class="headerlink" title="创建 MyInterceptor02.java"></a>创建 MyInterceptor02.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.web.interceptor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.HandlerInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ModelAndView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> LiAng</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyInterceptor02</span> <span class="keyword">implements</span> <span class="title class_">HandlerInterceptor</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;--MyInterceptor02--preHandle()--&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;--MyInterceptor02--postHandle()--&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;--MyInterceptor02--afterCompletion()--&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="修改-springDispatcherServlet-servlet-xml-4"><a href="#修改-springDispatcherServlet-servlet-xml-4" class="headerlink" title="修改 springDispatcherServlet-servlet.xml"></a>修改 springDispatcherServlet-servlet.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置自定义拦截器-spring配置文件--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">           1. 第3种配置方式</span></span><br><span class="line"><span class="comment">           2. mvc:mapping path=&quot;/h*&quot; 通配符方式 表示拦截 /h 打头的路径</span></span><br><span class="line"><span class="comment">           3. mvc:exclude-mapping path=&quot;/hello&quot; /hello不拦截</span></span><br><span class="line"><span class="comment">           4. ref bean=&quot;myInterceptor01&quot; 指定对哪个拦截器配置</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">&quot;/h*&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">mvc:exclude-mapping</span> <span class="attr">path</span>=<span class="string">&quot;/hello&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;myInterceptor01&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">            1.配置的第二个拦截器</span></span><br><span class="line"><span class="comment">            2.多个拦截器在执行时，是顺序执行</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">&quot;/h*&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;myInterceptor02&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="完成测试-17"><a href="#完成测试-17" class="headerlink" title="完成测试"></a>完成测试</h4><div align="center"> 
<img src="\images\SpringMVC.assets\image-20220624105631857.png"> 
</div> 

<h4 id="注意事项和细节说明-5"><a href="#注意事项和细节说明-5" class="headerlink" title="注意事项和细节说明"></a>注意事项和细节说明</h4><ol>
<li>如果第1个拦截器的 preHandle() 返回 false，后面都不在执行。</li>
<li>如果第2个拦截器的 preHandle() 返回 false，就直接执行第1个拦截器的afterCompletion()方法，如果拦截器更多，规则类似。</li>
<li><strong>前面说的规则，都是目标方法被拦截的前提。</strong></li>
</ol>
<h3 id="应用实例2"><a href="#应用实例2" class="headerlink" title="应用实例2"></a>应用实例2</h3><p>​		如果用户提交的数据有禁用词(比如 病毒)，则在第 1 个拦截器就返回，不执行目标方法。</p>
<h4 id="创建-web-WEB-INF-pages-waring-jsp"><a href="#创建-web-WEB-INF-pages-waring-jsp" class="headerlink" title="创建 web\WEB-INF\pages\waring.jsp"></a>创建 web\WEB-INF\pages\waring.jsp</h4><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;警告&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;不要乱讲话~&lt;/h1&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h4 id="修改-MyInterceptor01-java"><a href="#修改-MyInterceptor01-java" class="headerlink" title="修改 MyInterceptor01.java"></a>修改 MyInterceptor01.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;--MyInterceptor01--preHandle()--&quot;</span>);</span><br><span class="line">       <span class="comment">//获取到用户提交的关键字</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">keyword</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;keyword&quot;</span>);</span><br><span class="line">       <span class="keyword">if</span>(<span class="string">&quot;病毒&quot;</span>.equals(keyword))&#123;</span><br><span class="line">           <span class="comment">//请求转发到 warning.jsp</span></span><br><span class="line">           request.getRequestDispatcher(<span class="string">&quot;/WEB-INF/pages/warning.jsp&quot;</span>).forward(request,response);</span><br><span class="line">           <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       System.out.println(<span class="string">&quot;keyword：&quot;</span> + keyword);</span><br><span class="line">       <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<h4 id="完成测试-18"><a href="#完成测试-18" class="headerlink" title="完成测试"></a>完成测试</h4><p><img src="\images\SpringMVC.assets\image-20220624110453453.png" alt="image-20220624110453453" style="zoom:80%;" /><img src="D:\Study\VIP\主流框架\SpringMVC\笔记\SpringMVC.assets\image-20220624110511466.png" alt="image-20220624110511466" style="zoom:80%;" /></p>
<hr>


<h1 id="第十四章-异常处理"><a href="#第十四章-异常处理" class="headerlink" title="第十四章 异常处理"></a>第十四章 异常处理</h1><h2 id="基本介绍-5"><a href="#基本介绍-5" class="headerlink" title="基本介绍"></a>基本介绍</h2><ol>
<li>Spring MVC 通过 HandlerExceptionResolver 处理程序的异常，包括 Handler 映射、数据 绑定以及目标方法执行时发生的异常。 </li>
<li>主要处理 Handler 中用 <strong>@ExceptionHandler</strong> 注解定义的方法。 </li>
<li>ExceptionHandlerMethodResolver 内部若找不到@ExceptionHandler 注解的话，会找 <strong>@ControllerAdvice</strong> 类的 @ExceptionHandler 注解方法，这样就相当于一个全局异常处理器。</li>
</ol>
<h2 id="局部异常"><a href="#局部异常" class="headerlink" title="局部异常"></a>局部异常</h2><p>不处理异常，显示的非常不友好。</p>
<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220624112739428.png"> 
</div> 

<h3 id="应用实例-16"><a href="#应用实例-16" class="headerlink" title="应用实例"></a>应用实例</h3><h4 id="创建-MyExceptionHandler-java"><a href="#创建-MyExceptionHandler-java" class="headerlink" title="创建 MyExceptionHandler.java"></a>创建 MyExceptionHandler.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.web.exception;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ExceptionHandler;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> LiAng</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyExceptionHandler</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 1. localException 方法处理局部异常</span></span><br><span class="line"><span class="comment">     * 2. 这里处理ArithmeticException.class,NullPointerException.class</span></span><br><span class="line"><span class="comment">     * 3. Exception ex: 生成的异常对象，会传递给ex, 通过ex可以得到相关的信息</span></span><br><span class="line"><span class="comment">     *    , 这里程序员可以加入自己的业务逻辑</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(&#123;ArithmeticException.class,NullPointerException.class&#125;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">localException</span><span class="params">(Exception ex, HttpServletRequest request)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;局部异常信息是-&quot;</span> + ex.getMessage());</span><br><span class="line">        <span class="comment">//如何将异常的信息带到下一个页面.</span></span><br><span class="line">        request.setAttribute(<span class="string">&quot;reason&quot;</span>, ex.getMessage());</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;exception_mes&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 1. 编写方法，模拟异常, 算术异常</span></span><br><span class="line"><span class="comment">     * 2. 如果我们不做异常处理，是由tomcat默认页面显示</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/testException01&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">test01</span><span class="params">(Integer num)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">9</span> / num;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="创建-web-exception-jsp"><a href="#创建-web-exception-jsp" class="headerlink" title="创建 web\exception.jsp"></a>创建 web\exception.jsp</h4><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;异常信息&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;测试异常&lt;/h1&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;&lt;%=request.getContextPath()%&gt;/testException01&quot;</span>&gt;点击测试异常&lt;/a&gt;&lt;br&gt;&lt;br&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h4 id="创建-web-WEB-INF-pages-exception-mes-jsp"><a href="#创建-web-WEB-INF-pages-exception-mes-jsp" class="headerlink" title="创建 web\WEB-INF\pages\exception_mes.jsp"></a>创建 web\WEB-INF\pages\exception_mes.jsp</h4><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;异常信息提示&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;程序发生异常了...&lt;/h1&gt;</span><br><span class="line">异常信息：$&#123;requestScope.reason&#125;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h4 id="完成测试-19"><a href="#完成测试-19" class="headerlink" title="完成测试"></a>完成测试</h4><div align="center"> 
<img src="\images\SpringMVC.assets\image-20220624113543168.png"> 
</div> 

<h3 id="Debug"><a href="#Debug" class="headerlink" title="Debug"></a>Debug</h3><div align="center"> 
<img src="\images\SpringMVC.assets\image-20220624113826165.png"> 
</div> 

<h2 id="全局异常"><a href="#全局异常" class="headerlink" title="全局异常"></a>全局异常</h2><p>​		ExceptionHandlerMethodResolver 内部若找不到 @ExceptionHandler 注解的话，会找 @ControllerAdvice 类的@ExceptionHandler 注解方法，这样就相当于一个全局异常处理器。</p>
<h3 id="应用实例-17"><a href="#应用实例-17" class="headerlink" title="应用实例"></a>应用实例</h3><h4 id="创建-MyGlobalException-java"><a href="#创建-MyGlobalException-java" class="headerlink" title="创建 MyGlobalException.java"></a>创建 MyGlobalException.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.web.exception;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ControllerAdvice;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ExceptionHandler;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> LiAng</span></span><br><span class="line"><span class="comment"> * 如果类上标注了<span class="doctag">@ControllerAdvice</span>,就是一个全局异常处理类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyGlobalException</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 1. 全局异常就不管是哪个Handler抛出的异常，都可以捕获 , <span class="doctag">@ExceptionHandler</span>(&#123;异常类型&#125;)</span></span><br><span class="line"><span class="comment">     * 2. 这里处理的全局异常是NumberFormatException.class,ClassCastException.class</span></span><br><span class="line"><span class="comment">     * 3. Exception ex 接收抛出的异常对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(&#123;NumberFormatException.class, ClassCastException.class&#125;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">globalException</span><span class="params">(Exception ex, HttpServletRequest request)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;全局异常处理-&quot;</span> + ex.getMessage());</span><br><span class="line">        <span class="comment">//将异常的信息带到下一个页面.</span></span><br><span class="line">        request.setAttribute(<span class="string">&quot;reason&quot;</span>, ex.getMessage());</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;exception_mes&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="修改-MyExceptionHandler-java"><a href="#修改-MyExceptionHandler-java" class="headerlink" title="修改 MyExceptionHandler.java"></a>修改 MyExceptionHandler.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/testGlobalException&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">global</span><span class="params">()</span>&#123;</span><br><span class="line">       <span class="comment">//1. 这里我们模拟了一个异常 NumberFormatException</span></span><br><span class="line">       <span class="comment">//2. 该异常没有在局部异常处理，按照异常处理机制，就会交给全局异常处理类处理</span></span><br><span class="line">       <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> Integer.parseInt(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<h4 id="修改-web-exception-jsp"><a href="#修改-web-exception-jsp" class="headerlink" title="修改 web\exception.jsp"></a>修改 web\exception.jsp</h4><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=<span class="string">&quot;&lt;%=request.getContextPath()%&gt;/testGlobalException&quot;</span>&gt;点击测试异常&lt;/a&gt;&lt;br&gt;&lt;br&gt;</span><br></pre></td></tr></table></figure>

<h4 id="完成测试-20"><a href="#完成测试-20" class="headerlink" title="完成测试"></a>完成测试</h4><div align="center"> 
<img src="\images\SpringMVC.assets\image-20220624114954360.png"> 
</div> 

<h3 id="Debug-1"><a href="#Debug-1" class="headerlink" title="Debug"></a>Debug</h3><div align="center"> 
<img src="\images\SpringMVC.assets\image-20220624113826165.png"> 
</div> 

<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220624115612570.png"> 
</div> 

<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220624115855116.png"> 
</div> 

<div align="center"> 
<img src="\images\SpringMVC.assets\image-20220624115955444.png"> 
</div> 

<h3 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h3><p><strong>局部异常 优先级高于 全局异常。</strong></p>
<h2 id="自定义异常"><a href="#自定义异常" class="headerlink" title="自定义异常"></a>自定义异常</h2><p>通过@ResponseStatus 注解，可以自定义异常的说明。</p>
<h3 id="应用实例-18"><a href="#应用实例-18" class="headerlink" title="应用实例"></a>应用实例</h3><h4 id="创建-AgeException-java"><a href="#创建-AgeException-java" class="headerlink" title="创建 AgeException.java"></a>创建 AgeException.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzw.web.exception;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.http.HttpStatus;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseStatus;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> LiAng</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@ResponseStatus(reason = &quot;年龄需要在1-120之间&quot;, value = HttpStatus.BAD_REQUEST)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AgeException</span> <span class="keyword">extends</span> <span class="title class_">RuntimeException</span> &#123;</span><br><span class="line">   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="修改-MyExceptionHandler-java-1"><a href="#修改-MyExceptionHandler-java-1" class="headerlink" title="修改 MyExceptionHandler.java"></a>修改 MyExceptionHandler.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testException02&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">test02</span><span class="params">()</span>&#123;</span><br><span class="line">       <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">AgeException</span>();</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<h4 id="修改-exception-jsp"><a href="#修改-exception-jsp" class="headerlink" title="修改 exception.jsp"></a>修改 exception.jsp</h4><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=<span class="string">&quot;&lt;%=request.getContextPath()%&gt;/testException02&quot;</span>&gt;点击测试自定义异常&lt;/a&gt;&lt;br&gt;&lt;br&gt;</span><br></pre></td></tr></table></figure>

<h4 id="完成测试-21"><a href="#完成测试-21" class="headerlink" title="完成测试"></a>完成测试</h4><div align="center"> 
<img src="\images\SpringMVC.assets\image-20220624145916157.png"> 
</div> 

<h3 id="Debug-2"><a href="#Debug-2" class="headerlink" title="Debug"></a>Debug</h3><div align="center"> 
<img src="\images\SpringMVC.assets\image-20220624113826165.png"> 
</div> 

<h2 id="统一处理异常"><a href="#统一处理异常" class="headerlink" title="统一处理异常"></a>统一处理异常</h2><h3 id="说明-14"><a href="#说明-14" class="headerlink" title="说明"></a>说明</h3><ol>
<li>如果希望对所有异常进行统一处理，可以使用 SimpleMappingExceptionResolver。</li>
<li>它将异常类名映射为视图名，即发生异常时使用对应的视图报告异常。</li>
<li>需要在 ioc 容器中配置。</li>
</ol>
<h3 id="应用实例-19"><a href="#应用实例-19" class="headerlink" title="应用实例"></a>应用实例</h3><p>对数组越界异常进行统一处理，使用 SimpleMappingExceptionResolver。</p>
<h4 id="修改-MyExceptionHandler-java-2"><a href="#修改-MyExceptionHandler-java-2" class="headerlink" title="修改 MyExceptionHandler.java"></a>修改 MyExceptionHandler.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/testException03&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">test03</span><span class="params">()</span>&#123;</span><br><span class="line">       <span class="type">int</span>[] arr = <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;<span class="number">3</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">190</span>&#125;;</span><br><span class="line">       <span class="comment">//抛出一个数组越界的异常 ArrayIndexOutOfBoundsException</span></span><br><span class="line">       System.out.println(arr[<span class="number">90</span>]);</span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<h4 id="修改-springDispatcherServlet-servlet-xml-5"><a href="#修改-springDispatcherServlet-servlet-xml-5" class="headerlink" title="修改 springDispatcherServlet-servlet.xml"></a>修改 springDispatcherServlet-servlet.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置统一处理异常bean--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.handler.SimpleMappingExceptionResolver&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;exceptionMappings&quot;</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">props</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;java.lang.ArrayIndexOutOfBoundsException&quot;</span>&gt;</span>arrEx<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="创建-web-WEB-INF-pages-arrEx-jsp"><a href="#创建-web-WEB-INF-pages-arrEx-jsp" class="headerlink" title="创建 web\WEB-INF\pages\arrEx.jsp"></a>创建 web\WEB-INF\pages\arrEx.jsp</h4><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;数组越界异常&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;数组越界异常&lt;/h1&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h4 id="修改-exception-jsp-1"><a href="#修改-exception-jsp-1" class="headerlink" title="修改 exception.jsp"></a>修改 exception.jsp</h4><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=<span class="string">&quot;&lt;%=request.getContextPath()%&gt;/testException03&quot;</span>&gt;点击测试统一处理异常&lt;/a&gt;&lt;br&gt;&lt;br&gt;</span><br></pre></td></tr></table></figure>

<h4 id="完成测试-22"><a href="#完成测试-22" class="headerlink" title="完成测试"></a>完成测试</h4><div align="center"> 
<img src="\images\SpringMVC.assets\image-20220624151402883.png"> 
</div> 



<h3 id="对未知异常进行统一处理"><a href="#对未知异常进行统一处理" class="headerlink" title="对未知异常进行统一处理"></a>对未知异常进行统一处理</h3><p>对未知异常进行统一处理，使用 SimpleMappingExceptionResolver。</p>
<h4 id="修改-MyExceptionHandler-java-3"><a href="#修改-MyExceptionHandler-java-3" class="headerlink" title="修改 MyExceptionHandler.java"></a>修改 MyExceptionHandler.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//如果发生了没有归类的异常， 可以给出统一提示页面</span></span><br><span class="line">   <span class="meta">@RequestMapping(value = &quot;/testException04&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">test04</span><span class="params">()</span>&#123;</span><br><span class="line">       <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">       <span class="comment">//这里会抛出 StringIndexOutOfBoundsException</span></span><br><span class="line">       <span class="type">char</span> <span class="variable">c</span> <span class="operator">=</span> str.charAt(<span class="number">10</span>);</span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<h4 id="修改-springDispatcherServlet-servlet-xml-6"><a href="#修改-springDispatcherServlet-servlet-xml-6" class="headerlink" title="修改 springDispatcherServlet-servlet.xml"></a>修改 springDispatcherServlet-servlet.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置统一处理异常bean--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.handler.SimpleMappingExceptionResolver&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;exceptionMappings&quot;</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">props</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;java.lang.ArrayIndexOutOfBoundsException&quot;</span>&gt;</span>arrEx<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;java.lang.Exception&quot;</span>&gt;</span>allEx<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="创建-web-WEB-INF-pages-allEx-jsp"><a href="#创建-web-WEB-INF-pages-allEx-jsp" class="headerlink" title="创建 web\WEB-INF\pages\allEx.jsp"></a>创建 web\WEB-INF\pages\allEx.jsp</h4><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;未知异常信息&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;系统发生了未知异常&lt;/h1&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="修改-exception-jsp-2"><a href="#修改-exception-jsp-2" class="headerlink" title="修改 exception.jsp"></a>修改 exception.jsp</h4><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=<span class="string">&quot;&lt;%=request.getContextPath()%&gt;/testException04&quot;</span>&gt;点击测试未知异常&lt;/a&gt;&lt;br&gt;&lt;br&gt;</span><br></pre></td></tr></table></figure>

<h4 id="完成测试-23"><a href="#完成测试-23" class="headerlink" title="完成测试"></a>完成测试</h4><div align="center"> 
<img src="\images\SpringMVC.assets\image-20220624151915869.png"> 
</div> 

<h2 id="异常处理的优先级"><a href="#异常处理的优先级" class="headerlink" title="异常处理的优先级"></a>异常处理的优先级</h2><p>局部异常 &gt; 全局异常 &gt; SimpleMappingExceptionResolver &gt; tomcat 默认机制</p>

    </div>

    
    
    

    
        <div>
          <div>
    
        <div style="text-align:center;color: #ccc;font-size:24px;">-------------本文结束<i class="fa fa-paw"></i>感谢您的阅读-------------</div>
    
</div>
        </div>
    

    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Java/" rel="tag"># Java</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2022/07/25/origin/SpringMVC/" rel="prev" title="SpringMVC">
      <i class="fa fa-chevron-left"></i> SpringMVC
    </a></div>
      <div class="post-nav-item"></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AC%AC%E4%B8%80%E7%AB%A0-SpringMVC%E4%BB%8B%E7%BB%8D"><span class="nav-number">1.</span> <span class="nav-text">第一章 SpringMVC介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3"><span class="nav-number">1.1.</span> <span class="nav-text">官方文档</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="nav-number">1.2.</span> <span class="nav-text">基本介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#SpringMVC%E7%89%B9%E7%82%B9-amp-%E6%A6%82%E8%BF%B0"><span class="nav-number">1.2.1.</span> <span class="nav-text">SpringMVC特点&amp;概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Spring-SpringMVC-SpringBoot-%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="nav-number">1.2.2.</span> <span class="nav-text">Spring SpringMVC SpringBoot 的关系</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8"><span class="nav-number">1.3.</span> <span class="nav-text">快速入门</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9C%80%E6%B1%82%E8%AF%B4%E6%98%8E"><span class="nav-number">1.3.1.</span> <span class="nav-text">需求说明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%99%BB%E5%BD%95%E6%B5%81%E7%A8%8B%E5%88%86%E6%9E%90"><span class="nav-number">1.3.2.</span> <span class="nav-text">登录流程分析</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="nav-number">1.3.3.</span> <span class="nav-text">代码实现</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E5%88%9B%E5%BB%BA-springmvc-web-%E5%B7%A5%E7%A8%8B%E5%B9%B6%E9%85%8D%E7%BD%AE-tomcat"><span class="nav-number">1.3.3.1.</span> <span class="nav-text">1.创建 springmvc web 工程并配置 tomcat</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E5%AF%BC%E5%85%A5-SpringMVC-%E5%BC%80%E5%8F%91%E9%9C%80%E8%A6%81%E7%9A%84-jar-%E5%8C%85"><span class="nav-number">1.3.3.2.</span> <span class="nav-text">2. 导入 SpringMVC 开发需要的 jar 包</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-%E5%88%9B%E5%BB%BA-src-x2F-applicationContext-mvc-xml-%E6%96%87%E4%BB%B6-%E5%B0%B1%E6%98%AF-spring-%E7%9A%84%E5%AE%B9%E5%99%A8%E6%96%87%E4%BB%B6-%EF%BC%8C%E6%96%87%E4%BB%B6%E5%90%8D%E8%87%AA%E5%B7%B1%E5%AE%9A"><span class="nav-number">1.3.3.3.</span> <span class="nav-text">3. 创建 src&#x2F;applicationContext-mvc.xml 文件(就是 spring 的容器文件)，文件名自己定</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-%E9%85%8D%E7%BD%AE-WEB-INF-x2F-web-xml"><span class="nav-number">1.3.3.4.</span> <span class="nav-text">4. 配置 WEB-INF&#x2F;web.xml</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-%E5%88%9B%E5%BB%BA-web-x2F-login-jsp"><span class="nav-number">1.3.3.5.</span> <span class="nav-text">5.创建 web&#x2F;login.jsp</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-%E5%88%9B%E5%BB%BA-com-lzw-web-UserServlet-java"><span class="nav-number">1.3.3.6.</span> <span class="nav-text">6.创建 com\lzw\web\UserServlet.java</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-%E5%88%9B%E5%BB%BAweb-WEB-INF-pages-login-ok-jsp"><span class="nav-number">1.3.3.7.</span> <span class="nav-text">7.创建web\WEB-INF\pages\login_ok.jsp</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#8-%E9%85%8D%E7%BD%AE-applicationContext-mvc-xml"><span class="nav-number">1.3.3.8.</span> <span class="nav-text">8.配置 applicationContext-mvc.xml</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#9-%E7%99%BB%E5%BD%95%E6%B5%8B%E8%AF%95"><span class="nav-number">1.3.3.9.</span> <span class="nav-text">9.登录测试</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%E5%92%8C%E7%BB%86%E8%8A%82%E8%AF%B4%E6%98%8E"><span class="nav-number">1.3.4.</span> <span class="nav-text">注意事项和细节说明</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SpringMVC%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B"><span class="nav-number">1.4.</span> <span class="nav-text">SpringMVC执行流程</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AC%AC%E4%BA%8C%E7%AB%A0-RequestMapping"><span class="nav-number">2.</span> <span class="nav-text">第二章 RequestMapping</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="nav-number">2.1.</span> <span class="nav-text">基本使用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RequestMapping-%E6%B3%A8%E8%A7%A3%E5%85%B6%E5%AE%83%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F"><span class="nav-number">2.2.</span> <span class="nav-text">@RequestMapping 注解其它使用方式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#RequestMapping-%E5%8F%AF%E4%BB%A5%E4%BF%AE%E9%A5%B0%E6%96%B9%E6%B3%95%E5%92%8C%E7%B1%BB"><span class="nav-number">2.2.1.</span> <span class="nav-text">@RequestMapping 可以修饰方法和类</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AF%B4%E6%98%8E"><span class="nav-number">2.2.1.1.</span> <span class="nav-text">说明</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%AE%9E%E4%BE%8B"><span class="nav-number">2.2.1.2.</span> <span class="nav-text">应用实例</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-UserHandler-java"><span class="nav-number">2.2.1.2.1.</span> <span class="nav-text">创建 UserHandler.java</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-web-WEB-INF-pages-success-jsp"><span class="nav-number">2.2.1.2.2.</span> <span class="nav-text">创建 web\WEB-INF\pages\success.jsp</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-web-request"><span class="nav-number">2.2.1.2.3.</span> <span class="nav-text">创建 web\request</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%8C%E6%88%90%E6%B5%8B%E8%AF%95"><span class="nav-number">2.2.1.3.</span> <span class="nav-text">完成测试</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#RequestMapping-%E5%8F%AF%E4%BB%A5%E6%8C%87%E5%AE%9A%E8%AF%B7%E6%B1%82%E6%96%B9%E5%BC%8F"><span class="nav-number">2.2.2.</span> <span class="nav-text">@RequestMapping 可以指定请求方式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AF%B4%E6%98%8E-1"><span class="nav-number">2.2.2.1.</span> <span class="nav-text">说明</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%AE%9E%E4%BE%8B-1"><span class="nav-number">2.2.2.2.</span> <span class="nav-text">应用实例</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#RequestMapping-%E5%8F%AF%E6%8C%87%E5%AE%9A-params-%E5%92%8C-headers-%E6%94%AF%E6%8C%81%E7%AE%80%E5%8D%95%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-number">2.2.3.</span> <span class="nav-text">@RequestMapping 可指定 params 和 headers 支持简单表达式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AF%B4%E6%98%8E-2"><span class="nav-number">2.2.3.1.</span> <span class="nav-text">说明</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%AE%9E%E4%BE%8B-2"><span class="nav-number">2.2.3.2.</span> <span class="nav-text">应用实例</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-UserHandler-java"><span class="nav-number">2.2.3.2.1.</span> <span class="nav-text">修改 UserHandler.java</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-request-jsp"><span class="nav-number">2.2.3.2.2.</span> <span class="nav-text">修改 request.jsp</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%8C%E6%88%90%E6%B5%8B%E8%AF%95-1"><span class="nav-number">2.2.3.3.</span> <span class="nav-text">完成测试</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B0%8F%E7%BB%86%E8%8A%82%E8%AF%B4%E6%98%8E"><span class="nav-number">2.2.3.4.</span> <span class="nav-text">小细节说明</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%9C%80%E8%A6%81%E6%9C%89-bookId-%E5%8F%82%E6%95%B0%EF%BC%8C%E5%B9%B6%E4%B8%94%E5%80%BC%E4%B8%BA-100%EF%BC%8C%E5%90%A6%E5%88%99%E6%8A%A5%E9%94%99"><span class="nav-number">2.2.3.4.1.</span> <span class="nav-text">需要有 bookId 参数，并且值为 100，否则报错</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%9C%80%E8%A6%81%E6%9C%89-bookId-%E5%8F%82%E6%95%B0%EF%BC%8C%E5%B9%B6%E4%B8%94%E5%80%BC%E4%B8%8D%E4%B8%BA-100%EF%BC%8C%E5%90%A6%E5%88%99%E6%8A%A5%E9%94%99"><span class="nav-number">2.2.3.4.2.</span> <span class="nav-text">需要有 bookId 参数，并且值不为 100，否则报错</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#RequestMapping-%E6%94%AF%E6%8C%81-Ant-%E9%A3%8E%E6%A0%BC%E8%B5%84%E6%BA%90%E5%9C%B0%E5%9D%80"><span class="nav-number">2.2.4.</span> <span class="nav-text">@RequestMapping 支持 Ant 风格资源地址</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AF%B4%E6%98%8E-3"><span class="nav-number">2.2.4.1.</span> <span class="nav-text">说明</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%AE%9E%E4%BE%8B-3"><span class="nav-number">2.2.4.2.</span> <span class="nav-text">应用实例</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-UserHandler-java-1"><span class="nav-number">2.2.4.2.1.</span> <span class="nav-text">修改 UserHandler.java</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-request-jsp-1"><span class="nav-number">2.2.4.2.2.</span> <span class="nav-text">修改 request.jsp</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%8C%E6%88%90%E6%B5%8B%E8%AF%95-2"><span class="nav-number">2.2.4.3.</span> <span class="nav-text">完成测试</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#RequestMapping-%E5%8F%AF%E9%85%8D%E5%90%88-PathVariable-%E6%98%A0%E5%B0%84-URL-%E7%BB%91%E5%AE%9A%E7%9A%84%E5%8D%A0%E4%BD%8D%E7%AC%A6"><span class="nav-number">2.2.5.</span> <span class="nav-text">@RequestMapping 可配合 @PathVariable 映射 URL 绑定的占位符</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AF%B4%E6%98%8E-4"><span class="nav-number">2.2.5.1.</span> <span class="nav-text">说明</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%AE%9E%E4%BE%8B-4"><span class="nav-number">2.2.5.2.</span> <span class="nav-text">应用实例</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-UserHandler-java-2"><span class="nav-number">2.2.5.2.1.</span> <span class="nav-text">修改 UserHandler.java</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-request-jsp-2"><span class="nav-number">2.2.5.2.2.</span> <span class="nav-text">修改 request.jsp</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%8C%E6%88%90%E6%B5%8B%E8%AF%95-3"><span class="nav-number">2.2.5.3.</span> <span class="nav-text">完成测试</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%E5%92%8C%E7%BB%86%E8%8A%82"><span class="nav-number">2.2.6.</span> <span class="nav-text">注意事项和细节</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%9C%E4%B8%9A"><span class="nav-number">2.2.7.</span> <span class="nav-text">作业</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AC%AC%E4%B8%89%E7%AB%A0-Postman%E6%8E%A5%E5%8F%A3%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7"><span class="nav-number">3.</span> <span class="nav-text">第三章 Postman接口测试工具</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Postman%E4%BB%8B%E7%BB%8D"><span class="nav-number">3.1.</span> <span class="nav-text">Postman介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Postman%E4%B8%8B%E8%BD%BD%E5%92%8C%E5%AE%89%E8%A3%85"><span class="nav-number">3.2.</span> <span class="nav-text">Postman下载和安装</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%8B%E8%BD%BD%E5%9C%B0%E5%9D%80"><span class="nav-number">3.2.1.</span> <span class="nav-text">下载地址</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85"><span class="nav-number">3.2.2.</span> <span class="nav-text">安装</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE"><span class="nav-number">3.2.3.</span> <span class="nav-text">设置</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AD%97%E4%BD%93%E8%AE%BE%E7%BD%AE"><span class="nav-number">3.2.3.1.</span> <span class="nav-text">字体设置</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BF%AB%E6%8D%B7%E9%94%AE"><span class="nav-number">3.2.3.2.</span> <span class="nav-text">快捷键</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Postman%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8"><span class="nav-number">3.3.</span> <span class="nav-text">Postman快速入门</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9C%80%E6%B1%82%E8%AF%B4%E6%98%8E-1"><span class="nav-number">3.3.1.</span> <span class="nav-text">需求说明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-Http-Request"><span class="nav-number">3.3.2.</span> <span class="nav-text">创建 Http Request</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Postman%E5%AE%8C%E6%88%90Controller%E5%B1%82%E6%B5%8B%E8%AF%95"><span class="nav-number">3.4.</span> <span class="nav-text">Postman完成Controller层测试</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E5%AE%8C%E6%88%90%E8%AF%B7%E6%B1%82"><span class="nav-number">3.4.1.</span> <span class="nav-text">1.完成请求</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E5%AE%8C%E6%88%90%E8%AF%B7%E6%B1%82"><span class="nav-number">3.4.2.</span> <span class="nav-text">2.完成请求</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E5%AE%8C%E6%88%90%E8%AF%B7%E6%B1%82"><span class="nav-number">3.4.3.</span> <span class="nav-text">3.完成请求</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E5%AE%8C%E6%88%90%E8%AF%B7%E6%B1%82"><span class="nav-number">3.4.4.</span> <span class="nav-text">4.完成请求</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-%E5%AE%8C%E6%88%90%E8%AF%B7%E6%B1%82"><span class="nav-number">3.4.5.</span> <span class="nav-text">5.完成请求</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%B6%E4%BB%96%E8%AF%B4%E6%98%8E"><span class="nav-number">3.5.</span> <span class="nav-text">其他说明</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AC%AC%E5%9B%9B%E7%AB%A0-Rest-%E4%BC%98%E9%9B%85%E7%9A%84url%E8%AF%B7%E6%B1%82%E9%A3%8E%E6%A0%BC"><span class="nav-number">4.</span> <span class="nav-text">第四章 Rest-优雅的url请求风格</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D-1"><span class="nav-number">4.1.</span> <span class="nav-text">基本介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#REST%E7%9A%84%E6%A0%B8%E5%BF%83%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="nav-number">4.2.</span> <span class="nav-text">REST的核心过滤器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Rest-%E9%A3%8E%E6%A0%BC%E7%9A%84-url-%E5%AE%8C%E6%88%90%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5"><span class="nav-number">4.3.</span> <span class="nav-text">Rest 风格的 url-完成增删改查</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%A3%E7%A0%81%E6%BC%94%E7%A4%BA"><span class="nav-number">4.3.1.</span> <span class="nav-text">代码演示</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-web-xml-%E6%B7%BB%E5%8A%A0-HiddenHttpMethodFilter"><span class="nav-number">4.3.1.1.</span> <span class="nav-text">修改 web.xml 添加 HiddenHttpMethodFilter</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-springDispatcherServlet-servlet-xml"><span class="nav-number">4.3.1.2.</span> <span class="nav-text">修改 springDispatcherServlet-servlet.xml</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-web-rest-jsp"><span class="nav-number">4.3.1.3.</span> <span class="nav-text">创建 web\rest.jsp</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-BookHandler-java"><span class="nav-number">4.3.1.4.</span> <span class="nav-text">创建 BookHandler.java</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%8C%E6%88%90GET%E6%B5%8B%E8%AF%95"><span class="nav-number">4.3.1.5.</span> <span class="nav-text">完成GET测试</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-BookHandler-java"><span class="nav-number">4.3.1.6.</span> <span class="nav-text">修改 BookHandler.java</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%8C%E6%88%90POST%E6%B5%8B%E8%AF%95"><span class="nav-number">4.3.1.7.</span> <span class="nav-text">完成POST测试</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-BookHandler-java-1"><span class="nav-number">4.3.1.8.</span> <span class="nav-text">修改 BookHandler.java</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-rest-jsp"><span class="nav-number">4.3.1.9.</span> <span class="nav-text">修改 rest.jsp</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%8C%E6%88%90DELETE%E6%B5%8B%E8%AF%95"><span class="nav-number">4.3.1.10.</span> <span class="nav-text">完成DELETE测试</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-BookHandler-java-2"><span class="nav-number">4.3.1.11.</span> <span class="nav-text">修改 BookHandler.java</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%8C%E6%88%90PUT%E6%B5%8B%E8%AF%95"><span class="nav-number">4.3.1.12.</span> <span class="nav-text">完成PUT测试</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%E5%92%8C%E7%BB%86%E8%8A%82%E8%AF%B4%E6%98%8E-1"><span class="nav-number">4.3.2.</span> <span class="nav-text">注意事项和细节说明</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AC%AC%E4%BA%94%E7%AB%A0-SpringMVC%E6%98%A0%E5%B0%84%E8%AF%B7%E6%B1%82%E6%95%B0%E6%8D%AE"><span class="nav-number">5.</span> <span class="nav-text">第五章 SpringMVC映射请求数据</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E5%8F%82%E6%95%B0%E5%80%BC"><span class="nav-number">5.1.</span> <span class="nav-text">获取参数值</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%B4%E6%98%8E-5"><span class="nav-number">5.1.1.</span> <span class="nav-text">说明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%AE%9E%E4%BE%8B-5"><span class="nav-number">5.1.2.</span> <span class="nav-text">应用实例</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-VoteHandler-java"><span class="nav-number">5.1.2.1.</span> <span class="nav-text">创建 VoteHandler.java</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-request-parameter-jsp"><span class="nav-number">5.1.2.2.</span> <span class="nav-text">创建 request_parameter.jsp</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96http%E8%AF%B7%E6%B1%82%E6%B6%88%E6%81%AF%E5%A4%B4"><span class="nav-number">5.2.</span> <span class="nav-text">获取http请求消息头</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%AE%9E%E4%BE%8B-6"><span class="nav-number">5.2.1.</span> <span class="nav-text">应用实例</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-VoteHandler-java"><span class="nav-number">5.2.1.1.</span> <span class="nav-text">修改 VoteHandler.java</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-request-parameter-jsp"><span class="nav-number">5.2.1.2.</span> <span class="nav-text">修改 request_parameter.jsp</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96-javabean-%E5%BD%A2%E5%BC%8F%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="nav-number">5.3.</span> <span class="nav-text">获取 javabean 形式的数据</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%B4%E6%98%8E-6"><span class="nav-number">5.3.1.</span> <span class="nav-text">说明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%AE%9E%E4%BE%8B-7"><span class="nav-number">5.3.2.</span> <span class="nav-text">应用实例</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-Pet-java"><span class="nav-number">5.3.2.1.</span> <span class="nav-text">创建 Pet.java</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-Master-java"><span class="nav-number">5.3.2.2.</span> <span class="nav-text">创建 Master.java</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-VoteHandler-java-1"><span class="nav-number">5.3.2.3.</span> <span class="nav-text">修改 VoteHandler.java</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-request-parameter-jsp-1"><span class="nav-number">5.3.2.4.</span> <span class="nav-text">修改 request_parameter.jsp</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="nav-number">5.3.3.</span> <span class="nav-text">注意事项</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96-servlet-api"><span class="nav-number">5.4.</span> <span class="nav-text">获取 servlet api</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%B4%E6%98%8E-7"><span class="nav-number">5.4.1.</span> <span class="nav-text">说明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%AE%9E%E4%BE%8B-8"><span class="nav-number">5.4.2.</span> <span class="nav-text">应用实例</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-VoteHandler-java-2"><span class="nav-number">5.4.2.1.</span> <span class="nav-text">修改 VoteHandler.java</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-request-parameter-jsp-2"><span class="nav-number">5.4.2.2.</span> <span class="nav-text">修改 request_parameter.jsp</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9-1"><span class="nav-number">5.4.3.</span> <span class="nav-text">注意事项</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AC%AC%E5%85%AD%E7%AB%A0-%E6%A8%A1%E5%9E%8B%E6%95%B0%E6%8D%AE"><span class="nav-number">6.</span> <span class="nav-text">第六章 模型数据</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A8%A1%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86-%E6%95%B0%E6%8D%AE%E6%94%BE%E5%85%A5Request%E5%9F%9F"><span class="nav-number">6.1.</span> <span class="nav-text">模型数据处理-数据放入Request域</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%B4%E6%98%8E-8"><span class="nav-number">6.1.1.</span> <span class="nav-text">说明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%9A%E8%BF%87-HttpServletRequest-%E6%94%BE%E5%85%A5-request-%E5%9F%9F"><span class="nav-number">6.1.2.</span> <span class="nav-text">通过 HttpServletRequest 放入 request 域</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-web-model-data-jsp"><span class="nav-number">6.1.2.1.</span> <span class="nav-text">创建 web\model_data.jsp</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-VoteHandler-java-3"><span class="nav-number">6.1.2.2.</span> <span class="nav-text">修改 VoteHandler.java</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-web-WEB-INF-vote-ok-jsp"><span class="nav-number">6.1.2.3.</span> <span class="nav-text">创建 web\WEB-INF\vote_ok.jsp</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%9A%E8%BF%87%E8%AF%B7%E6%B1%82%E7%9A%84%E6%96%B9%E6%B3%95%E5%8F%82%E6%95%B0-Map-lt-String-Object-gt-%E6%94%BE%E5%85%A5-request-%E5%9F%9F"><span class="nav-number">6.1.3.</span> <span class="nav-text">通过请求的方法参数 Map&lt;String,Object&gt; 放入 request 域</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-model-data-jsp"><span class="nav-number">6.1.3.1.</span> <span class="nav-text">修改 model_data.jsp</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-VoteHandler-java-4"><span class="nav-number">6.1.3.2.</span> <span class="nav-text">修改 VoteHandler.java</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%9A%E8%BF%87%E8%BF%94%E5%9B%9E-ModelAndView-%E5%AF%B9%E8%B1%A1-%E5%AE%9E%E7%8E%B0-request-%E5%9F%9F%E6%95%B0%E6%8D%AE"><span class="nav-number">6.1.4.</span> <span class="nav-text">通过返回 ModelAndView 对象 实现 request 域数据</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-model-data-jsp-1"><span class="nav-number">6.1.4.1.</span> <span class="nav-text">修改 model_data.jsp</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-VoteHandler-java-5"><span class="nav-number">6.1.4.2.</span> <span class="nav-text">修改 VoteHandler.java</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9-2"><span class="nav-number">6.1.4.3.</span> <span class="nav-text">注意事项</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A8%A1%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86-%E6%95%B0%E6%8D%AE%E6%94%BE%E5%85%A5-Session%E5%9F%9F"><span class="nav-number">6.2.</span> <span class="nav-text">模型数据处理-数据放入 Session域</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%B4%E6%98%8E-9"><span class="nav-number">6.2.1.</span> <span class="nav-text">说明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%AE%9E%E4%BE%8B-9"><span class="nav-number">6.2.2.</span> <span class="nav-text">应用实例</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-model-data-jsp-2"><span class="nav-number">6.2.2.1.</span> <span class="nav-text">修改 model_data.jsp</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-VoteHandler-java-6"><span class="nav-number">6.2.2.2.</span> <span class="nav-text">修改 VoteHandler.java</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-vote-ok-jsp"><span class="nav-number">6.2.2.3.</span> <span class="nav-text">修改 vote_ok.jsp</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ModelAttribute-%E5%AE%9E%E7%8E%B0-prepare-%E6%96%B9%E6%B3%95"><span class="nav-number">6.3.</span> <span class="nav-text">@ModelAttribute 实现 prepare 方法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%B4%E6%98%8E-10"><span class="nav-number">6.3.1.</span> <span class="nav-text">说明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%AE%9E%E4%BE%8B-10"><span class="nav-number">6.3.2.</span> <span class="nav-text">应用实例</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-VoteHandler-java-7"><span class="nav-number">6.3.2.1.</span> <span class="nav-text">修改 VoteHandler.java</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ModelAttribute-%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5"><span class="nav-number">6.3.3.</span> <span class="nav-text">@ModelAttribute 最佳实践</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AC%AC%E4%B8%83%E7%AB%A0-%E8%A7%86%E5%9B%BE%E5%92%8C%E8%A7%86%E5%9B%BE%E8%A7%A3%E6%9E%90%E5%99%A8"><span class="nav-number">7.</span> <span class="nav-text">第七章 视图和视图解析器</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D-2"><span class="nav-number">7.1.</span> <span class="nav-text">基本介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E8%A7%86%E5%9B%BE"><span class="nav-number">7.2.</span> <span class="nav-text">自定义视图</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E8%87%AA%E5%AE%9A%E4%B9%89%E8%A7%86%E5%9B%BE"><span class="nav-number">7.2.1.</span> <span class="nav-text">为什么需要自定义视图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0-1"><span class="nav-number">7.2.2.</span> <span class="nav-text">代码实现</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE-springDispatcherServlet-servlet-xml"><span class="nav-number">7.2.2.1.</span> <span class="nav-text">配置 springDispatcherServlet-servlet.xml</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-MyView-java"><span class="nav-number">7.2.2.2.</span> <span class="nav-text">创建 MyView.java</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-GoodsHandler-java"><span class="nav-number">7.2.2.3.</span> <span class="nav-text">创建 GoodsHandler.java</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-web-view-jsp"><span class="nav-number">7.2.2.4.</span> <span class="nav-text">创建 web\view.jsp</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%8C%E6%88%90%E6%B5%8B%E8%AF%95-4"><span class="nav-number">7.2.3.</span> <span class="nav-text">完成测试</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E8%A7%86%E5%9B%BE%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E5%B0%8F%E7%BB%93"><span class="nav-number">7.2.4.</span> <span class="nav-text">自定义视图工作流程小结</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E8%A7%86%E5%9B%BE-%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B"><span class="nav-number">7.2.5.</span> <span class="nav-text">自定义视图-工作流程</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%9B%AE%E6%A0%87%E6%96%B9%E6%B3%95%E7%9B%B4%E6%8E%A5%E6%8C%87%E5%AE%9A%E8%BD%AC%E5%8F%91%E6%88%96%E9%87%8D%E5%AE%9A%E5%90%91"><span class="nav-number">7.3.</span> <span class="nav-text">目标方法直接指定转发或重定向</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E5%AE%9E%E4%BE%8B"><span class="nav-number">7.3.1.</span> <span class="nav-text">使用实例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0-2"><span class="nav-number">7.3.2.</span> <span class="nav-text">代码实现</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-GoodsHandler-java"><span class="nav-number">7.3.2.1.</span> <span class="nav-text">修改 GoodsHandler.java</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-view-jsp"><span class="nav-number">7.3.2.2.</span> <span class="nav-text">修改 view.jsp</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%8C%E6%88%90%E6%B5%8B%E8%AF%95-5"><span class="nav-number">7.3.3.</span> <span class="nav-text">完成测试</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%9C%E4%B8%9A-1"><span class="nav-number">7.4.</span> <span class="nav-text">作业</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0-3"><span class="nav-number">7.4.1.</span> <span class="nav-text">代码实现</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-login-jsp"><span class="nav-number">7.4.1.1.</span> <span class="nav-text">创建 login.jsp</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-User-java"><span class="nav-number">7.4.1.2.</span> <span class="nav-text">创建 User.java</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-LoginHandler-java"><span class="nav-number">7.4.1.3.</span> <span class="nav-text">创建 LoginHandler.java</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-login-ok-jsp"><span class="nav-number">7.4.1.4.</span> <span class="nav-text">创建 login_ok.jsp</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-login-error-jsp"><span class="nav-number">7.4.1.5.</span> <span class="nav-text">创建 login_error.jsp</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AC%AC%E5%85%AB%E7%AB%A0-%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F%E5%8C%96"><span class="nav-number">8.</span> <span class="nav-text">第八章 数据格式化</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D-3"><span class="nav-number">8.1.</span> <span class="nav-text">基本介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%92%8C%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%87%AA%E5%8A%A8%E8%BD%AC%E6%8D%A2"><span class="nav-number">8.2.</span> <span class="nav-text">基本数据类型和字符串自动转换</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%AE%9E%E4%BE%8B-11"><span class="nav-number">8.2.1.</span> <span class="nav-text">应用实例</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BAMonster%E7%B1%BB"><span class="nav-number">8.2.1.1.</span> <span class="nav-text">创建Monster类</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-web-x2F-data-valid-jsp"><span class="nav-number">8.2.1.2.</span> <span class="nav-text">创建 web&#x2F;data_valid.jsp</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-MonsterHandler-java"><span class="nav-number">8.2.1.3.</span> <span class="nav-text">创建 MonsterHandler.java</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-web-x2F-WEB-INF-x2F-pages-x2F-datavalid-x2F-monster-addUI-jsp"><span class="nav-number">8.2.1.4.</span> <span class="nav-text">创建 web&#x2F;WEB-INF&#x2F;pages&#x2F;datavalid&#x2F;monster_addUI.jsp</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B5%8B%E8%AF%95"><span class="nav-number">8.2.1.5.</span> <span class="nav-text">测试</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-web-x2F-WEB-INF-x2F-pages-x2F-datavalid-x2F-success-jsp"><span class="nav-number">8.2.1.6.</span> <span class="nav-text">创建 web&#x2F;WEB-INF&#x2F;pages&#x2F;datavalid&#x2F;success.jsp</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-MonsterHandler-java"><span class="nav-number">8.2.1.7.</span> <span class="nav-text">修改 MonsterHandler.java</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%8C%E6%88%90%E6%B5%8B%E8%AF%95-6"><span class="nav-number">8.2.2.</span> <span class="nav-text">完成测试</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%89%B9%E6%AE%8A%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%92%8C%E5%AD%97%E7%AC%A6%E4%B8%B2%E9%97%B4%E7%9A%84%E8%BD%AC%E6%8D%A2"><span class="nav-number">8.3.</span> <span class="nav-text">特殊数据类型和字符串间的转换</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%AE%9E%E4%BE%8B-12"><span class="nav-number">8.3.1.</span> <span class="nav-text">应用实例</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-Monster-java"><span class="nav-number">8.3.1.1.</span> <span class="nav-text">修改 Monster.java</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-web-x2F-WEB-INF-x2F-pages-x2F-datavalid-x2F-monster-addUI-jsp"><span class="nav-number">8.3.1.2.</span> <span class="nav-text">修改 web&#x2F;WEB-INF&#x2F;pages&#x2F;datavalid&#x2F;monster_addUI.jsp</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%8C%E6%88%90%E6%B5%8B%E8%AF%95-7"><span class="nav-number">8.3.2.</span> <span class="nav-text">完成测试</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AC%AC%E4%B9%9D%E7%AB%A0-%E9%AA%8C%E8%AF%81%E4%BB%A5%E5%8F%8A%E5%9B%BD%E9%99%85%E5%8C%96"><span class="nav-number">9.</span> <span class="nav-text">第九章 验证以及国际化</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A6%82%E8%BF%B0"><span class="nav-number">9.1.</span> <span class="nav-text">概述</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#JSR-303-%E9%AA%8C%E8%AF%81%E6%A1%86%E6%9E%B6"><span class="nav-number">9.1.1.</span> <span class="nav-text">JSR 303 验证框架</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Hibernate-Validator-%E6%89%A9%E5%B1%95%E6%B3%A8%E8%A7%A3"><span class="nav-number">9.1.2.</span> <span class="nav-text">Hibernate Validator 扩展注解</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%AE%9E%E4%BE%8B-13"><span class="nav-number">9.2.</span> <span class="nav-text">应用实例</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BC%95%E5%85%A5%E9%AA%8C%E8%AF%81%E5%92%8C%E5%9B%BD%E9%99%85%E5%8C%96%E7%9B%B8%E5%85%B3%E7%9A%84-jar-%E5%8C%85"><span class="nav-number">9.2.1.</span> <span class="nav-text">引入验证和国际化相关的 jar 包</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-Monster-java-1"><span class="nav-number">9.2.2.</span> <span class="nav-text">修改 Monster.java</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-MonsterHandler-java-1"><span class="nav-number">9.2.3.</span> <span class="nav-text">修改 MonsterHandler.java</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-web-x2F-WEB-INF-x2F-pages-x2F-datavalid-x2F-monster-addUI-jsp-1"><span class="nav-number">9.2.4.</span> <span class="nav-text">修改 web&#x2F;WEB-INF&#x2F;pages&#x2F;datavalid&#x2F;monster_addUI.jsp</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B5%8B%E8%AF%95-1"><span class="nav-number">9.2.5.</span> <span class="nav-text">测试</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-src-i18n-properties"><span class="nav-number">9.2.6.</span> <span class="nav-text">创建 src\i18n.properties</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E5%9B%BD%E9%99%85%E5%8C%96%E6%96%87%E4%BB%B6-springDispatcherServlet-servlet-xml"><span class="nav-number">9.2.7.</span> <span class="nav-text">配置国际化文件 springDispatcherServlet-servlet.xml</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%8C%E6%88%90%E6%B5%8B%E8%AF%95-8"><span class="nav-number">9.2.8.</span> <span class="nav-text">完成测试</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%E5%92%8C%E7%BB%86%E8%8A%82%E8%AF%B4%E6%98%8E-2"><span class="nav-number">9.2.9.</span> <span class="nav-text">注意事项和细节说明</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B3%A8%E8%A7%A3%E7%9A%84%E7%BB%84%E5%90%88%E4%BD%BF%E7%94%A8"><span class="nav-number">9.3.</span> <span class="nav-text">注解的组合使用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%97%AE%E9%A2%98"><span class="nav-number">9.3.1.</span> <span class="nav-text">问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3%E9%97%AE%E9%A2%98"><span class="nav-number">9.3.2.</span> <span class="nav-text">解决问题</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2%E6%A0%A1%E9%AA%8C%E6%A0%B8%E5%BF%83%E7%B1%BB-DataBinder"><span class="nav-number">9.4.</span> <span class="nav-text">数据类型转换校验核心类-DataBinder</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%96%E6%B6%88%E6%9F%90%E4%B8%AA%E5%B1%9E%E6%80%A7%E7%9A%84%E7%BB%91%E5%AE%9A"><span class="nav-number">9.5.</span> <span class="nav-text">取消某个属性的绑定</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%B4%E6%98%8E-11"><span class="nav-number">9.5.1.</span> <span class="nav-text">说明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%AE%9E%E4%BE%8B-14"><span class="nav-number">9.5.2.</span> <span class="nav-text">应用实例</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-MonsterHandler-java-2"><span class="nav-number">9.5.2.1.</span> <span class="nav-text">修改 MonsterHandler.java</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-Monster-java-2"><span class="nav-number">9.5.2.2.</span> <span class="nav-text">修改 Monster.java</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%8C%E6%88%90%E6%B5%8B%E8%AF%95-9"><span class="nav-number">9.5.3.</span> <span class="nav-text">完成测试</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%E5%92%8C%E7%BB%86%E8%8A%82%E8%AF%B4%E6%98%8E-3"><span class="nav-number">9.5.4.</span> <span class="nav-text">注意事项和细节说明</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AC%AC%E5%8D%81%E7%AB%A0-%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81%E5%A4%84%E7%90%86"><span class="nav-number">10.</span> <span class="nav-text">第十章 中文乱码处理</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="nav-number">10.1.</span> <span class="nav-text">自定义中文乱码过滤器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E8%BF%87%E6%BB%A4%E5%99%A8-MyCharacterFilter-java"><span class="nav-number">10.1.1.</span> <span class="nav-text">创建过滤器 MyCharacterFilter.java</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-web-xml"><span class="nav-number">10.1.2.</span> <span class="nav-text">修改 web.xml</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%8C%E6%88%90%E6%B5%8B%E8%AF%95-10"><span class="nav-number">10.1.3.</span> <span class="nav-text">完成测试</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Spring-%E6%8F%90%E4%BE%9B%E7%9A%84%E8%BF%87%E6%BB%A4%E5%99%A8%E5%A4%84%E7%90%86%E4%B8%AD%E6%96%87"><span class="nav-number">10.2.</span> <span class="nav-text">Spring 提供的过滤器处理中文</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-web-xml-1"><span class="nav-number">10.2.1.</span> <span class="nav-text">修改 web.xml</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%8C%E6%88%90%E6%B5%8B%E8%AF%95-11"><span class="nav-number">10.2.2.</span> <span class="nav-text">完成测试</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AC%AC%E5%8D%81%E4%B8%80%E7%AB%A0-%E5%A4%84%E7%90%86-json-%E5%92%8C-HttpMessageConverter-lt-T-gt"><span class="nav-number">11.</span> <span class="nav-text">第十一章 处理 json 和 HttpMessageConverter&lt;T&gt;</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%84%E7%90%86-JSON-ResponseBody"><span class="nav-number">11.1.</span> <span class="nav-text">处理 JSON-@ResponseBody</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BC%95%E5%85%A5-jackson-jar"><span class="nav-number">11.1.1.</span> <span class="nav-text">引入 jackson.jar</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-Dog-java"><span class="nav-number">11.1.2.</span> <span class="nav-text">创建 Dog.java</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-JsonHandler-java"><span class="nav-number">11.1.3.</span> <span class="nav-text">创建 JsonHandler.java</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-web-json-jsp"><span class="nav-number">11.1.4.</span> <span class="nav-text">创建 web\json.jsp</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%8C%E6%88%90%E6%B5%8B%E8%AF%95-12"><span class="nav-number">11.1.5.</span> <span class="nav-text">完成测试</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%84%E7%90%86-JSON-RequestBody"><span class="nav-number">11.2.</span> <span class="nav-text">处理 JSON-@RequestBody</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-User-java-1"><span class="nav-number">11.2.1.</span> <span class="nav-text">创建 User.java</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-JsonHandler-java"><span class="nav-number">11.2.2.</span> <span class="nav-text">修改 JsonHandler.java</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-json-jsp"><span class="nav-number">11.2.3.</span> <span class="nav-text">修改 json.jsp</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%8C%E6%88%90%E6%B5%8B%E8%AF%95-13"><span class="nav-number">11.2.4.</span> <span class="nav-text">完成测试</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%84%E7%90%86JSON-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%E5%92%8C%E7%BB%86%E8%8A%82"><span class="nav-number">11.3.</span> <span class="nav-text">处理JSON-注意事项和细节</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#HttpMessageConverter-lt-T-gt"><span class="nav-number">11.4.</span> <span class="nav-text">HttpMessageConverter&lt;T&gt;</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%B4%E6%98%8E-12"><span class="nav-number">11.4.1.</span> <span class="nav-text">说明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B7%A5%E4%BD%9C%E6%9C%BA%E5%88%B6"><span class="nav-number">11.4.2.</span> <span class="nav-text">工作机制</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD"><span class="nav-number">11.5.</span> <span class="nav-text">文件下载</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-JsonHandler-java-1"><span class="nav-number">11.5.1.</span> <span class="nav-text">修改 JsonHandler.java</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-json-jsp-1"><span class="nav-number">11.5.2.</span> <span class="nav-text">修改 json.jsp</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%8C%E6%88%90%E6%B5%8B%E8%AF%95-14"><span class="nav-number">11.5.3.</span> <span class="nav-text">完成测试</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AC%AC%E5%8D%81%E4%BA%8C%E7%AB%A0-SpringMVC%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6"><span class="nav-number">12.</span> <span class="nav-text">第十二章 SpringMVC上传文件</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D-4"><span class="nav-number">12.1.</span> <span class="nav-text">基本介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%AE%9E%E4%BE%8B-15"><span class="nav-number">12.2.</span> <span class="nav-text">应用实例</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BC%95%E5%85%A5-springmvc-%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E9%9C%80%E8%A6%81%E7%9A%84-jar-%E5%8C%85"><span class="nav-number">12.2.1.</span> <span class="nav-text">引入 springmvc 文件上传需要的 jar 包</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-web-fileUpload-jsp"><span class="nav-number">12.2.2.</span> <span class="nav-text">创建 web\fileUpload.jsp</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-web-xml-2"><span class="nav-number">12.2.3.</span> <span class="nav-text">修改 web.xml</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-springDispatcherServlet-servlet-xml-1"><span class="nav-number">12.2.4.</span> <span class="nav-text">修改 springDispatcherServlet-servlet.xml</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-FileUploadHandler-java"><span class="nav-number">12.2.5.</span> <span class="nav-text">创建 FileUploadHandler.java</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%AD%A4%E6%97%B6%E4%BC%9A%E6%8A%A5%E9%94%99"><span class="nav-number">12.2.6.</span> <span class="nav-text">此时会报错</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-springDispatcherServlet-servlet-xml-2"><span class="nav-number">12.2.7.</span> <span class="nav-text">修改 springDispatcherServlet-servlet.xml</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%8C%E6%88%90%E6%B5%8B%E8%AF%95-15"><span class="nav-number">12.2.8.</span> <span class="nav-text">完成测试</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AC%AC%E5%8D%81%E4%B8%89%E7%AB%A0-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="nav-number">13.</span> <span class="nav-text">第十三章 自定义拦截器</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="nav-number">13.1.</span> <span class="nav-text">什么是拦截器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%B4%E6%98%8E-13"><span class="nav-number">13.1.1.</span> <span class="nav-text">说明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8B%A6%E6%88%AA%E5%99%A8%E7%9A%84%E4%B8%89%E4%B8%AA%E6%96%B9%E6%B3%95"><span class="nav-number">13.1.2.</span> <span class="nav-text">自定义拦截器的三个方法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8B%A6%E6%88%AA%E5%99%A8%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B%E5%88%86%E6%9E%90%E5%9B%BE"><span class="nav-number">13.2.</span> <span class="nav-text">自定义拦截器执行流程分析图</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8B%A6%E6%88%AA%E5%99%A8%E5%BA%94%E7%94%A8%E5%AE%9E%E4%BE%8B"><span class="nav-number">13.3.</span> <span class="nav-text">自定义拦截器应用实例</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8-1"><span class="nav-number">13.3.1.</span> <span class="nav-text">快速入门</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-MyInterceptor01-java"><span class="nav-number">13.3.1.1.</span> <span class="nav-text">创建 MyInterceptor01.java</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-springDispatcherServlet-servlet-xml-3"><span class="nav-number">13.3.1.2.</span> <span class="nav-text">修改 springDispatcherServlet-servlet.xml</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-FurnHandler-java"><span class="nav-number">13.3.1.3.</span> <span class="nav-text">创建 FurnHandler.java</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-web-x2F-interceptor-jsp"><span class="nav-number">13.3.1.4.</span> <span class="nav-text">创建 web&#x2F;interceptor.jsp</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%8C%E6%88%90%E6%B5%8B%E8%AF%95-16"><span class="nav-number">13.3.1.5.</span> <span class="nav-text">完成测试</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%E5%92%8C%E7%BB%86%E8%8A%82%E8%AF%B4%E6%98%8E-4"><span class="nav-number">13.3.2.</span> <span class="nav-text">注意事项和细节说明</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%9A%E4%B8%AA%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="nav-number">13.4.</span> <span class="nav-text">多个拦截器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B"><span class="nav-number">13.4.1.</span> <span class="nav-text">执行流程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%AE%9E%E4%BE%8B1"><span class="nav-number">13.4.2.</span> <span class="nav-text">应用实例1</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-MyInterceptor02-java"><span class="nav-number">13.4.2.1.</span> <span class="nav-text">创建 MyInterceptor02.java</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-springDispatcherServlet-servlet-xml-4"><span class="nav-number">13.4.2.2.</span> <span class="nav-text">修改 springDispatcherServlet-servlet.xml</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%8C%E6%88%90%E6%B5%8B%E8%AF%95-17"><span class="nav-number">13.4.2.3.</span> <span class="nav-text">完成测试</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%E5%92%8C%E7%BB%86%E8%8A%82%E8%AF%B4%E6%98%8E-5"><span class="nav-number">13.4.2.4.</span> <span class="nav-text">注意事项和细节说明</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%AE%9E%E4%BE%8B2"><span class="nav-number">13.4.3.</span> <span class="nav-text">应用实例2</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-web-WEB-INF-pages-waring-jsp"><span class="nav-number">13.4.3.1.</span> <span class="nav-text">创建 web\WEB-INF\pages\waring.jsp</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-MyInterceptor01-java"><span class="nav-number">13.4.3.2.</span> <span class="nav-text">修改 MyInterceptor01.java</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%8C%E6%88%90%E6%B5%8B%E8%AF%95-18"><span class="nav-number">13.4.3.3.</span> <span class="nav-text">完成测试</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AC%AC%E5%8D%81%E5%9B%9B%E7%AB%A0-%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="nav-number">14.</span> <span class="nav-text">第十四章 异常处理</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D-5"><span class="nav-number">14.1.</span> <span class="nav-text">基本介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B1%80%E9%83%A8%E5%BC%82%E5%B8%B8"><span class="nav-number">14.2.</span> <span class="nav-text">局部异常</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%AE%9E%E4%BE%8B-16"><span class="nav-number">14.2.1.</span> <span class="nav-text">应用实例</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-MyExceptionHandler-java"><span class="nav-number">14.2.1.1.</span> <span class="nav-text">创建 MyExceptionHandler.java</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-web-exception-jsp"><span class="nav-number">14.2.1.2.</span> <span class="nav-text">创建 web\exception.jsp</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-web-WEB-INF-pages-exception-mes-jsp"><span class="nav-number">14.2.1.3.</span> <span class="nav-text">创建 web\WEB-INF\pages\exception_mes.jsp</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%8C%E6%88%90%E6%B5%8B%E8%AF%95-19"><span class="nav-number">14.2.1.4.</span> <span class="nav-text">完成测试</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Debug"><span class="nav-number">14.2.2.</span> <span class="nav-text">Debug</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%A8%E5%B1%80%E5%BC%82%E5%B8%B8"><span class="nav-number">14.3.</span> <span class="nav-text">全局异常</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%AE%9E%E4%BE%8B-17"><span class="nav-number">14.3.1.</span> <span class="nav-text">应用实例</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-MyGlobalException-java"><span class="nav-number">14.3.1.1.</span> <span class="nav-text">创建 MyGlobalException.java</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-MyExceptionHandler-java"><span class="nav-number">14.3.1.2.</span> <span class="nav-text">修改 MyExceptionHandler.java</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-web-exception-jsp"><span class="nav-number">14.3.1.3.</span> <span class="nav-text">修改 web\exception.jsp</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%8C%E6%88%90%E6%B5%8B%E8%AF%95-20"><span class="nav-number">14.3.1.4.</span> <span class="nav-text">完成测试</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Debug-1"><span class="nav-number">14.3.2.</span> <span class="nav-text">Debug</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%A8%E6%84%8F"><span class="nav-number">14.3.3.</span> <span class="nav-text">注意</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8"><span class="nav-number">14.4.</span> <span class="nav-text">自定义异常</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%AE%9E%E4%BE%8B-18"><span class="nav-number">14.4.1.</span> <span class="nav-text">应用实例</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-AgeException-java"><span class="nav-number">14.4.1.1.</span> <span class="nav-text">创建 AgeException.java</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-MyExceptionHandler-java-1"><span class="nav-number">14.4.1.2.</span> <span class="nav-text">修改 MyExceptionHandler.java</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-exception-jsp"><span class="nav-number">14.4.1.3.</span> <span class="nav-text">修改 exception.jsp</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%8C%E6%88%90%E6%B5%8B%E8%AF%95-21"><span class="nav-number">14.4.1.4.</span> <span class="nav-text">完成测试</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Debug-2"><span class="nav-number">14.4.2.</span> <span class="nav-text">Debug</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BB%9F%E4%B8%80%E5%A4%84%E7%90%86%E5%BC%82%E5%B8%B8"><span class="nav-number">14.5.</span> <span class="nav-text">统一处理异常</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%B4%E6%98%8E-14"><span class="nav-number">14.5.1.</span> <span class="nav-text">说明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%AE%9E%E4%BE%8B-19"><span class="nav-number">14.5.2.</span> <span class="nav-text">应用实例</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-MyExceptionHandler-java-2"><span class="nav-number">14.5.2.1.</span> <span class="nav-text">修改 MyExceptionHandler.java</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-springDispatcherServlet-servlet-xml-5"><span class="nav-number">14.5.2.2.</span> <span class="nav-text">修改 springDispatcherServlet-servlet.xml</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-web-WEB-INF-pages-arrEx-jsp"><span class="nav-number">14.5.2.3.</span> <span class="nav-text">创建 web\WEB-INF\pages\arrEx.jsp</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-exception-jsp-1"><span class="nav-number">14.5.2.4.</span> <span class="nav-text">修改 exception.jsp</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%8C%E6%88%90%E6%B5%8B%E8%AF%95-22"><span class="nav-number">14.5.2.5.</span> <span class="nav-text">完成测试</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%B9%E6%9C%AA%E7%9F%A5%E5%BC%82%E5%B8%B8%E8%BF%9B%E8%A1%8C%E7%BB%9F%E4%B8%80%E5%A4%84%E7%90%86"><span class="nav-number">14.5.3.</span> <span class="nav-text">对未知异常进行统一处理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-MyExceptionHandler-java-3"><span class="nav-number">14.5.3.1.</span> <span class="nav-text">修改 MyExceptionHandler.java</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-springDispatcherServlet-servlet-xml-6"><span class="nav-number">14.5.3.2.</span> <span class="nav-text">修改 springDispatcherServlet-servlet.xml</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-web-WEB-INF-pages-allEx-jsp"><span class="nav-number">14.5.3.3.</span> <span class="nav-text">创建 web\WEB-INF\pages\allEx.jsp</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-exception-jsp-2"><span class="nav-number">14.5.3.4.</span> <span class="nav-text">修改 exception.jsp</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%8C%E6%88%90%E6%B5%8B%E8%AF%95-23"><span class="nav-number">14.5.3.5.</span> <span class="nav-text">完成测试</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E7%9A%84%E4%BC%98%E5%85%88%E7%BA%A7"><span class="nav-number">14.6.</span> <span class="nav-text">异常处理的优先级</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="LiAng"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">LiAng</p>
  <div class="site-description" itemprop="description">永远相信美好的事情即将发生</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">6</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/Will-Liang" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Will-Liang" rel="noopener" target="_blank"><i class="github fa-fw"></i>GitHub</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://baidu.com/" title="https:&#x2F;&#x2F;baidu.com" rel="noopener" target="_blank">百度</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2022-07 – 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">LiAng</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">博客全站共136.8k字</span>
</div>



    <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

    <span id="busuanzi_container_site_pv">总访问量<span id="busuanzi_value_site_pv"></span>次</span>
    <span class="post-meta-divider">|</span>
    <span id="busuanzi_container_site_uv">总访客数<span id="busuanzi_value_site_uv"></span>人</span>
    <span class="post-meta-divider">|</span>
<!-- 不蒜子计数初始值纠正 -->
<script>
$(document).ready(function() {

    var int = setInterval(fixCount, 50);  // 50ms周期检测函数
    var countOffset = 20000;  // 初始化首次数据

    function fixCount() {            
       if (document.getElementById("busuanzi_container_site_pv").style.display != "none")
        {
            $("#busuanzi_value_site_pv").html(parseInt($("#busuanzi_value_site_pv").html()) + countOffset); 
            clearInterval(int);
        }                  
        if ($("#busuanzi_container_site_pv").css("display") != "none")
        {
            $("#busuanzi_value_site_uv").html(parseInt($("#busuanzi_value_site_uv").html()) + countOffset); // 加上初始数据 
            clearInterval(int); // 停止检测
        }  
    }
       	
});
</script> 

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  
  <script color='0,0,255' opacity='0.5' zIndex='-1' count='99' src="/lib/canvas-nest/canvas-nest.min.js"></script>
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

  

</body>
</html>
